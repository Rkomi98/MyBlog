<!DOCTYPE html>
<html lang="it" translate="no">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Data Visualization masterclass - Parte 1 | Mirko Calcaterra</title>
  <meta name="description" content="üìä Data Visualization masterclass ‚Äî Parte 1 &quot;So What?&quot; Framework, Pyramid Principle e i fondamenti di Dataviz Contesto: Questo notebook didattico √® stato progettato per la lezione di Data Analysis avanzato per Mondadori (Marzo 2026). Dataset: I dati sono stat‚Ä¶">
  <meta name="keywords" content="Data Visualization, Notebook, Data Storytelling, Masterclass, Python, Matplotlib, Seaborn, Plotly">
  <meta name="author" content="Mirko Calcaterra">
  <link rel="canonical" href="${pageUrl}">

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-9EVQ8G9W48"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-9EVQ8G9W48');
  </script>

  <!-- Open Graph -->
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://rkomi98.github.io/MyBlog/blog/it/datavis-masterclass-parte-1/">
  <meta property="og:title" content="Data Visualization masterclass - Parte 1">
  <meta property="og:description" content="üìä Data Visualization masterclass ‚Äî Parte 1 &quot;So What?&quot; Framework, Pyramid Principle e i fondamenti di Dataviz Contesto: Questo notebook didattico √® stato progettato per la lezione di Data Analysis avanzato per Mondadori (Marzo 2026). Dataset: I dati sono stat‚Ä¶">
  <meta property="og:image" content="https://rkomi98.github.io/MyBlog/Assets/Logo.png">
  <meta property="article:published_time" content="2026-02-18T00:00:00.000Z">
  <meta property="article:author" content="Mirko Calcaterra">
  <meta property="article:section" content="Percorso AI Engineering">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:title" content="Data Visualization masterclass - Parte 1">
  <meta property="twitter:description" content="üìä Data Visualization masterclass ‚Äî Parte 1 &quot;So What?&quot; Framework, Pyramid Principle e i fondamenti di Dataviz Contesto: Questo notebook didattico √® stato progettato per la lezione di Data Analysis avanzato per Mondadori (Marzo 2026). Dataset: I dati sono stat‚Ä¶">
  <meta property="twitter:image" content="https://rkomi98.github.io/MyBlog/Assets/Logo.png">

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "Data Visualization masterclass - Parte 1",
    "image": "https://rkomi98.github.io/MyBlog/Assets/Logo.png",
    "datePublished": "2026-02-18T00:00:00.000Z",
    "dateModified": "2026-02-18T15:41:15.656Z",
    "author": {
      "@type": "Person",
      "name": "Mirko Calcaterra",
      "url": "https://rkomi98.github.io/MyBlog/"
    },
    "publisher": {
      "@type": "Person",
      "name": "Mirko Calcaterra"
    },
    "description": "üìä Data Visualization masterclass ‚Äî Parte 1 &quot;So What?&quot; Framework, Pyramid Principle e i fondamenti di Dataviz Contesto: Questo notebook didattico √® stato progettato per la lezione di Data Analysis avanzato per Mondadori (Marzo 2026). Dataset: I dati sono stat‚Ä¶"
  }
  </script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
    }
    html {
      scroll-behavior: smooth;
    }
    body {
      margin: 0;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: radial-gradient(120% 120% at 50% 0%, rgba(59, 130, 246, 0.18) 0%, transparent 65%), var(--bg-primary);
      color: var(--text-primary);
      transition: background 0.3s ease, color 0.3s ease;
      --bg-primary: #0f172a;
      --bg-secondary: #111c33;
      --bg-card: rgba(15, 23, 42, 0.78);
      --bg-card-strong: rgba(15, 23, 42, 0.9);
      --border: rgba(148, 163, 184, 0.24);
      --text-primary: #e2e8f0;
      --text-secondary: #cbd5f5;
      --text-muted: #94a3b8;
      --accent: #60a5fa;
      --accent-strong: #38bdf8;
      --shadow-lg: 0 28px 60px -36px rgba(15, 23, 42, 0.9);
      --code-inline-bg: rgba(6, 11, 19, 0.92);
      --code-block-bg: #050912;
      --code-border: rgba(148, 163, 184, 0.35);
      --code-shadow: inset 0 0 0 1px rgba(148, 163, 184, 0.12);
      --code-text: #f8fafc;
    }
    body[data-theme="light"] {
      --bg-primary: #f8fafc;
      --bg-secondary: #ffffff;
      --bg-card: rgba(255, 255, 255, 0.96);
      --bg-card-strong: rgba(248, 250, 252, 0.98);
      --border: rgba(148, 163, 184, 0.18);
      --text-primary: #0f172a;
      --text-secondary: #334155;
      --text-muted: #64748b;
      --accent: #2563eb;
      --accent-strong: #1d4ed8;
      --shadow-lg: 0 28px 50px -38px rgba(15, 23, 42, 0.18);
      background: radial-gradient(120% 120% at 50% 0%, rgba(59, 130, 246, 0.12) 0%, transparent 60%), var(--bg-primary);
    }
    body[data-theme="light"] .post-toc {
      background: rgba(255, 255, 255, 0.96);
    }
    body[data-theme="light"] .post-body {
      background: rgba(255, 255, 255, 0.96);
      color: var(--text-secondary);
    }
    body[data-theme="light"] .post-hero__category {
      background: rgba(37, 99, 235, 0.12);
      color: var(--accent-strong);
    }
    body[data-theme="light"] .post-body blockquote {
      background: rgba(37, 99, 235, 0.1);
      color: var(--text-primary);
    }
    a {
      color: inherit;
      text-decoration: none;
    }
    header.site-header {
      position: sticky;
      top: 0;
      z-index: 12;
      backdrop-filter: blur(14px);
      background: rgba(15, 23, 42, 0.85);
      border-bottom: 1px solid var(--border);
      transition: background 0.3s ease;
    }
    body[data-theme="light"] header.site-header {
      background: rgba(248, 250, 252, 0.9);
    }
    .site-header__inner {
      max-width: 1200px;
      margin: 0 auto;
      padding: 1.15rem clamp(1.5rem, 3vw, 3rem);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1.5rem;
    }
    .site-header__left {
      display: flex;
      align-items: center;
      gap: 1.75rem;
    }
    .logo {
      display: inline-flex;
      align-items: center;
      gap: 0.7rem;
      font-weight: 600;
      color: var(--text-primary);
      font-size: 1.05rem;
      letter-spacing: 0.01em;
    }
    .logo-img {
      width: 38px;
      height: 38px;
      border-radius: 12px;
      object-fit: cover;
      box-shadow: 0 8px 18px -12px rgba(15, 23, 42, 0.6);
    }
    .site-nav {
      display: flex;
      gap: 1.1rem;
      font-size: 0.95rem;
      font-weight: 500;
      color: var(--text-muted);
    }
    .site-nav a:hover {
      color: var(--accent);
    }
    .header-controls {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    .lang-btn {
      border: 1px solid var(--border);
      background: var(--bg-card);
      color: var(--text-primary);
      padding: 0.45rem 0.9rem;
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s ease, color 0.2s ease, border 0.2s ease, transform 0.2s ease;
    }
    .lang-btn:hover:not(.lang-btn--disabled) {
      background: var(--accent);
      color: #ffffff;
      transform: translateY(-1px);
      border-color: transparent;
    }
    .lang-btn--disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    .theme-toggle {
      position: relative;
      width: 52px;
      height: 28px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: var(--bg-card);
      cursor: pointer;
      padding: 0;
      transition: background 0.3s ease, border 0.3s ease;
      display: flex;
      align-items: center;
    }
    .theme-toggle .theme-thumb {
      position: absolute;
      top: 50%;
      left: 4px;
      transform: translateY(-50%);
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background: #ffffff;
      color: #1f2937;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      transition: transform 0.3s ease, background 0.3s ease, color 0.3s ease;
      box-shadow: 0 6px 18px -8px rgba(15, 23, 42, 0.6);
    }
    body[data-theme="dark"] .theme-toggle .theme-thumb {
      transform: translate(20px, -50%);
      background: #1f2937;
      color: #f8fafc;
    }
    body[data-theme="dark"] .theme-toggle {
      background: rgba(37, 99, 235, 0.2);
      border-color: rgba(37, 99, 235, 0.3);
    }
    main.page {
      max-width: 1200px;
      margin: 0 auto;
      padding: 3.5rem clamp(1.5rem, 3vw, 3rem) 4.5rem;
    }
    .post-hero {
      position: relative;
      overflow: hidden;
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.22) 0%, rgba(14, 165, 233, 0.08) 60%), var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 28px;
      padding: 2.75rem;
      box-shadow: var(--shadow-lg);
      margin-bottom: 3rem;
    }
    .post-hero::after {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 20% 20%, rgba(59, 130, 246, 0.22) 0%, transparent 55%);
      pointer-events: none;
    }
    .post-hero__icon {
      position: relative;
      font-size: 3.1rem;
      margin-bottom: 1.5rem;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    .post-hero__category {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.4rem 1rem;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.35);
      color: #ffffff;
      font-weight: 600;
      letter-spacing: 0.02em;
      margin-bottom: 1.25rem;
      text-transform: uppercase;
      font-size: 0.8rem;
    }
    .post-hero__title {
      position: relative;
      margin: 0 0 1.25rem;
      font-size: clamp(2.4rem, 4vw, 3.2rem);
      letter-spacing: -0.025em;
      line-height: 1.2;
      color: var(--text-primary);
    }
    .post-hero__meta {
      position: relative;
      display: flex;
      flex-wrap: wrap;
      gap: 1.25rem;
      color: var(--text-muted);
      font-size: 0.95rem;
      font-weight: 500;
    }
    .post-hero__meta span {
      display: inline-flex;
      align-items: center;
      gap: 0.45rem;
    }
    .post-layout {
      display: grid;
      grid-template-columns: minmax(220px, 300px) minmax(0, 1fr);
      gap: 2.75rem;
      align-items: flex-start;
    }
    .post-layout--single {
      grid-template-columns: minmax(0, 1fr);
    }
    .post-toc {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 22px;
      padding: 1.5rem 1.6rem 1.8rem;
      box-shadow: var(--shadow-lg);
      position: sticky;
      top: 120px;
      max-height: calc(100vh - 160px);
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }
    .post-toc__header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.75rem;
      margin-bottom: 0.5rem;
    }
    .post-toc__title {
      text-transform: uppercase;
      font-size: 0.78rem;
      letter-spacing: 0.18em;
      font-weight: 700;
      color: var(--text-muted);
    }
    .post-toc__toggle {
      display: none;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--text-secondary);
      border-radius: 999px;
      padding: 0.25rem 0.8rem;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      align-items: center;
      gap: 0.4rem;
      transition: background 0.2s ease, border 0.2s ease, color 0.2s ease;
    }
    .post-toc__toggle:hover {
      background: rgba(96, 165, 250, 0.15);
      border-color: transparent;
      color: var(--accent);
    }
    .post-toc__content {
      margin-top: 0.6rem;
      overflow-y: auto;
      padding-right: 0.4rem;
      transition: max-height 0.25s ease, opacity 0.25s ease;
      max-height: calc(100vh - 220px);
    }
    .post-toc--collapsed .post-toc__content {
      max-height: 0;
      opacity: 0;
      margin-top: 0;
      pointer-events: none;
    }
    .post-toc__list {
      list-style: none;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      gap: 0.45rem;
    }
    .post-toc__sublist {
      margin-left: 0.85rem;
      padding-left: 0.85rem;
      border-left: 1px solid rgba(148, 163, 184, 0.35);
      margin-top: 0.4rem;
      gap: 0.35rem;
    }
    .post-toc__item {
      margin: 0;
    }
    .post-toc__link {
      color: var(--text-secondary);
      font-size: 0.95rem;
      line-height: 1.45;
      display: flex;
      align-items: flex-start;
      gap: 0.5rem;
      border-bottom: 1px dashed transparent;
      transition: color 0.2s ease, border-bottom 0.2s ease, transform 0.2s ease;
    }
    .post-toc__link:hover {
      color: var(--accent);
      border-bottom-color: rgba(96, 165, 250, 0.4);
      transform: translateX(2px);
    }
    .post-toc__link--active {
      color: var(--accent-strong);
      border-bottom-color: var(--accent-strong);
    }
    .post-toc__number {
      font-variant-numeric: tabular-nums;
      font-size: 0.85rem;
      color: var(--text-muted);
      min-width: 2.5ch;
      display: inline-flex;
      justify-content: flex-end;
      padding-top: 0.15rem;
    }
    .post-toc__text {
      flex: 1;
    }
    .post-body {
      background: var(--bg-card-strong);
      border: 1px solid var(--border);
      border-radius: 26px;
      padding: 2.5rem;
      box-shadow: var(--shadow-lg);
      font-size: 1.04rem;
      line-height: 1.75;
      color: var(--text-secondary);
    }
    .post-body h2 {
      margin-top: 2.75rem;
      margin-bottom: 1.25rem;
      font-size: clamp(1.9rem, 3vw, 2.35rem);
      color: var(--text-primary);
      letter-spacing: -0.01em;
    }
    .post-body h3 {
      margin-top: 2.2rem;
      margin-bottom: 1rem;
      font-size: 1.5rem;
      color: var(--text-primary);
    }
    .post-body h4 {
      margin-top: 1.8rem;
      margin-bottom: 0.75rem;
      font-size: 1.2rem;
      color: var(--text-primary);
    }
    .post-body p {
      margin-bottom: 1.4rem;
    }
    .post-body .post-warning {
      margin: 2rem 0;
      border-radius: 18px;
      border: 1px solid rgba(250, 204, 21, 0.35);
      background: rgba(254, 243, 199, 0.9);
      color: #4a3b0a;
      padding: 0 1.25rem 1rem;
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.35);
    }
    body[data-theme="dark"] .post-body .post-warning {
      background: rgba(253, 230, 138, 0.12);
      border-color: rgba(251, 191, 36, 0.5);
      color: #f6e6b2;
      box-shadow: inset 0 0 0 1px rgba(250, 200, 88, 0.3);
    }
    .post-body .post-warning summary {
      list-style: none;
      cursor: pointer;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 1rem 0;
      color: inherit;
    }
    .post-body .post-warning summary::-webkit-details-marker {
      display: none;
    }
    .post-body .post-warning summary::before {
      content: '‚ö†Ô∏è';
      font-size: 1rem;
    }
    .post-body .post-warning[open] {
      padding-bottom: 1.25rem;
    }
    .post-body .post-warning p:last-child {
      margin-bottom: 0;
    }
    .post-body ul,
    .post-body ol {
      margin: 1.4rem 0 1.4rem 1.4rem;
      padding: 0;
    }
    .post-body li {
      margin-bottom: 0.8rem;
    }
    .post-body a {
      color: var(--accent);
      text-decoration: none;
      border-bottom: 1px solid rgba(96, 165, 250, 0.35);
      transition: color 0.2s ease, border-bottom 0.2s ease;
    }
    .post-body a:hover {
      color: var(--accent-strong);
      border-bottom-color: var(--accent-strong);
    }
    .post-body blockquote {
      margin: 2rem 0;
      padding: 1.5rem 1.75rem;
      border-left: 4px solid var(--accent);
      border-radius: 0 18px 18px 0;
      background: rgba(37, 99, 235, 0.12);
      color: var(--text-primary);
    }
    .post-body code {
      background: var(--code-inline-bg);
      color: var(--code-text);
      padding: 0.2rem 0.45rem;
      border-radius: 6px;
      font-family: 'JetBrains Mono', 'Fira Code', monospace;
      font-size: 0.9rem;
    }
    .post-body pre code {
      background: transparent;
      padding: 0;
      display: block;
      font-size: inherit;
      line-height: inherit;
    }
    .hljs {
      color: #e2e8f0;
      background: transparent;
    }
    .hljs-comment,
    .hljs-quote {
      color: #7dd79d;
      font-style: italic;
    }
    .hljs-keyword,
    .hljs-selector-tag,
    .hljs-literal,
    .hljs-name,
    .hljs-strong,
    .hljs-built_in {
      color: #7dd3fc;
      font-weight: 600;
    }
    .hljs-title,
    .hljs-section,
    .hljs-function,
    .hljs-meta .hljs-keyword {
      color: #38bdf8;
      font-weight: 600;
    }
    .hljs-string,
    .hljs-doctag,
    .hljs-addition,
    .hljs-attribute,
    .hljs-template-tag,
    .hljs-template-variable {
      color: #facc15;
    }
    .hljs-number,
    .hljs-symbol,
    .hljs-bullet,
    .hljs-link,
    .hljs-meta,
    .hljs-type {
      color: #f472b6;
    }
    .hljs-variable,
    .hljs-params {
      color: #cbd5f5;
    }
    .post-body pre {
      background: var(--code-block-bg);
      color: var(--code-text);
      padding: 1.2rem 1.4rem;
      padding-right: 3.6rem;
      border-radius: 18px;
      overflow-x: auto;
      font-family: 'JetBrains Mono', 'Fira Code', monospace;
      font-size: 0.95rem;
      box-shadow: var(--code-shadow);
      border: 1px solid var(--code-border);
      margin: 2rem 0;
      position: relative;
    }
    .code-copy-btn {
      position: absolute;
      top: 0.75rem;
      right: 0.75rem;
      background: rgba(15, 23, 42, 0.8);
      color: #e2e8f0;
      border: 1px solid rgba(148, 163, 184, 0.35);
      border-radius: 999px;
      padding: 0.25rem 0.85rem;
      font-size: 0.85rem;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      cursor: pointer;
      transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease, transform 0.2s ease;
    }
    .code-copy-btn:hover {
      background: rgba(96, 165, 250, 0.85);
      color: #ffffff;
      border-color: transparent;
      transform: translateY(-1px);
    }
    .code-copy-btn--copied {
      background: rgba(34, 197, 94, 0.85);
      color: #ffffff;
      border-color: transparent;
    }
    .code-copy-btn__icon {
      font-size: 0.95rem;
    }
    .code-copy-btn__text {
      display: inline-block;
    }
    body[data-theme="light"] .code-copy-btn {
      background: rgba(248, 250, 252, 0.85);
      color: #0f172a;
      border-color: rgba(148, 163, 184, 0.4);
    }
    body[data-theme="light"] .code-copy-btn--copied {
      background: rgba(34, 197, 94, 0.92);
      color: #ffffff;
    }
    .post-body img {
      max-width: 100%;
      border-radius: 18px;
      margin: 2.2rem 0;
      box-shadow: 0 24px 45px -28px rgba(15, 23, 42, 0.55);
    }
    .post-body .table-wrapper {
      margin: 2rem 0;
      border-radius: 18px;
      border: 1px solid var(--border);
      background: rgba(15, 23, 42, 0.55);
      box-shadow: inset 0 0 0 1px rgba(148, 163, 184, 0.12);
      position: relative;
      overflow: hidden;
    }
    .post-body .table-wrapper__scroll {
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }
    .post-body .table-wrapper__scroll::-webkit-scrollbar {
      height: 10px;
    }
    .post-body .table-wrapper__scroll::-webkit-scrollbar-thumb {
      background: rgba(96, 165, 250, 0.4);
      border-radius: 999px;
    }
    .post-body .table-wrapper table {
      width: 100%;
      border-collapse: collapse;
      background: transparent;
    }
    .post-body .table-wrapper[data-table-size="medium"] table {
      min-width: 720px;
    }
    .post-body .table-wrapper[data-table-size="wide"] table {
      min-width: 960px;
    }
    .post-body .table-wrapper thead th {
      background: rgba(96, 165, 250, 0.12);
      color: var(--text-primary);
      font-weight: 600;
    }
    .post-body .table-wrapper th,
    .post-body .table-wrapper td {
      padding: 0.9rem 1rem;
      text-align: left;
      border-bottom: 1px solid rgba(148, 163, 184, 0.18);
      white-space: nowrap;
    }
    .post-body .table-wrapper td {
      white-space: normal;
    }
    .post-body .table-wrapper tr:last-child td {
      border-bottom: none;
    }
    .post-body .table-wrapper__expand {
      position: absolute;
      top: 0.75rem;
      right: 0.75rem;
      background: rgba(15, 23, 42, 0.85);
      border: 1px solid rgba(148, 163, 184, 0.3);
      color: var(--accent);
      border-radius: 999px;
      padding: 0.35rem 0.9rem;
      font-size: 0.85rem;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      cursor: pointer;
      transition: background 0.2s ease, color 0.2s ease, transform 0.2s ease;
      z-index: 2;
    }
    .post-body .table-wrapper__expand:hover {
      background: rgba(37, 99, 235, 0.35);
      color: #ffffff;
      transform: translateY(-1px);
      border-color: transparent;
    }
    .table-overlay {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.85);
      backdrop-filter: blur(6px);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      z-index: 999;
    }
    .table-overlay--visible {
      display: flex;
    }
    .table-overlay__content {
      background: var(--bg-card-strong);
      border: 1px solid var(--border);
      border-radius: 24px;
      max-width: min(1080px, 92vw);
      max-height: 85vh;
      width: 100%;
      box-shadow: 0 32px 80px -40px rgba(15, 23, 42, 0.9);
      position: relative;
      overflow: hidden;
    }
    .table-overlay__close {
      position: absolute;
      top: 0.85rem;
      right: 0.85rem;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.35);
      color: var(--text-primary);
      border-radius: 999px;
      padding: 0.4rem 1rem;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s ease, color 0.2s ease;
    }
    .table-overlay__close:hover {
      background: rgba(37, 99, 235, 0.4);
      color: #ffffff;
      border-color: transparent;
    }
    .table-overlay__scroll {
      overflow: auto;
      max-height: 85vh;
      padding: 2.5rem 2rem 2rem;
    }
    .table-overlay__scroll table {
      width: 100%;
      border-collapse: collapse;
      background: transparent;
    }
    .table-overlay__scroll table[data-table-size="medium"] {
      min-width: 720px;
    }
    .table-overlay__scroll table[data-table-size="wide"] {
      min-width: 960px;
    }
    .table-overlay__scroll thead th {
      background: rgba(96, 165, 250, 0.12);
      color: var(--text-primary);
      font-weight: 600;
    }
    .table-overlay__scroll th,
    .table-overlay__scroll td {
      padding: 0.9rem 1rem;
      text-align: left;
      border-bottom: 1px solid rgba(148, 163, 184, 0.18);
      white-space: nowrap;
    }
    .table-overlay__scroll td {
      white-space: normal;
    }
    .table-overlay__scroll tr:last-child td {
      border-bottom: none;
    }
    body[data-theme="light"] .post-body .table-wrapper {
      background: rgba(255, 255, 255, 0.96);
      box-shadow: inset 0 0 0 1px rgba(148, 163, 184, 0.16);
    }
    body[data-theme="light"] .post-body .table-wrapper__expand {
      background: rgba(248, 250, 252, 0.9);
    }
    body[data-theme="light"] .table-overlay {
      background: rgba(15, 23, 42, 0.25);
    }
    body[data-theme="light"] .table-overlay__content {
      background: rgba(255, 255, 255, 0.98);
    }
    body.no-scroll {
      overflow: hidden;
    }
    footer {
      margin-top: 4rem;
      padding: 2rem 0;
      text-align: center;
      color: var(--text-muted);
      font-size: 0.92rem;
      border-top: 1px solid var(--border);
      background: rgba(15, 23, 42, 0.35);
    }
    body[data-theme="light"] footer {
      background: rgba(255, 255, 255, 0.72);
    }
    @media (max-width: 1024px) {
      .site-header__inner {
        padding: 1rem clamp(1.25rem, 4vw, 2rem);
      }
      main.page {
        padding: 2.75rem clamp(1.25rem, 4vw, 2rem) 4rem;
      }
      .post-layout {
        grid-template-columns: minmax(0, 1fr);
      }
      .post-toc {
        position: sticky;
        top: 88px;
        z-index: 6;
        max-height: calc(100vh - 140px);
        margin-bottom: 2rem;
        padding: 1.1rem 1.25rem 1.35rem;
      }
      .post-toc__toggle {
        display: inline-flex;
      }
      .post-toc__content {
        max-height: none;
        margin-top: 0.4rem;
        overflow: visible;
      }
    }
    @media (max-width: 720px) {
      .post-hero {
        padding: 2.1rem 1.65rem;
      }
      .post-body {
        padding: 1.9rem 1.5rem;
      }
      .site-header__inner {
        flex-direction: column;
        align-items: stretch;
        gap: 1rem;
      }
      .site-header__left {
        justify-content: space-between;
      }
      .header-controls {
        align-self: flex-end;
      }
      .post-hero__title {
        font-size: clamp(2rem, 6vw, 2.6rem);
      }
      .post-body .table-wrapper {
        margin: 1.6rem 0;
      }
      .post-body .table-wrapper__expand {
        top: 0.6rem;
        right: 0.6rem;
        font-size: 0.78rem;
        padding: 0.25rem 0.75rem;
      }
      .table-overlay__scroll {
        padding: 1.8rem 1.25rem 1.5rem;
      }
    }
  </style>
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        processEscapes: true,
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      },
    };
  </script>
  <script id="mathjax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
</head>
<body data-theme="dark">
  <header class="site-header">
    <div class="site-header__inner">
      <div class="site-header__left">
        <a class="logo" href="../../../index.html">
          <img src="../../../Assets/Logo.png" alt="Mirko Calcaterra logo" class="logo-img">
          <span class="logo-text">Mirko Calcaterra</span>
        </a>
        <nav class="site-nav">
          <a href="../../../index.html" data-it="Home" data-en="Home">Home</a>
          <a href="../../../blog/index.html" data-it="Blog" data-en="Blog">Blog</a>
        </nav>
      </div>
      <div class="header-controls">
        <button class="lang-btn" type="button">EN</button>
        <button class="theme-toggle" type="button" aria-label="Toggle theme">
          <span class="theme-thumb">‚òÄÔ∏è</span>
        </button>
      </div>
    </div>
  </header>
  <main class="page">
    <article class="post">
      <section class="post-hero">
        <div class="post-hero__icon">üìì</div>
        <span class="post-hero__category">Percorso AI Engineering</span>
        <h1 class="post-hero__title">Data Visualization masterclass - Parte 1</h1>
        <div class="post-hero__meta">
          <span>üìÖ 18 febbraio 2026</span>
          <span>‚è±Ô∏è 20 min</span>
        </div>
      </section>
      <section class="post-layout">
        <aside class="post-toc" data-collapsed="false">
        <div class="post-toc__header">
          <div class="post-toc__title" data-it="Indice" data-en="Table of contents">Indice</div>
          <button class="post-toc__toggle" type="button" aria-expanded="true" aria-label="Nascondi indice">
            <span class="post-toc__toggle-text">Indice</span>
            <span class="post-toc__toggle-icon" aria-hidden="true">‚ñæ</span>
          </button>
        </div>
        <div class="post-toc__content">
          <ul class="post-toc__list">
    <li class="post-toc__item" data-depth="0">
          <a class="post-toc__link" href="#so-what-framework-pyramid-principle-e-i-fondamenti-di-dataviz">
            <span class="post-toc__number">1</span>
            <span class="post-toc__text">&quot;So What?&quot; Framework, Pyramid Principle e i fondamenti di Dataviz</span>
          </a>
          <ul class="post-toc__list post-toc__sublist">
    <li class="post-toc__item" data-depth="1">
          <a class="post-toc__link" href="#struttura-del-notebook">
            <span class="post-toc__number">1.1</span>
            <span class="post-toc__text">Struttura del Notebook</span>
          </a>
          
        </li>
  </ul>
        </li><li class="post-toc__item" data-depth="0">
          <a class="post-toc__link" href="#11-cos-il-pyramid-principle">
            <span class="post-toc__number">2</span>
            <span class="post-toc__text">1.1 Cos&#39;√® il Pyramid Principle?</span>
          </a>
          <ul class="post-toc__list post-toc__sublist">
    <li class="post-toc__item" data-depth="1">
          <a class="post-toc__link" href="#lidea-in-breve">
            <span class="post-toc__number">2.1</span>
            <span class="post-toc__text">L&#39;idea in breve</span>
          </a>
          
        </li><li class="post-toc__item" data-depth="1">
          <a class="post-toc__link" href="#la-struttura-piramidale">
            <span class="post-toc__number">2.2</span>
            <span class="post-toc__text">La struttura piramidale</span>
          </a>
          
        </li><li class="post-toc__item" data-depth="1">
          <a class="post-toc__link" href="#le-3-regole-fondamentali">
            <span class="post-toc__number">2.3</span>
            <span class="post-toc__text">Le 3 regole fondamentali</span>
          </a>
          
        </li>
  </ul>
        </li><li class="post-toc__item" data-depth="0">
          <a class="post-toc__link" href="#12-il-framework-so-what">
            <span class="post-toc__number">3</span>
            <span class="post-toc__text">1.2 Il Framework &quot;So What?&quot;</span>
          </a>
          <ul class="post-toc__list post-toc__sublist">
    <li class="post-toc__item" data-depth="1">
          <a class="post-toc__link" href="#come-funziona">
            <span class="post-toc__number">3.1</span>
            <span class="post-toc__text">Come funziona</span>
          </a>
          
        </li><li class="post-toc__item" data-depth="1">
          <a class="post-toc__link" href="#i-3-livelli-del-so-what">
            <span class="post-toc__number">3.2</span>
            <span class="post-toc__text">I 3 livelli del &quot;So What?&quot;</span>
          </a>
          
        </li><li class="post-toc__item" data-depth="1">
          <a class="post-toc__link" href="#esempio-editoriale-completo">
            <span class="post-toc__number">3.3</span>
            <span class="post-toc__text">Esempio editoriale completo</span>
          </a>
          
        </li>
  </ul>
        </li><li class="post-toc__item" data-depth="0">
          <a class="post-toc__link" href="#13-titoli-descrittivi-vs-titoli-so-what">
            <span class="post-toc__number">4</span>
            <span class="post-toc__text">1.3 Titoli descrittivi vs. titoli &quot;So What?&quot;</span>
          </a>
          
        </li><li class="post-toc__item" data-depth="0">
          <a class="post-toc__link" href="#21-come-lai-cambia-il-workflow-analitico">
            <span class="post-toc__number">5</span>
            <span class="post-toc__text">2.1 Come l&#39;AI cambia il workflow analitico</span>
          </a>
          <ul class="post-toc__list post-toc__sublist">
    <li class="post-toc__item" data-depth="1">
          <a class="post-toc__link" href="#dove-lai-fortissima-e-dove-no">
            <span class="post-toc__number">5.1</span>
            <span class="post-toc__text">Dove l&#39;AI √® fortissima (e dove no)</span>
          </a>
          
        </li><li class="post-toc__item" data-depth="1">
          <a class="post-toc__link" href="#il-prompt-pattern-per-il-so-what">
            <span class="post-toc__number">5.2</span>
            <span class="post-toc__text">Il prompt pattern per il &quot;So What?&quot;</span>
          </a>
          
        </li>
  </ul>
        </li><li class="post-toc__item" data-depth="0">
          <a class="post-toc__link" href="#22-generative-datavis">
            <span class="post-toc__number">6</span>
            <span class="post-toc__text">2.2 Generative Datavis</span>
          </a>
          
        </li><li class="post-toc__item" data-depth="0">
          <a class="post-toc__link" href="#31-installazione-e-import">
            <span class="post-toc__number">7</span>
            <span class="post-toc__text">3.1 Installazione e import</span>
          </a>
          
        </li><li class="post-toc__item" data-depth="0">
          <a class="post-toc__link" href="#32-creazione-dataset-editoriale">
            <span class="post-toc__number">8</span>
            <span class="post-toc__text">3.2 Creazione dataset editoriale</span>
          </a>
          
        </li><li class="post-toc__item" data-depth="0">
          <a class="post-toc__link" href="#41-le-7-propriet-visive-visual-encoding">
            <span class="post-toc__number">9</span>
            <span class="post-toc__text">4.1 Le 7 propriet√† visive (Visual Encoding)</span>
          </a>
          
        </li><li class="post-toc__item" data-depth="0">
          <a class="post-toc__link" href="#42-il-data-ink-ratio-edward-tufte">
            <span class="post-toc__number">10</span>
            <span class="post-toc__text">4.2 Il Data-Ink Ratio (Edward Tufte)</span>
          </a>
          
        </li><li class="post-toc__item" data-depth="0">
          <a class="post-toc__link" href="#51-grafici-di-confronto-50-shades-of-bar-chart">
            <span class="post-toc__number">11</span>
            <span class="post-toc__text">5.1 Grafici di confronto: 50 shades of Bar Chart</span>
          </a>
          <ul class="post-toc__list post-toc__sublist">
    <li class="post-toc__item" data-depth="1">
          <a class="post-toc__link" href="#512-grouped-bar-chart">
            <span class="post-toc__number">11.1</span>
            <span class="post-toc__text">5.1.2 Grouped Bar Chart</span>
          </a>
          
        </li><li class="post-toc__item" data-depth="1">
          <a class="post-toc__link" href="#513-lollipop-chart-il-migliore-data-ink-ratio-del-bar-chart">
            <span class="post-toc__number">11.2</span>
            <span class="post-toc__text">5.1.3 Lollipop Chart: il migliore data-ink ratio del bar chart</span>
          </a>
          
        </li>
  </ul>
        </li><li class="post-toc__item" data-depth="0">
          <a class="post-toc__link" href="#52-grafici-di-distribuzione">
            <span class="post-toc__number">12</span>
            <span class="post-toc__text">5.2 Grafici di Distribuzione</span>
          </a>
          <ul class="post-toc__list post-toc__sublist">
    <li class="post-toc__item" data-depth="1">
          <a class="post-toc__link" href="#521-istogramma-attenzione-al-numero-di-bin">
            <span class="post-toc__number">12.1</span>
            <span class="post-toc__text">5.2.1 Istogramma: attenzione al numero di bin!</span>
          </a>
          
        </li><li class="post-toc__item" data-depth="1">
          <a class="post-toc__link" href="#522-box-plot-5-statistiche-in-un-colpo">
            <span class="post-toc__number">12.2</span>
            <span class="post-toc__text">5.2.2 Box Plot: 5 statistiche in un colpo</span>
          </a>
          
        </li><li class="post-toc__item" data-depth="1">
          <a class="post-toc__link" href="#523-violin-plot">
            <span class="post-toc__number">12.3</span>
            <span class="post-toc__text">5.2.3 Violin Plot</span>
          </a>
          <ul class="post-toc__list post-toc__sublist">
    <li class="post-toc__item" data-depth="2">
          <a class="post-toc__link" href="#perch-la-scala-log10">
            <span class="post-toc__number">12.3.1</span>
            <span class="post-toc__text">Perch√© la scala log10?</span>
          </a>
          
        </li>
  </ul>
        </li><li class="post-toc__item" data-depth="1">
          <a class="post-toc__link" href="#524-kde-plot">
            <span class="post-toc__number">12.4</span>
            <span class="post-toc__text">5.2.4 KDE Plot</span>
          </a>
          
        </li>
  </ul>
        </li><li class="post-toc__item" data-depth="0">
          <a class="post-toc__link" href="#53-grafici-di-relazione">
            <span class="post-toc__number">13</span>
            <span class="post-toc__text">5.3 Grafici di Relazione</span>
          </a>
          <ul class="post-toc__list post-toc__sublist">
    <li class="post-toc__item" data-depth="1">
          <a class="post-toc__link" href="#531-scatter-plot">
            <span class="post-toc__number">13.1</span>
            <span class="post-toc__text">5.3.1 Scatter Plot</span>
          </a>
          
        </li><li class="post-toc__item" data-depth="1">
          <a class="post-toc__link" href="#532-heatmap-stagionalita-per-genere">
            <span class="post-toc__number">13.2</span>
            <span class="post-toc__text">5.3.2 Heatmap: Stagionalita per genere</span>
          </a>
          
        </li><li class="post-toc__item" data-depth="1">
          <a class="post-toc__link" href="#533-matrice-di-correlazione">
            <span class="post-toc__number">13.3</span>
            <span class="post-toc__text">5.3.3 Matrice di correlazione</span>
          </a>
          
        </li>
  </ul>
        </li><li class="post-toc__item" data-depth="0">
          <a class="post-toc__link" href="#54-grafici-di-composizione">
            <span class="post-toc__number">14</span>
            <span class="post-toc__text">5.4 Grafici di composizione</span>
          </a>
          <ul class="post-toc__list post-toc__sublist">
    <li class="post-toc__item" data-depth="1">
          <a class="post-toc__link" href="#541-stacked-bar-100">
            <span class="post-toc__number">14.1</span>
            <span class="post-toc__text">5.4.1 Stacked Bar 100%</span>
          </a>
          
        </li><li class="post-toc__item" data-depth="1">
          <a class="post-toc__link" href="#542-treemap-plotly-interattivo">
            <span class="post-toc__number">14.2</span>
            <span class="post-toc__text">5.4.2 Treemap (Plotly interattivo)</span>
          </a>
          
        </li><li class="post-toc__item" data-depth="1">
          <a class="post-toc__link" href="#nota-sul-pie-chart">
            <span class="post-toc__number">14.3</span>
            <span class="post-toc__text">Nota sul Pie Chart</span>
          </a>
          
        </li>
  </ul>
        </li><li class="post-toc__item" data-depth="0">
          <a class="post-toc__link" href="#55-grafici-temporali">
            <span class="post-toc__number">15</span>
            <span class="post-toc__text">5.5 Grafici temporali</span>
          </a>
          <ul class="post-toc__list post-toc__sublist">
    <li class="post-toc__item" data-depth="1">
          <a class="post-toc__link" href="#551-line-chart">
            <span class="post-toc__number">15.1</span>
            <span class="post-toc__text">5.5.1 Line Chart</span>
          </a>
          
        </li><li class="post-toc__item" data-depth="1">
          <a class="post-toc__link" href="#552-stacked-area-chart">
            <span class="post-toc__number">15.2</span>
            <span class="post-toc__text">5.5.2 Stacked Area Chart</span>
          </a>
          
        </li>
  </ul>
        </li><li class="post-toc__item" data-depth="0">
          <a class="post-toc__link" href="#61-il-potere-delle-annotazioni">
            <span class="post-toc__number">16</span>
            <span class="post-toc__text">6.1 Il potere delle annotazioni</span>
          </a>
          
        </li><li class="post-toc__item" data-depth="0">
          <a class="post-toc__link" href="#62-il-colore-nella-data-visualization">
            <span class="post-toc__number">17</span>
            <span class="post-toc__text">6.2 Il colore nella Data Visualization</span>
          </a>
          
        </li><li class="post-toc__item" data-depth="0">
          <a class="post-toc__link" href="#63-small-multiples">
            <span class="post-toc__number">18</span>
            <span class="post-toc__text">6.3 Small Multiples</span>
          </a>
          
        </li><li class="post-toc__item" data-depth="0">
          <a class="post-toc__link" href="#64-grafici-interattivi-con-plotly">
            <span class="post-toc__number">19</span>
            <span class="post-toc__text">6.4 Grafici interattivi con Plotly</span>
          </a>
          
        </li><li class="post-toc__item" data-depth="0">
          <a class="post-toc__link" href="#scenario">
            <span class="post-toc__number">20</span>
            <span class="post-toc__text">Scenario</span>
          </a>
          
        </li><li class="post-toc__item" data-depth="0">
          <a class="post-toc__link" href="#cosa-abbiamo-imparato">
            <span class="post-toc__number">21</span>
            <span class="post-toc__text">Cosa abbiamo imparato</span>
          </a>
          
        </li><li class="post-toc__item" data-depth="0">
          <a class="post-toc__link" href="#checklist-prima-di-ogni-presentazione">
            <span class="post-toc__number">22</span>
            <span class="post-toc__text">Checklist prima di ogni presentazione</span>
          </a>
          
        </li><li class="post-toc__item" data-depth="0">
          <a class="post-toc__link" href="#nel-prossimo-notebook-parte-2">
            <span class="post-toc__number">23</span>
            <span class="post-toc__text">Nel prossimo notebook (Parte 2)</span>
          </a>
          
        </li>
  </ul>
        </div>
      </aside>
        <div class="post-body">
          <h2 id="so-what-framework-pyramid-principle-e-i-fondamenti-di-dataviz">&quot;So What?&quot; Framework, Pyramid Principle e i fondamenti di Dataviz</h2>
<p><strong>Contesto:</strong> Questo notebook didattico √® stato progettato per la lezione di Data Analysis avanzato per Mondadori (Marzo 2026).
<strong>Dataset:</strong> I dati sono stati simulati, ispirandosi al mondo dell&#39;editoria (catalogo libri, vendite, performance)<br><strong>Strumenti:</strong> Python ¬∑ Pandas ¬∑ Matplotlib ¬∑ Seaborn ¬∑ Plotly</p>
<h3 id="struttura-del-notebook">Struttura del Notebook</h3>
<figure class="table-wrapper" data-enhanced-table><div class="table-wrapper__scroll"><table>
<thead>
<tr>
<th>Parte</th>
<th>Contenuto</th>
</tr>
</thead>
<tbody><tr>
<td><strong>1</strong></td>
<td>Il Pyramid Principle di Barbara Minto e il framework &quot;So What?&quot;</td>
</tr>
<tr>
<td><strong>2</strong></td>
<td>Come l&#39;AI si integra nel processo di analisi e storytelling</td>
</tr>
<tr>
<td><strong>3</strong></td>
<td>Setup: dataset editoriale simulato</td>
</tr>
<tr>
<td><strong>4</strong></td>
<td>Grammatica visuale: i mattoni della data visualization</td>
</tr>
<tr>
<td><strong>5</strong></td>
<td>Il &quot;catalogo&quot; dei grafici fondamentali</td>
</tr>
<tr>
<td><strong>6</strong></td>
<td>Tecniche di base: colore, annotazioni, layout</td>
</tr>
<tr>
<td><strong>7</strong></td>
<td>Esercizio guidato: dal dato all&#39;insight con il Pyramid Principle</td>
</tr>
</tbody></table>
</div></figure><blockquote>
<p><strong>Nota:</strong> Nella <strong>Parte 2</strong> (prossimo notebook) vedremo <em>quando</em> scegliere quale grafico in base all&#39;obiettivo comunicativo e le tecniche di trasformazione dei dati.</p>
</blockquote>
<hr>
<h1 id="parte-1-il-pyramid-principle-e-il-framework-so-what">Parte 1: Il Pyramid Principle e il framework &quot;So What?&quot;</h1>
<h2 id="11-cos-il-pyramid-principle">1.1 Cos&#39;√® il Pyramid Principle?</h2>
<p>Il <strong>Pyramid Principle</strong> √® un framework di comunicazione sviluppato da <strong>Barbara Minto</strong> negli anni &#39;70 durante il suo lavoro in McKinsey. √à il metodo standard usato nelle migliori societ√† di consulenza per strutturare qualsiasi tipo di comunicazione analitica.</p>
<h3 id="lidea-in-breve">L&#39;idea in breve</h3>
<blockquote>
<p><strong>Ogni comunicazione efficace parte dalla conclusione, non dai dati.</strong></p>
</blockquote>
<p>La maggior parte delle persone comunica in modo <strong>bottom-up</strong>: parte dai dati, costruisce l&#39;analisi e solo alla fine arriva alla conclusione. Il Pyramid Principle ribalta questo approccio:</p>
<pre><code class="hljs language-mathematica">‚ùå <span class="hljs-built_in">Bottom</span><span class="hljs-operator">-</span><span class="hljs-variable">up</span> <span class="hljs-punctuation">(</span><span class="hljs-variable">come</span> <span class="hljs-variable">pensiamo</span> <span class="hljs-variable">naturalmente</span><span class="hljs-punctuation">)</span><span class="hljs-operator">:</span>
   <span class="hljs-variable">Dato</span> ‚Üí <span class="hljs-variable">Dato</span> ‚Üí <span class="hljs-variable">Dato</span> ‚Üí <span class="hljs-variable">Analisi</span> ‚Üí <span class="hljs-variable">Conclusione</span>

‚úÖ <span class="hljs-built_in">Top</span><span class="hljs-operator">-</span><span class="hljs-variable">down</span> <span class="hljs-punctuation">(</span><span class="hljs-variable">come</span> <span class="hljs-variable">dovremmo</span> <span class="hljs-variable">comunicare</span><span class="hljs-punctuation">)</span><span class="hljs-operator">:</span>
   <span class="hljs-variable">Conclusione</span> ‚Üí <span class="hljs-variable">Argomento</span> <span class="hljs-number">1</span> ‚Üí <span class="hljs-variable">Argomento</span> <span class="hljs-number">2</span> ‚Üí <span class="hljs-variable">Argomento</span> <span class="hljs-number">3</span>
                      ‚Üì              ‚Üì              ‚Üì
                   <span class="hljs-variable">Evidenze</span>       <span class="hljs-variable">Evidenze</span>       <span class="hljs-variable">Evidenze</span></code></pre><h3 id="la-struttura-piramidale">La struttura piramidale</h3>
<pre><code class="hljs language-tap">                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ   MESSAGGIO     ‚îÇ  ‚Üê La risposta / raccomandazione
                    ‚îÇ   PRINCIPALE    ‚îÇ     (una frase sola)
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ              ‚îÇ              ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ Argomento ‚îÇ  ‚îÇ Argomento ‚îÇ  ‚îÇ Argomento ‚îÇ  ‚Üê Ragioni chiave
        ‚îÇ    <span class="hljs-number"> 1 </span>    ‚îÇ  ‚îÇ    <span class="hljs-number"> 2 </span>    ‚îÇ  ‚îÇ    <span class="hljs-number"> 3 </span>    ‚îÇ     (MECE)
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ              ‚îÇ              ‚îÇ
          Evidenze       Evidenze       Evidenze     ‚Üê Dati, grafici, fatti</code></pre><h3 id="le-3-regole-fondamentali">Le 3 regole fondamentali</h3>
<ol>
<li><p><strong>Inizia dalla risposta</strong> ‚Äî Il messaggio principale va in cima.</p>
</li>
<li><p><strong>Raggruppa in modo MECE</strong> ‚Äî <strong>M</strong>utually <strong>E</strong>xclusive, <strong>C</strong>ollectively <strong>E</strong>xhaustive: gli argomenti non si sovrappongono e, insieme, coprono tutto.</p>
</li>
<li><p><strong>Ordina logicamente</strong> ‚Äî Per tempo, struttura, o importanza (vedi tu üòá).</p>
</li>
</ol>
<h2 id="12-il-framework-so-what">1.2 Il Framework &quot;So What?&quot;</h2>
<p>Il test &quot;So What?&quot; √® il meccanismo di qualit√† del Pyramid Principle. Si applica ad ogni singolo elemento dell&#39;analisi, in particolare ai grafici.</p>
<h3 id="come-funziona">Come funziona</h3>
<pre><code class="hljs language-smalltalk">üìä <span class="hljs-comment">&quot;Le vendite del genere thriller sono cresciute del 23% nel Q3&quot;</span>
   ‚îî‚îÄ <span class="hljs-type">So</span> what?
      <span class="hljs-comment">&quot;Il thriller sta sovraperformando rispetto a tutti gli altri generi&quot;</span>
      ‚îî‚îÄ <span class="hljs-type">So</span> what?
         <span class="hljs-comment">&quot;Dovremmo riallocare il budget editoriale: +30% thriller, -15% poesia&quot;</span>
         ‚îî‚îÄ <span class="hljs-type">So</span> what?
            <span class="hljs-comment">&quot;Raccomandazione: Presentare al comitato editoriale il piano di
             riallocazione per il Q1, con 3 nuovi titoli thriller in pipeline&quot;</span></code></pre><h3 id="i-3-livelli-del-so-what">I 3 livelli del &quot;So What?&quot;</h3>
<figure class="table-wrapper" data-enhanced-table><div class="table-wrapper__scroll"><table>
<thead>
<tr>
<th>Livello</th>
<th>Domanda</th>
<th>Output</th>
</tr>
</thead>
<tbody><tr>
<td><strong>L1 ‚Äî Osservazione</strong></td>
<td><em>Cosa vedo?</em></td>
<td>Descrizione del pattern</td>
</tr>
<tr>
<td><strong>L2 ‚Äî Insight</strong></td>
<td><em>Perch√© √® importante?</em></td>
<td>Interpretazione business</td>
</tr>
<tr>
<td><strong>L3 ‚Äî Azione</strong></td>
<td><em>Cosa facciamo?</em></td>
<td>Raccomandazione concreta</td>
</tr>
</tbody></table>
</div></figure><h3 id="esempio-editoriale-completo">Esempio editoriale completo</h3>
<pre><code class="hljs language-nestedtext"><span class="hljs-attribute">MESSAGGIO PRINCIPALE</span><span class="hljs-punctuation">:</span>
<span class="hljs-attribute">&quot;Il catalogo deve essere riequilibrato</span><span class="hljs-punctuation">:</span> <span class="hljs-string">il 60% dei ricavi</span>
<span class="hljs-attribute">viene dal 15% dei titoli, e i generi in crescita sono sotto-rappresentati.&quot;

‚îú‚îÄ‚îÄ ARG 1</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Concentrazione eccessiva dei ricavi</span>
<span class="hljs-attribute">‚îÇ   ‚îú‚îÄ‚îÄ Grafico</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Curva di Pareto titoli vs ricavi</span>
<span class="hljs-attribute">‚îÇ   ‚îî‚îÄ‚îÄ So What</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Rischio elevato se 2-3 bestseller sottoperformano</span>
<span class="hljs-attribute">‚îÇ
‚îú‚îÄ‚îÄ ARG 2</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Mismatch tra catalogo e domanda</span>
<span class="hljs-attribute">‚îÇ   ‚îú‚îÄ‚îÄ Grafico</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Crescita generi vs % catalogo</span>
<span class="hljs-attribute">‚îÇ   ‚îî‚îÄ‚îÄ So What</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Opportunit√† persa stimata ‚Ç¨2.4M/anno</span>
<span class="hljs-attribute">‚îÇ
‚îî‚îÄ‚îÄ ARG 3</span><span class="hljs-punctuation">:</span> <span class="hljs-string">I competitor si stanno muovendo</span>
    <span class="hljs-attribute">‚îú‚îÄ‚îÄ Grafico</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Quote di mercato per genere (YoY)</span>
    <span class="hljs-attribute">‚îî‚îÄ‚îÄ So What</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Finestra di opportunit√† si sta chiudendo</span></code></pre><h2 id="13-titoli-descrittivi-vs-titoli-so-what">1.3 Titoli descrittivi vs. titoli &quot;So What?&quot;</h2>
<figure class="table-wrapper" data-enhanced-table><div class="table-wrapper__scroll"><table>
<thead>
<tr>
<th>‚ùå Descrittivo</th>
<th>‚úÖ &quot;So What?&quot;</th>
</tr>
</thead>
<tbody><tr>
<td>Vendite mensili 2024</td>
<td>Le vendite sono in calo del 12% dal Q2: serve un intervento</td>
</tr>
<tr>
<td>Distribuzione per genere</td>
<td>Il 70% del catalogo √® in generi in contrazione</td>
</tr>
<tr>
<td>Confronto autori</td>
<td>I top 5 autori generano pi√π ricavi dei restanti 200 combinati</td>
</tr>
<tr>
<td>Andamento trimestrale</td>
<td>Q3 √® il trimestre critico: ogni anno perdiamo il 18%</td>
</tr>
</tbody></table>
</div></figure><blockquote>
<p><strong>Regola d&#39;oro:</strong> Se il titolo del vostro grafico potrebbe essere il titolo di <em>qualsiasi</em> grafico sullo stesso topic, non √® un buon titolo. Un buon titolo contiene gi√† l&#39;insight.</p>
</blockquote>
<hr>
<h1 id="parte-2-ai-come-acceleratore-del-so-what">Parte 2: AI come acceleratore del &quot;So What?&quot;</h1>
<h2 id="21-come-lai-cambia-il-workflow-analitico">2.1 Come l&#39;AI cambia il workflow analitico</h2>
<pre><code class="hljs language-nestedtext"><span class="hljs-attribute">TRADIZIONALE (ore/giorni)</span><span class="hljs-punctuation">:</span>
<span class="hljs-attribute">Dati grezzi ‚Üí Pulizia ‚Üí Esplorazione ‚Üí Grafici ‚Üí Pattern ‚Üí Insight ‚Üí Slide

AI-AUGMENTED (minuti/ore)</span><span class="hljs-punctuation">:</span>
<span class="hljs-attribute">Dati grezzi ‚Üí AI</span><span class="hljs-punctuation">:</span> <span class="hljs-string">pulizia + EDA ‚Üí Human: validazione ‚Üí AI: grafici + draft insight</span>
                                       <span class="hljs-attribute">‚Üì
                              Human</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;So What?&quot; test</span>
                                       <span class="hljs-attribute">‚Üì
                              AI</span><span class="hljs-punctuation">:</span> <span class="hljs-string">raffinamento + presentazione</span></code></pre><h3 id="dove-lai-fortissima-e-dove-no">Dove l&#39;AI √® fortissima (e dove no)</h3>
<figure class="table-wrapper" data-enhanced-table><div class="table-wrapper__scroll"><table>
<thead>
<tr>
<th>Task</th>
<th>AI √® brava?</th>
<th>Note</th>
</tr>
</thead>
<tbody><tr>
<td>Generare codice per grafici</td>
<td>‚úÖ‚úÖ‚úÖ</td>
<td>Descrivile cosa vuoi, genera il codice</td>
</tr>
<tr>
<td>Esplorare pattern nei dati</td>
<td>‚úÖ‚úÖ</td>
<td>Buona per EDA iniziale</td>
</tr>
<tr>
<td>Suggerire &quot;So What?&quot; L1 (osservazione)</td>
<td>‚úÖ‚úÖ</td>
<td>Descrive bene i pattern</td>
</tr>
<tr>
<td>Suggerire &quot;So What?&quot; L2 (insight)</td>
<td>‚úÖ</td>
<td>Necessita contesto di dominio</td>
</tr>
<tr>
<td>Suggerire &quot;So What?&quot; L3 (azione)</td>
<td>‚ö†Ô∏è</td>
<td>Richiede sempre validazione umana</td>
</tr>
<tr>
<td>Conoscenza del contesto aziendale</td>
<td>‚ùå</td>
<td>Qui serve il data scientist</td>
</tr>
</tbody></table>
</div></figure><h3 id="il-prompt-pattern-per-il-so-what">Il prompt pattern per il &quot;So What?&quot;</h3>
<pre><code class="hljs language-yaml"><span class="hljs-attr">CONTESTO:</span> [<span class="hljs-string">Descrivi</span> <span class="hljs-string">il</span> <span class="hljs-string">contesto</span> <span class="hljs-string">business</span>]
<span class="hljs-attr">DATO/GRAFICO:</span> [<span class="hljs-string">Descrivi</span> <span class="hljs-string">cosa</span> <span class="hljs-string">mostra</span>]
<span class="hljs-attr">DOMANDA:</span> <span class="hljs-string">Applica</span> <span class="hljs-string">il</span> <span class="hljs-string">framework</span> <span class="hljs-string">&quot;So What?&quot;</span> <span class="hljs-attr">a 3 livelli:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">L1:</span> <span class="hljs-string">Cosa</span> <span class="hljs-string">osserviamo?</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">L2:</span> <span class="hljs-string">Perch√©</span> <span class="hljs-string">√®</span> <span class="hljs-string">importante</span> <span class="hljs-string">per</span> [<span class="hljs-string">stakeholder</span> <span class="hljs-string">specifico</span>]<span class="hljs-string">?</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">L3:</span> <span class="hljs-string">Quale</span> <span class="hljs-string">azione</span> <span class="hljs-string">concreta</span> <span class="hljs-string">raccomandiamo?</span></code></pre><h2 id="22-generative-datavis">2.2 Generative Datavis</h2>
<blockquote>
<p><strong>Pro tip:</strong> Quando chiedete all&#39;AI di generare un grafico, <strong>non dite solo &quot;fammi un bar chart&quot;</strong>. Dite <strong>&quot;generami il codice per creare un grafico che mostri che il thriller sta dominando le vendite&quot;</strong>. Partite dal messaggio, non dal tipo di grafico.</p>
</blockquote>
<hr>
<h1 id="parte-3-setup-e-creazione-dataset-editoriale">Parte 3: Setup e creazione dataset editoriale</h1>
<h2 id="31-installazione-e-import">3.1 Installazione e import</h2>
<pre><code class="hljs language-python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> matplotlib.ticker <span class="hljs-keyword">as</span> mticker
<span class="hljs-keyword">import</span> matplotlib.dates <span class="hljs-keyword">as</span> mdates
<span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime, timedelta
<span class="hljs-keyword">import</span> warnings
warnings.filterwarnings(<span class="hljs-string">&#x27;ignore&#x27;</span>)

<span class="hljs-keyword">import</span> plotly.express <span class="hljs-keyword">as</span> px
<span class="hljs-keyword">import</span> plotly.graph_objects <span class="hljs-keyword">as</span> go
<span class="hljs-keyword">from</span> plotly.subplots <span class="hljs-keyword">import</span> make_subplots

plt.rcParams[<span class="hljs-string">&#x27;figure.figsize&#x27;</span>] = (<span class="hljs-number">12</span>, <span class="hljs-number">6</span>)
plt.rcParams[<span class="hljs-string">&#x27;figure.dpi&#x27;</span>] = <span class="hljs-number">100</span>
plt.rcParams[<span class="hljs-string">&#x27;font.family&#x27;</span>] = <span class="hljs-string">&#x27;sans-serif&#x27;</span>
plt.rcParams[<span class="hljs-string">&#x27;axes.spines.top&#x27;</span>] = <span class="hljs-literal">False</span>
plt.rcParams[<span class="hljs-string">&#x27;axes.spines.right&#x27;</span>] = <span class="hljs-literal">False</span>
sns.set_palette(<span class="hljs-string">&quot;husl&quot;</span>)
np.random.seed(<span class="hljs-number">42</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Setup completato!&quot;</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   Pandas: <span class="hljs-subst">{pd.__version__}</span>&quot;</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   NumPy: <span class="hljs-subst">{np.__version__}</span>&quot;</span>)</code></pre><pre><code class="hljs language-text">Setup completato!
   Pandas: 2.2.2
   NumPy: 2.0.2</code></pre><h2 id="32-creazione-dataset-editoriale">3.2 Creazione dataset editoriale</h2>
<p>Creiamo un dataset realistico ispirato al mondo dell&#39;editoria. Il dataset simula il catalogo e le vendite di una casa editrice con diverse collane, generi e autori.</p>
<blockquote>
<p><strong>Perch√© simuliamo?</strong> I dati simulati ci permettono di controllare i pattern e garantire che ogni tipo di grafico abbia qualcosa di interessante da mostrare.</p>
</blockquote>
<pre><code class="hljs language-python"><span class="hljs-comment"># ============================================================</span>
<span class="hljs-comment"># DATASET ‚Äî Simulazione dati editoriali</span>
<span class="hljs-comment"># ============================================================</span>

GENERI = [<span class="hljs-string">&#x27;Narrativa&#x27;</span>, <span class="hljs-string">&#x27;Thriller&#x27;</span>, <span class="hljs-string">&#x27;Saggistica&#x27;</span>, <span class="hljs-string">&#x27;Fantasy&#x27;</span>, <span class="hljs-string">&#x27;Romance&#x27;</span>,
          <span class="hljs-string">&#x27;Storico&#x27;</span>, <span class="hljs-string">&#x27;Sci-Fi&#x27;</span>, <span class="hljs-string">&#x27;Poesia&#x27;</span>, <span class="hljs-string">&#x27;Bambini&#x27;</span>, <span class="hljs-string">&#x27;Young Adult&#x27;</span>]
COLLANE = [<span class="hljs-string">&#x27;Oscar Mondadori&#x27;</span>, <span class="hljs-string">&#x27;Strade Blu&#x27;</span>, <span class="hljs-string">&#x27;Contemporanea&#x27;</span>, <span class="hljs-string">&#x27;Chrysalide&#x27;</span>,
           <span class="hljs-string">&#x27;Omnibus&#x27;</span>, <span class="hljs-string">&#x27;Piccoli Brividi&#x27;</span>, <span class="hljs-string">&#x27;Classici Moderni&#x27;</span>, <span class="hljs-string">&#x27;Voci&#x27;</span>]
FORMATI = [<span class="hljs-string">&#x27;Cartaceo&#x27;</span>, <span class="hljs-string">&#x27;Ebook&#x27;</span>, <span class="hljs-string">&#x27;Audiolibro&#x27;</span>]
CANALI = [<span class="hljs-string">&#x27;Libreria fisica&#x27;</span>, <span class="hljs-string">&#x27;Amazon&#x27;</span>, <span class="hljs-string">&#x27;E-commerce proprio&#x27;</span>, <span class="hljs-string">&#x27;GDO&#x27;</span>, <span class="hljs-string">&#x27;Fiere/Eventi&#x27;</span>]
GENERE_WEIGHTS = {
    <span class="hljs-string">&#x27;Narrativa&#x27;</span>: <span class="hljs-number">0.22</span>, <span class="hljs-string">&#x27;Thriller&#x27;</span>: <span class="hljs-number">0.18</span>, <span class="hljs-string">&#x27;Saggistica&#x27;</span>: <span class="hljs-number">0.15</span>,
    <span class="hljs-string">&#x27;Fantasy&#x27;</span>: <span class="hljs-number">0.10</span>, <span class="hljs-string">&#x27;Romance&#x27;</span>: <span class="hljs-number">0.09</span>, <span class="hljs-string">&#x27;Storico&#x27;</span>: <span class="hljs-number">0.08</span>,
    <span class="hljs-string">&#x27;Sci-Fi&#x27;</span>: <span class="hljs-number">0.06</span>, <span class="hljs-string">&#x27;Poesia&#x27;</span>: <span class="hljs-number">0.02</span>, <span class="hljs-string">&#x27;Bambini&#x27;</span>: <span class="hljs-number">0.05</span>, <span class="hljs-string">&#x27;Young Adult&#x27;</span>: <span class="hljs-number">0.05</span>}

n_libri = <span class="hljs-number">500</span>; n_mesi = <span class="hljs-number">24</span>

libri = pd.DataFrame({
    <span class="hljs-string">&#x27;libro_id&#x27;</span>: <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n_libri + <span class="hljs-number">1</span>),
    <span class="hljs-string">&#x27;titolo&#x27;</span>: [<span class="hljs-string">f&quot;Titolo_<span class="hljs-subst">{i:03d}</span>&quot;</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n_libri + <span class="hljs-number">1</span>)],
    <span class="hljs-string">&#x27;genere&#x27;</span>: np.random.choice(<span class="hljs-built_in">list</span>(GENERE_WEIGHTS.keys()), n_libri, p=<span class="hljs-built_in">list</span>(GENERE_WEIGHTS.values())),
    <span class="hljs-string">&#x27;collana&#x27;</span>: np.random.choice(COLLANE, n_libri),
    <span class="hljs-string">&#x27;anno_pubblicazione&#x27;</span>: np.random.choice(<span class="hljs-built_in">range</span>(<span class="hljs-number">2018</span>, <span class="hljs-number">2025</span>), n_libri, p=[<span class="hljs-number">.05</span>,<span class="hljs-number">.05</span>,<span class="hljs-number">.08</span>,<span class="hljs-number">.10</span>,<span class="hljs-number">.15</span>,<span class="hljs-number">.25</span>,<span class="hljs-number">.32</span>]),
    <span class="hljs-string">&#x27;pagine&#x27;</span>: np.random.normal(<span class="hljs-number">280</span>, <span class="hljs-number">80</span>, n_libri).astype(<span class="hljs-built_in">int</span>).clip(<span class="hljs-number">80</span>, <span class="hljs-number">800</span>),
    <span class="hljs-string">&#x27;prezzo_copertina&#x27;</span>: np.<span class="hljs-built_in">round</span>(np.random.uniform(<span class="hljs-number">9.90</span>, <span class="hljs-number">24.90</span>, n_libri), <span class="hljs-number">2</span>),
    <span class="hljs-string">&#x27;rating_goodreads&#x27;</span>: np.<span class="hljs-built_in">round</span>(np.random.normal(<span class="hljs-number">3.7</span>, <span class="hljs-number">0.5</span>, n_libri).clip(<span class="hljs-number">1.5</span>, <span class="hljs-number">5.0</span>), <span class="hljs-number">1</span>),
    <span class="hljs-string">&#x27;n_recensioni&#x27;</span>: np.random.exponential(<span class="hljs-number">150</span>, n_libri).astype(<span class="hljs-built_in">int</span>).clip(<span class="hljs-number">5</span>, <span class="hljs-number">5000</span>)})

libri.loc[libri[<span class="hljs-string">&#x27;genere&#x27;</span>] == <span class="hljs-string">&#x27;Thriller&#x27;</span>, <span class="hljs-string">&#x27;prezzo_copertina&#x27;</span>] *= <span class="hljs-number">1.1</span>
libri.loc[libri[<span class="hljs-string">&#x27;genere&#x27;</span>] == <span class="hljs-string">&#x27;Narrativa&#x27;</span>, <span class="hljs-string">&#x27;prezzo_copertina&#x27;</span>] *= <span class="hljs-number">1.05</span>
libri.loc[libri[<span class="hljs-string">&#x27;genere&#x27;</span>] == <span class="hljs-string">&#x27;Poesia&#x27;</span>, <span class="hljs-string">&#x27;prezzo_copertina&#x27;</span>] *= <span class="hljs-number">0.8</span>
libri[<span class="hljs-string">&#x27;prezzo_copertina&#x27;</span>] = libri[<span class="hljs-string">&#x27;prezzo_copertina&#x27;</span>].<span class="hljs-built_in">round</span>(<span class="hljs-number">2</span>)

date_range = pd.date_range(<span class="hljs-string">&#x27;2023-01-01&#x27;</span>, periods=n_mesi, freq=<span class="hljs-string">&#x27;MS&#x27;</span>)
vendite_records = []
<span class="hljs-keyword">for</span> _, libro <span class="hljs-keyword">in</span> libri.iterrows():
    base = {<span class="hljs-string">&#x27;Narrativa&#x27;</span>:<span class="hljs-number">120</span>,<span class="hljs-string">&#x27;Thriller&#x27;</span>:<span class="hljs-number">150</span>,<span class="hljs-string">&#x27;Saggistica&#x27;</span>:<span class="hljs-number">80</span>,<span class="hljs-string">&#x27;Fantasy&#x27;</span>:<span class="hljs-number">90</span>,<span class="hljs-string">&#x27;Romance&#x27;</span>:<span class="hljs-number">70</span>,
            <span class="hljs-string">&#x27;Storico&#x27;</span>:<span class="hljs-number">50</span>,<span class="hljs-string">&#x27;Sci-Fi&#x27;</span>:<span class="hljs-number">45</span>,<span class="hljs-string">&#x27;Poesia&#x27;</span>:<span class="hljs-number">15</span>,<span class="hljs-string">&#x27;Bambini&#x27;</span>:<span class="hljs-number">60</span>,<span class="hljs-string">&#x27;Young Adult&#x27;</span>:<span class="hljs-number">55</span>}[libro[<span class="hljs-string">&#x27;genere&#x27;</span>]]
    libro_mult = np.random.lognormal(<span class="hljs-number">0</span>, <span class="hljs-number">0.8</span>)
    <span class="hljs-keyword">for</span> i, data <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(date_range):
        m = data.month
        stag = {<span class="hljs-number">12</span>:<span class="hljs-number">1.8</span>, <span class="hljs-number">11</span>:<span class="hljs-number">1.3</span>, <span class="hljs-number">6</span>:<span class="hljs-number">1.2</span>, <span class="hljs-number">7</span>:<span class="hljs-number">1.2</span>, <span class="hljs-number">1</span>:<span class="hljs-number">0.7</span>, <span class="hljs-number">2</span>:<span class="hljs-number">0.7</span>}.get(m, <span class="hljs-number">1.0</span>)
        trend = {<span class="hljs-string">&#x27;Thriller&#x27;</span>:<span class="hljs-number">1</span>+i*<span class="hljs-number">0.015</span>,<span class="hljs-string">&#x27;Fantasy&#x27;</span>:<span class="hljs-number">1</span>+i*<span class="hljs-number">0.01</span>,<span class="hljs-string">&#x27;Young Adult&#x27;</span>:<span class="hljs-number">1</span>+i*<span class="hljs-number">0.012</span>,
                 <span class="hljs-string">&#x27;Poesia&#x27;</span>:<span class="hljs-number">1</span>-i*<span class="hljs-number">0.008</span>,<span class="hljs-string">&#x27;Saggistica&#x27;</span>:<span class="hljs-number">1</span>-i*<span class="hljs-number">0.003</span>}.get(libro[<span class="hljs-string">&#x27;genere&#x27;</span>], <span class="hljs-number">1.0</span>)
        <span class="hljs-keyword">for</span> fmt <span class="hljs-keyword">in</span> FORMATI:
            fs = {<span class="hljs-string">&#x27;Cartaceo&#x27;</span>:<span class="hljs-number">0.55</span>,<span class="hljs-string">&#x27;Ebook&#x27;</span>:<span class="hljs-number">0.30</span>,<span class="hljs-string">&#x27;Audiolibro&#x27;</span>:<span class="hljs-number">0.15</span>}[fmt]
            <span class="hljs-keyword">if</span> fmt==<span class="hljs-string">&#x27;Ebook&#x27;</span>: fs *= (<span class="hljs-number">1</span>+i*<span class="hljs-number">0.005</span>)
            <span class="hljs-keyword">if</span> fmt==<span class="hljs-string">&#x27;Audiolibro&#x27;</span>: fs *= (<span class="hljs-number">1</span>+i*<span class="hljs-number">0.02</span>)
            copie = <span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">int</span>(base*libro_mult*stag*trend*fs*np.random.lognormal(<span class="hljs-number">0</span>,<span class="hljs-number">0.3</span>)))
            <span class="hljs-keyword">if</span> copie &gt; <span class="hljs-number">0</span>:
                vendite_records.append({<span class="hljs-string">&#x27;libro_id&#x27;</span>:libro[<span class="hljs-string">&#x27;libro_id&#x27;</span>],<span class="hljs-string">&#x27;data&#x27;</span>:data,<span class="hljs-string">&#x27;formato&#x27;</span>:fmt,
                    <span class="hljs-string">&#x27;canale&#x27;</span>:np.random.choice(CANALI,p=[<span class="hljs-number">.30</span>,<span class="hljs-number">.35</span>,<span class="hljs-number">.15</span>,<span class="hljs-number">.12</span>,<span class="hljs-number">.08</span>]),<span class="hljs-string">&#x27;copie_vendute&#x27;</span>:copie,
                    <span class="hljs-string">&#x27;ricavo&#x27;</span>:<span class="hljs-built_in">round</span>(copie*libro[<span class="hljs-string">&#x27;prezzo_copertina&#x27;</span>]*{<span class="hljs-string">&#x27;Cartaceo&#x27;</span>:<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;Ebook&#x27;</span>:<span class="hljs-number">.65</span>,<span class="hljs-string">&#x27;Audiolibro&#x27;</span>:<span class="hljs-number">.55</span>}[fmt],<span class="hljs-number">2</span>)})

vendite = pd.DataFrame(vendite_records)
df = vendite.merge(libri, on=<span class="hljs-string">&#x27;libro_id&#x27;</span>, how=<span class="hljs-string">&#x27;left&#x27;</span>)
df[<span class="hljs-string">&#x27;anno&#x27;</span>] = df[<span class="hljs-string">&#x27;data&#x27;</span>].dt.year

<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Dataset creato!&quot;</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   Libri: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(libri):,}</span> | Record vendite: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(vendite):,}</span>&quot;</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   Periodo: <span class="hljs-subst">{date_range[<span class="hljs-number">0</span>].strftime(<span class="hljs-string">&#x27;%b %Y&#x27;</span>)}</span> - <span class="hljs-subst">{date_range[-<span class="hljs-number">1</span>].strftime(<span class="hljs-string">&#x27;%b %Y&#x27;</span>)}</span>&quot;</span>)
df.head(<span class="hljs-number">3</span>)</code></pre><pre><code class="hljs language-text">Dataset creato!
   Libri: 500 | Record vendite: 35,904
   Periodo: Jan 2023 - Dec 2024</code></pre><div class="notebook-output notebook-html">
<div id="df-69cafc80-a52d-45b3-8928-1275d0211b3e" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code class="hljs language-css"><span class="hljs-selector-class">.dataframe</span> <span class="hljs-selector-tag">tbody</span> <span class="hljs-selector-tag">tr</span> <span class="hljs-selector-tag">th</span> {
    <span class="hljs-attribute">vertical-align</span>: top;
}

<span class="hljs-selector-class">.dataframe</span> <span class="hljs-selector-tag">thead</span> <span class="hljs-selector-tag">th</span> {
    <span class="hljs-attribute">text-align</span>: right;
}</code></pre><p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>libro_id</th>
      <th>data</th>
      <th>formato</th>
      <th>canale</th>
      <th>copie_vendute</th>
      <th>ricavo</th>
      <th>titolo</th>
      <th>genere</th>
      <th>collana</th>
      <th>anno_pubblicazione</th>
      <th>pagine</th>
      <th>prezzo_copertina</th>
      <th>rating_goodreads</th>
      <th>n_recensioni</th>
      <th>anno</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>2023-01-01</td>
      <td>Cartaceo</td>
      <td>Fiere/Eventi</td>
      <td>43</td>
      <td>1035.87</td>
      <td>Titolo_001</td>
      <td>Thriller</td>
      <td>Piccoli Brividi</td>
      <td>2020</td>
      <td>272</td>
      <td>24.09</td>
      <td>3.1</td>
      <td>8</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>2023-01-01</td>
      <td>Ebook</td>
      <td>E-commerce proprio</td>
      <td>15</td>
      <td>234.88</td>
      <td>Titolo_001</td>
      <td>Thriller</td>
      <td>Piccoli Brividi</td>
      <td>2020</td>
      <td>272</td>
      <td>24.09</td>
      <td>3.1</td>
      <td>8</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>2023-01-01</td>
      <td>Audiolibro</td>
      <td>Amazon</td>
      <td>11</td>
      <td>145.74</td>
      <td>Titolo_001</td>
      <td>Thriller</td>
      <td>Piccoli Brividi</td>
      <td>2020</td>
      <td>272</td>
      <td>24.09</td>
      <td>3.1</td>
      <td>8</td>
      <td>2023</td>
    </tr>
  </tbody>
</table>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-69cafc80-a52d-45b3-8928-1275d0211b3e')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

<pre><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
  <span class="hljs-keyword">const</span> buttonEl =
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#df-69cafc80-a52d-45b3-8928-1275d0211b3e button.colab-df-convert&#x27;</span>);
  buttonEl.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> =
    google.<span class="hljs-property">colab</span>.<span class="hljs-property">kernel</span>.<span class="hljs-property">accessAllowed</span> ? <span class="hljs-string">&#x27;block&#x27;</span> : <span class="hljs-string">&#x27;none&#x27;</span>;

  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">convertToInteractive</span>(<span class="hljs-params">key</span>) {
    <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#df-69cafc80-a52d-45b3-8928-1275d0211b3e&#x27;</span>);
    <span class="hljs-keyword">const</span> dataTable =
      <span class="hljs-keyword">await</span> google.<span class="hljs-property">colab</span>.<span class="hljs-property">kernel</span>.<span class="hljs-title function_">invokeFunction</span>(<span class="hljs-string">&#x27;convertToInteractive&#x27;</span>,
                                                [key], {});
    <span class="hljs-keyword">if</span> (!dataTable) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">const</span> docLinkHtml = <span class="hljs-string">&#x27;Like what you see? Visit the &#x27;</span> +
      <span class="hljs-string">&#x27;&lt;a target=&quot;_blank&quot; href=https://colab.research.google.com/notebooks/data_table.ipynb&gt;data table notebook&lt;/a&gt;&#x27;</span>
      + <span class="hljs-string">&#x27; to learn more about interactive tables.&#x27;</span>;
    element.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&#x27;&#x27;</span>;
    dataTable[<span class="hljs-string">&#x27;output_type&#x27;</span>] = <span class="hljs-string">&#x27;display_data&#x27;</span>;
    <span class="hljs-keyword">await</span> google.<span class="hljs-property">colab</span>.<span class="hljs-property">output</span>.<span class="hljs-title function_">renderOutput</span>(dataTable, element);
    <span class="hljs-keyword">const</span> docLink = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;div&#x27;</span>);
    docLink.<span class="hljs-property">innerHTML</span> = docLinkHtml;
    element.<span class="hljs-title function_">appendChild</span>(docLink);
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>  </div>


<pre><code class="hljs language-apache"><span class="hljs-section">&lt;/div&gt;</span></code></pre>  </div>
</div>

<p>Voglio far notare solo una cosa, il dataset nasce da 3 cicli annidati, ovvero:</p>
<pre><code class="hljs language-java">Per ogni <span class="hljs-title function_">libro</span> <span class="hljs-params">(<span class="hljs-number">500</span> libri)</span>
  ‚îî‚îÄ Per ogni <span class="hljs-title function_">mese</span> <span class="hljs-params">(<span class="hljs-number">24</span> mesi: Gen <span class="hljs-number">2023</span> ‚Üí Dic <span class="hljs-number">2024</span>)</span>
       ‚îî‚îÄ Per ogni <span class="hljs-title function_">formato</span> <span class="hljs-params">(<span class="hljs-number">3</span>: Cartaceo, Ebook, Audiolibro)</span></code></pre><p>Il massimo teorico sarebbe 500 √ó 24 √ó 3 = 36.000 record. Ne otteniamo ~35.904 perch√© alcuni vengono scartati (copie = 0).</p>
<pre><code class="hljs language-python">df.info()</code></pre><pre><code class="hljs language-text">&lt;class &#x27;pandas.core.frame.DataFrame&#x27;&gt;
RangeIndex: 35904 entries, 0 to 35903
Data columns (total 15 columns):
 #   Column              Non-Null Count  Dtype         
---  ------              --------------  -----         
 0   libro_id            35904 non-null  int64         
 1   data                35904 non-null  datetime64[ns]
 2   formato             35904 non-null  object        
 3   canale              35904 non-null  object        
 4   copie_vendute       35904 non-null  int64         
 5   ricavo              35904 non-null  float64       
 6   titolo              35904 non-null  object        
 7   genere              35904 non-null  object        
 8   collana             35904 non-null  object        
 9   anno_pubblicazione  35904 non-null  int64         
 10  pagine              35904 non-null  int64         
 11  prezzo_copertina    35904 non-null  float64       
 12  rating_goodreads    35904 non-null  float64       
 13  n_recensioni        35904 non-null  int64         
 14  anno                35904 non-null  int32         
dtypes: datetime64[ns](1), float64(3), int32(1), int64(5), object(5)
memory usage: 4.0+ MB</code></pre><pre><code class="hljs language-python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">60</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;SCHEMA DEL DATASET&quot;</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">60</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nDimensioni: <span class="hljs-subst">{df.shape[<span class="hljs-number">0</span>]:,}</span> righe x <span class="hljs-subst">{df.shape[<span class="hljs-number">1</span>]}</span> colonne&quot;</span>)
<span class="hljs-keyword">for</span> col <span class="hljs-keyword">in</span> df.columns:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   <span class="hljs-subst">{col:25s}</span> <span class="hljs-subst">{<span class="hljs-built_in">str</span>(df[col].dtype):10s}</span>  (<span class="hljs-subst">{df[col].nunique():,}</span> unici)&quot;</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nRicavo totale: EUR <span class="hljs-subst">{df[<span class="hljs-string">&#x27;ricavo&#x27;</span>].<span class="hljs-built_in">sum</span>():,<span class="hljs-number">.0</span>f}</span>&quot;</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Copie totali: <span class="hljs-subst">{df[<span class="hljs-string">&#x27;copie_vendute&#x27;</span>].<span class="hljs-built_in">sum</span>():,<span class="hljs-number">.0</span>f}</span>&quot;</span>)</code></pre><pre><code class="hljs language-text">============================================================
SCHEMA DEL DATASET
============================================================

Dimensioni: 35,904 righe x 15 colonne
   libro_id                  int64       (500 unici)
   data                      datetime64[ns]  (24 unici)
   formato                   object      (3 unici)
   canale                    object      (5 unici)
   copie_vendute             int64       (680 unici)
   ricavo                    float64     (22,906 unici)
   titolo                    object      (500 unici)
   genere                    object      (10 unici)
   collana                   object      (8 unici)
   anno_pubblicazione        int64       (7 unici)
   pagine                    int64       (254 unici)
   prezzo_copertina          float64     (428 unici)
   rating_goodreads          float64     (28 unici)
   n_recensioni              int64       (265 unici)
   anno                      int32       (2 unici)

Ricavo totale: EUR 28,967,296
Copie totali: 1,987,829</code></pre><hr>
<h1 id="parte-4-grammatica-visuale">Parte 4: Grammatica visuale</h1>
<p>Introduciamo le 7 propriet√† visive (posizione, lunghezza, angolo, area, colore saturazione, colore hue, forma) con un ranking di efficacia per dati quantitativi vs categorici.
Spieghiamo poi il concetto di Data-Ink Ratio di Tufte e lo vediamo insieme.</p>
<h2 id="41-le-7-propriet-visive-visual-encoding">4.1 Le 7 propriet√† visive (Visual Encoding)</h2>
<figure class="table-wrapper" data-enhanced-table><div class="table-wrapper__scroll"><table>
<thead>
<tr>
<th>#</th>
<th>Propriet√†</th>
<th>Quant.</th>
<th>Categ.</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><strong>Posizione</strong> (asse x/y)</td>
<td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td>
<td>‚≠ê‚≠ê‚≠ê‚≠ê</td>
</tr>
<tr>
<td>2</td>
<td><strong>Lunghezza</strong> (barre)</td>
<td>‚≠ê‚≠ê‚≠ê‚≠ê</td>
<td>‚Äî</td>
</tr>
<tr>
<td>3</td>
<td><strong>Angolo/Pendenza</strong></td>
<td>‚≠ê‚≠ê‚≠ê</td>
<td>‚Äî</td>
</tr>
<tr>
<td>4</td>
<td><strong>Area</strong> (bubble, treemap)</td>
<td>‚≠ê‚≠ê</td>
<td>‚Äî</td>
</tr>
<tr>
<td>5</td>
<td><strong>Colore (saturazione)</strong></td>
<td>‚≠ê‚≠ê</td>
<td>‚Äî</td>
</tr>
<tr>
<td>6</td>
<td><strong>Colore (hue)</strong></td>
<td>‚≠ê</td>
<td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td>
</tr>
<tr>
<td>7</td>
<td><strong>Forma</strong></td>
<td>‚Äî</td>
<td>‚≠ê‚≠ê‚≠ê</td>
</tr>
</tbody></table>
</div></figure><h2 id="42-il-data-ink-ratio-edward-tufte">4.2 Il Data-Ink Ratio (Edward Tufte)</h2>
<blockquote>
<p><em>&quot;L&#39;eccellenza nella grafica statistica consiste in idee complesse comunicate con chiarezza, precisione ed efficienza.&quot;</em></p>
</blockquote>
<p><strong>Data-Ink Ratio</strong> = Inchiostro per i dati / Inchiostro totale. Deve tendere a 1.</p>
<pre><code class="hljs language-python"><span class="hljs-comment"># ============================================================</span>
<span class="hljs-comment"># Data-Ink Ratio ‚Äî Prima e Dopo</span>
<span class="hljs-comment"># ============================================================</span>
generi_top5 = df.groupby(<span class="hljs-string">&#x27;genere&#x27;</span>)[<span class="hljs-string">&#x27;ricavo&#x27;</span>].<span class="hljs-built_in">sum</span>().nlargest(<span class="hljs-number">5</span>).sort_values()
fig, (ax1, ax2) = plt.subplots(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">5</span>))

<span class="hljs-comment"># PRIMA: basso data-ink ratio</span>
ax1.barh(generi_top5.index, generi_top5.values/<span class="hljs-number">1e6</span>,
         color=[<span class="hljs-string">&#x27;#ff6b6b&#x27;</span>,<span class="hljs-string">&#x27;#ffa94d&#x27;</span>,<span class="hljs-string">&#x27;#ffd43b&#x27;</span>,<span class="hljs-string">&#x27;#69db7c&#x27;</span>,<span class="hljs-string">&#x27;#4dabf7&#x27;</span>], edgecolor=<span class="hljs-string">&#x27;black&#x27;</span>, linewidth=<span class="hljs-number">1.5</span>)
ax1.set_facecolor(<span class="hljs-string">&#x27;#f0f0f0&#x27;</span>); ax1.grid(<span class="hljs-literal">True</span>, linewidth=<span class="hljs-number">0.8</span>, color=<span class="hljs-string">&#x27;white&#x27;</span>)
ax1.set_title(<span class="hljs-string">&#x27;Ricavi per Genere (M EUR)&#x27;</span>, fontsize=<span class="hljs-number">14</span>, fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>)
ax1.spines[<span class="hljs-string">&#x27;top&#x27;</span>].set_visible(<span class="hljs-literal">True</span>); ax1.spines[<span class="hljs-string">&#x27;right&#x27;</span>].set_visible(<span class="hljs-literal">True</span>)
<span class="hljs-keyword">for</span> s <span class="hljs-keyword">in</span> ax1.spines.values(): s.set_linewidth(<span class="hljs-number">2</span>)
ax1.text(<span class="hljs-number">0.5</span>,-<span class="hljs-number">0.15</span>,<span class="hljs-string">&#x27;PRIMA: troppo inchiostro, poco dato&#x27;</span>,transform=ax1.transAxes,ha=<span class="hljs-string">&#x27;center&#x27;</span>,fontsize=<span class="hljs-number">11</span>,color=<span class="hljs-string">&#x27;red&#x27;</span>)

<span class="hljs-comment"># DOPO: alto data-ink ratio</span>
bars = ax2.barh(generi_top5.index, generi_top5.values/<span class="hljs-number">1e6</span>, color=<span class="hljs-string">&#x27;#2c3e50&#x27;</span>, height=<span class="hljs-number">0.6</span>)
ax2.set_title(<span class="hljs-string">f&#x27;Il Thriller guida i ricavi con EUR <span class="hljs-subst">{generi_top5.<span class="hljs-built_in">max</span>()/<span class="hljs-number">1e6</span>:<span class="hljs-number">.1</span>f}</span>M&#x27;</span>,
              fontsize=<span class="hljs-number">13</span>, fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>, loc=<span class="hljs-string">&#x27;left&#x27;</span>, pad=<span class="hljs-number">10</span>)
<span class="hljs-keyword">for</span> sp <span class="hljs-keyword">in</span> [<span class="hljs-string">&#x27;top&#x27;</span>,<span class="hljs-string">&#x27;right&#x27;</span>,<span class="hljs-string">&#x27;bottom&#x27;</span>,<span class="hljs-string">&#x27;left&#x27;</span>]: ax2.spines[sp].set_visible(<span class="hljs-literal">False</span>)
ax2.xaxis.set_visible(<span class="hljs-literal">False</span>); ax2.tick_params(left=<span class="hljs-literal">False</span>)
<span class="hljs-keyword">for</span> bar,val <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(bars, generi_top5.values/<span class="hljs-number">1e6</span>):
    ax2.text(val+<span class="hljs-number">0.1</span>, bar.get_y()+bar.get_height()/<span class="hljs-number">2</span>, <span class="hljs-string">f&#x27;EUR <span class="hljs-subst">{val:<span class="hljs-number">.1</span>f}</span>M&#x27;</span>, va=<span class="hljs-string">&#x27;center&#x27;</span>, fontsize=<span class="hljs-number">11</span>, fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>)
bars[-<span class="hljs-number">1</span>].set_color(<span class="hljs-string">&#x27;#e74c3c&#x27;</span>)
ax2.text(<span class="hljs-number">0.5</span>,-<span class="hljs-number">0.15</span>,<span class="hljs-string">&#x27;DOPO: pulito, So What nel titolo&#x27;</span>,transform=ax2.transAxes,ha=<span class="hljs-string">&#x27;center&#x27;</span>,fontsize=<span class="hljs-number">11</span>,color=<span class="hljs-string">&#x27;green&#x27;</span>)

plt.tight_layout(); plt.show()</code></pre><p><img src="../../../Assets/Notebook/generated/datavis_masterclass_parte1/datavis_masterclass_parte1-output-01.png" alt="Notebook output 1"></p>
<hr>
<h1 id="parte-5-catalogo-dei-grafici-fondamentali">Parte 5: Catalogo dei grafici fondamentali</h1>
<p>Per ogni famiglia di grafici mostriamo un esempio concreto sul dataset editoriale, sempre con titolo &quot;So What?&quot; e annotazioni.</p>
<figure class="table-wrapper" data-enhanced-table><div class="table-wrapper__scroll"><table>
<thead>
<tr>
<th>Categoria</th>
<th>Grafici</th>
<th>Domanda</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Confronto</strong></td>
<td>Bar, Grouped bar, Lollipop</td>
<td><em>Qual √® pi√π grande?</em></td>
</tr>
<tr>
<td><strong>Distribuzione</strong></td>
<td>Istogramma, Box, Violin, KDE</td>
<td><em>Come sono distribuiti?</em></td>
</tr>
<tr>
<td><strong>Relazione</strong></td>
<td>Scatter, Heatmap, Correlazione</td>
<td><em>C&#39;√® correlazione?</em></td>
</tr>
<tr>
<td><strong>Gerarchia</strong></td>
<td>Stacked bar, Treemap</td>
<td><em>Come e da cosa √® composto?</em></td>
</tr>
<tr>
<td><strong>Andamento</strong></td>
<td>Line, Area</td>
<td><em>Come cambia nel tempo?</em></td>
</tr>
</tbody></table>
</div></figure><hr>
<h2 id="51-grafici-di-confronto-50-shades-of-bar-chart">5.1 Grafici di confronto: 50 shades of Bar Chart</h2>
<p>Il seguente bar chart orizzontale mostra i ricavi per genere ordinati per valore, con i top 2 evidenziati in rosso/arancione e un box giallo in basso a destra con la raccomandazione. Il grouped bar confronta le copie vendute per formato nei top 5 generi, mostrando che il cartaceo domina ovunque. Il lollipop chart visualizza il rating medio Goodreads per genere con una linea verticale sulla media globale e punti verdi/rossi sopra/sotto media.</p>
<p><strong>Regole d&#39;oro:</strong> barre orizzontali per nomi lunghini, ordina per valore sull&#39;asse Y partendo da zero.</p>
<pre><code class="hljs language-python"><span class="hljs-comment"># ============================================================</span>
<span class="hljs-comment"># 5.1.1 ‚Äî BAR CHART: Ricavi per Genere</span>
<span class="hljs-comment"># ============================================================</span>
ricavi_genere = df.groupby(<span class="hljs-string">&#x27;genere&#x27;</span>)[<span class="hljs-string">&#x27;ricavo&#x27;</span>].<span class="hljs-built_in">sum</span>().sort_values(ascending=<span class="hljs-literal">True</span>) / <span class="hljs-number">1e6</span>
fig, ax = plt.subplots(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">6</span>))
colors = [<span class="hljs-string">&#x27;#2c3e50&#x27;</span>]*<span class="hljs-built_in">len</span>(ricavi_genere); colors[-<span class="hljs-number">1</span>]=<span class="hljs-string">&#x27;#e74c3c&#x27;</span>; colors[-<span class="hljs-number">2</span>]=<span class="hljs-string">&#x27;#e67e22&#x27;</span>
bars = ax.barh(ricavi_genere.index, ricavi_genere.values, color=colors, height=<span class="hljs-number">0.65</span>)
<span class="hljs-keyword">for</span> bar,val <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(bars, ricavi_genere.values):
    ax.text(val+<span class="hljs-number">0.15</span>, bar.get_y()+bar.get_height()/<span class="hljs-number">2</span>, <span class="hljs-string">f&#x27;EUR <span class="hljs-subst">{val:<span class="hljs-number">.1</span>f}</span>M&#x27;</span>, va=<span class="hljs-string">&#x27;center&#x27;</span>, fontsize=<span class="hljs-number">10</span>, fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>,
            color=<span class="hljs-string">&#x27;#e74c3c&#x27;</span> <span class="hljs-keyword">if</span> val==ricavi_genere.<span class="hljs-built_in">max</span>() <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;#2c3e50&#x27;</span>)
ax.set_title(<span class="hljs-string">&#x27;Thriller e Narrativa da soli valgono il {:.0f}% dei ricavi totali&#x27;</span>.<span class="hljs-built_in">format</span>(
    (ricavi_genere.nlargest(<span class="hljs-number">2</span>).<span class="hljs-built_in">sum</span>()/ricavi_genere.<span class="hljs-built_in">sum</span>())*<span class="hljs-number">100</span>),
    fontsize=<span class="hljs-number">14</span>, fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>, loc=<span class="hljs-string">&#x27;left&#x27;</span>, pad=<span class="hljs-number">15</span>)
ax.xaxis.set_visible(<span class="hljs-literal">False</span>)
<span class="hljs-keyword">for</span> sp <span class="hljs-keyword">in</span> [<span class="hljs-string">&#x27;bottom&#x27;</span>,<span class="hljs-string">&#x27;left&#x27;</span>]: ax.spines[sp].set_visible(<span class="hljs-literal">False</span>)
ax.tick_params(left=<span class="hljs-literal">False</span>)
ax.text(<span class="hljs-number">0.98</span>,<span class="hljs-number">0.02</span>,<span class="hljs-string">&#x27;So What? La dipendenza da 2 generi e\&#x27; un rischio.\nDiversificare in Fantasy e Saggistica e Romance.&#x27;</span>,
        transform=ax.transAxes,fontsize=<span class="hljs-number">9</span>,va=<span class="hljs-string">&#x27;bottom&#x27;</span>,ha=<span class="hljs-string">&#x27;right&#x27;</span>,
        bbox=<span class="hljs-built_in">dict</span>(boxstyle=<span class="hljs-string">&#x27;round,pad=0.5&#x27;</span>,facecolor=<span class="hljs-string">&#x27;#fffde7&#x27;</span>,alpha=<span class="hljs-number">0.8</span>))
plt.tight_layout(); plt.show()</code></pre><p><img src="../../../Assets/Notebook/generated/datavis_masterclass_parte1/datavis_masterclass_parte1-output-02.png" alt="Notebook output 2"></p>
<p>Se un bestseller Thriller o Narrativa sottoperforma, l&#39;impatto sul fatturato √® sproporzionato perch√© c&#39;√® un rischio di concentrazione.</p>
<p>Si suggerisce quindi di rafforzare i generi &quot;medi&quot; (Fantasy, Saggistica, Romance) che hanno gi√† volumi significativi ma possono crescere, per ridurre la dipendenza dai top 2</p>
<pre><code class="hljs language-python"><span class="hljs-comment"># ============================================================</span>
<span class="hljs-comment"># 5.1.1 ‚Äî BAR CHART con annotazione part-of-whole</span>
<span class="hljs-comment"># ============================================================</span>
ricavi_genere = df.groupby(<span class="hljs-string">&#x27;genere&#x27;</span>)[<span class="hljs-string">&#x27;ricavo&#x27;</span>].<span class="hljs-built_in">sum</span>().sort_values(ascending=<span class="hljs-literal">True</span>) / <span class="hljs-number">1e6</span>
top2_pct = (ricavi_genere.nlargest(<span class="hljs-number">2</span>).<span class="hljs-built_in">sum</span>() / ricavi_genere.<span class="hljs-built_in">sum</span>()) * <span class="hljs-number">100</span>

fig, ax = plt.subplots(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">6</span>))
colors = [<span class="hljs-string">&#x27;#2c3e50&#x27;</span>] * <span class="hljs-built_in">len</span>(ricavi_genere)
colors[-<span class="hljs-number">1</span>] = <span class="hljs-string">&#x27;#e74c3c&#x27;</span>
colors[-<span class="hljs-number">2</span>] = <span class="hljs-string">&#x27;#e67e22&#x27;</span>
bars = ax.barh(ricavi_genere.index, ricavi_genere.values, color=colors, height=<span class="hljs-number">0.65</span>)

<span class="hljs-keyword">for</span> bar, val <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(bars, ricavi_genere.values):
    ax.text(val + <span class="hljs-number">0.15</span>, bar.get_y() + bar.get_height() / <span class="hljs-number">2</span>,
            <span class="hljs-string">f&#x27;EUR <span class="hljs-subst">{val:<span class="hljs-number">.1</span>f}</span>M&#x27;</span>, va=<span class="hljs-string">&#x27;center&#x27;</span>, fontsize=<span class="hljs-number">10</span>, fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>,
            color=<span class="hljs-string">&#x27;#e74c3c&#x27;</span> <span class="hljs-keyword">if</span> val == ricavi_genere.<span class="hljs-built_in">max</span>() <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;#2c3e50&#x27;</span>)

<span class="hljs-comment"># --- Annotazione visiva &quot;parentesi&quot; per il 60% ---</span>
n = <span class="hljs-built_in">len</span>(ricavi_genere)
y_top = n - <span class="hljs-number">1</span>      <span class="hljs-comment"># posizione barra Thriller (la pi√π alta, ultima nel sort asc)</span>
y_second = n - <span class="hljs-number">2</span>   <span class="hljs-comment"># Narrativa</span>
x_bracket = ricavi_genere.<span class="hljs-built_in">max</span>() + <span class="hljs-number">1.2</span>

<span class="hljs-comment"># Linee verticale e orizzontali della parentesi</span>
ax.annotate(<span class="hljs-string">&#x27;&#x27;</span>, xy=(x_bracket, y_top + <span class="hljs-number">0.32</span>), xytext=(x_bracket, y_second - <span class="hljs-number">0.32</span>),
            arrowprops=<span class="hljs-built_in">dict</span>(arrowstyle=<span class="hljs-string">&#x27;-&#x27;</span>, color=<span class="hljs-string">&#x27;#555&#x27;</span>, lw=<span class="hljs-number">1.5</span>))
ax.plot([ricavi_genere.iloc[-<span class="hljs-number">1</span>] + <span class="hljs-number">0.15</span>, x_bracket], [y_top + <span class="hljs-number">0.32</span>, y_top + <span class="hljs-number">0.32</span>], color=<span class="hljs-string">&#x27;#555&#x27;</span>, lw=<span class="hljs-number">1.5</span>)
ax.plot([ricavi_genere.iloc[-<span class="hljs-number">2</span>] + <span class="hljs-number">0.15</span>, x_bracket], [y_second - <span class="hljs-number">0.32</span>, y_second - <span class="hljs-number">0.32</span>], color=<span class="hljs-string">&#x27;#555&#x27;</span>, lw=<span class="hljs-number">1.5</span>)

<span class="hljs-comment"># Label percentuale</span>
ax.text(x_bracket + <span class="hljs-number">0.15</span>, (y_top + y_second) / <span class="hljs-number">2</span>,
        <span class="hljs-string">f&#x27;<span class="hljs-subst">{top2_pct:<span class="hljs-number">.0</span>f}</span>%\ndel totale&#x27;</span>, va=<span class="hljs-string">&#x27;center&#x27;</span>, fontsize=<span class="hljs-number">11</span>,
        fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>, color=<span class="hljs-string">&#x27;#c0392b&#x27;</span>)

ax.set_title(
    <span class="hljs-string">&#x27;Thriller e Narrativa da soli valgono il {:.0f}% dei ricavi totali&#x27;</span>.<span class="hljs-built_in">format</span>(top2_pct),
    fontsize=<span class="hljs-number">14</span>, fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>, loc=<span class="hljs-string">&#x27;left&#x27;</span>, pad=<span class="hljs-number">15</span>)
ax.xaxis.set_visible(<span class="hljs-literal">False</span>)
<span class="hljs-keyword">for</span> sp <span class="hljs-keyword">in</span> [<span class="hljs-string">&#x27;bottom&#x27;</span>, <span class="hljs-string">&#x27;left&#x27;</span>]:
    ax.spines[sp].set_visible(<span class="hljs-literal">False</span>)
ax.tick_params(left=<span class="hljs-literal">False</span>)
ax.set_xlim(<span class="hljs-number">0</span>, ricavi_genere.<span class="hljs-built_in">max</span>() + <span class="hljs-number">2.5</span>)  <span class="hljs-comment"># spazio per parentesi</span>

ax.text(<span class="hljs-number">0.98</span>, <span class="hljs-number">0.02</span>,
        <span class="hljs-string">&#x27;So What? La dipendenza da 2 generi √® un rischio.\nDiversificare in Fantasy e Young Adult.&#x27;</span>,
        transform=ax.transAxes, fontsize=<span class="hljs-number">9</span>, va=<span class="hljs-string">&#x27;bottom&#x27;</span>, ha=<span class="hljs-string">&#x27;right&#x27;</span>,
        bbox=<span class="hljs-built_in">dict</span>(boxstyle=<span class="hljs-string">&#x27;round,pad=0.5&#x27;</span>, facecolor=<span class="hljs-string">&#x27;#fffde7&#x27;</span>, alpha=<span class="hljs-number">0.8</span>))

plt.tight_layout()
plt.show()</code></pre><p><img src="../../../Assets/Notebook/generated/datavis_masterclass_parte1/datavis_masterclass_parte1-output-03.png" alt="Notebook output 3"></p>
<h3 id="512-grouped-bar-chart">5.1.2 Grouped Bar Chart</h3>
<pre><code class="hljs language-python"><span class="hljs-comment"># ============================================================</span>
<span class="hljs-comment"># 5.1.2 ‚Äî GROUPED BAR: Vendite per formato e genere (Top 5)</span>
<span class="hljs-comment"># ============================================================</span>
top5_g = df.groupby(<span class="hljs-string">&#x27;genere&#x27;</span>)[<span class="hljs-string">&#x27;ricavo&#x27;</span>].<span class="hljs-built_in">sum</span>().nlargest(<span class="hljs-number">5</span>).index
vf = (df[df[<span class="hljs-string">&#x27;genere&#x27;</span>].isin(top5_g)].groupby([<span class="hljs-string">&#x27;genere&#x27;</span>,<span class="hljs-string">&#x27;formato&#x27;</span>])[<span class="hljs-string">&#x27;copie_vendute&#x27;</span>].<span class="hljs-built_in">sum</span>().reset_index())
piv = vf.pivot(index=<span class="hljs-string">&#x27;genere&#x27;</span>,columns=<span class="hljs-string">&#x27;formato&#x27;</span>,values=<span class="hljs-string">&#x27;copie_vendute&#x27;</span>)
piv = piv.loc[piv.<span class="hljs-built_in">sum</span>(axis=<span class="hljs-number">1</span>).sort_values(ascending=<span class="hljs-literal">True</span>).index]
fig, ax = plt.subplots(figsize=(<span class="hljs-number">12</span>,<span class="hljs-number">6</span>))
fc = {<span class="hljs-string">&#x27;Cartaceo&#x27;</span>:<span class="hljs-string">&#x27;#2c3e50&#x27;</span>,<span class="hljs-string">&#x27;Ebook&#x27;</span>:<span class="hljs-string">&#x27;#3498db&#x27;</span>,<span class="hljs-string">&#x27;Audiolibro&#x27;</span>:<span class="hljs-string">&#x27;#e74c3c&#x27;</span>}
x = np.arange(<span class="hljs-built_in">len</span>(piv)); w = <span class="hljs-number">0.25</span>
<span class="hljs-keyword">for</span> i,(fmt,c) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(fc.items()):
    <span class="hljs-keyword">if</span> fmt <span class="hljs-keyword">in</span> piv.columns:
        v = piv[fmt].values/<span class="hljs-number">1000</span>
        ax.barh(x+i*w, v, w, label=fmt, color=c, alpha=<span class="hljs-number">0.85</span>)
ax.set_yticks(x+w); ax.set_yticklabels(piv.index,fontsize=<span class="hljs-number">11</span>)
ax.legend(loc=<span class="hljs-string">&#x27;lower right&#x27;</span>, title=<span class="hljs-string">&#x27;Copie vendute&#x27;</span>); ax.xaxis.set_visible(<span class="hljs-literal">False</span>)
ax.set_title(<span class="hljs-string">&quot;Il cartaceo vende 2x rispetto agli ebook in ogni genere&quot;</span>, fontsize=<span class="hljs-number">13</span>, fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>, loc=<span class="hljs-string">&#x27;left&#x27;</span>,pad=<span class="hljs-number">15</span>)
<span class="hljs-keyword">for</span> sp <span class="hljs-keyword">in</span> [<span class="hljs-string">&#x27;bottom&#x27;</span>,<span class="hljs-string">&#x27;left&#x27;</span>]: ax.spines[sp].set_visible(<span class="hljs-literal">False</span>)
ax.tick_params(left=<span class="hljs-literal">False</span>); plt.tight_layout(); plt.show()</code></pre><p><img src="../../../Assets/Notebook/generated/datavis_masterclass_parte1/datavis_masterclass_parte1-output-04.png" alt="Notebook output 4"></p>
<h3 id="513-lollipop-chart-il-migliore-data-ink-ratio-del-bar-chart">5.1.3 Lollipop Chart: il migliore data-ink ratio del bar chart</h3>
<pre><code class="hljs language-python"><span class="hljs-comment"># ============================================================</span>
<span class="hljs-comment"># 5.1.3 ‚Äî LOLLIPOP: Rating medio per genere</span>
<span class="hljs-comment"># ============================================================</span>
rg = df.groupby(<span class="hljs-string">&#x27;genere&#x27;</span>)[<span class="hljs-string">&#x27;rating_goodreads&#x27;</span>].mean().sort_values(ascending=<span class="hljs-literal">True</span>)
fig, ax = plt.subplots(figsize=(<span class="hljs-number">10</span>,<span class="hljs-number">6</span>))
mg = df[<span class="hljs-string">&#x27;rating_goodreads&#x27;</span>].mean()
ax.axvline(mg, color=<span class="hljs-string">&#x27;#bdc3c7&#x27;</span>, linestyle=<span class="hljs-string">&#x27;--&#x27;</span>, linewidth=<span class="hljs-number">1</span>, label=<span class="hljs-string">f&#x27;Media: <span class="hljs-subst">{mg:<span class="hljs-number">.2</span>f}</span>&#x27;</span>)
clr = [<span class="hljs-string">&#x27;#27ae60&#x27;</span> <span class="hljs-keyword">if</span> v&gt;=mg <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;#e74c3c&#x27;</span> <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> rg.values]
ax.hlines(y=rg.index, xmin=mg, xmax=rg.values, color=clr, linewidth=<span class="hljs-number">2</span>)
ax.scatter(rg.values, rg.index, color=clr, s=<span class="hljs-number">80</span>, zorder=<span class="hljs-number">5</span>)
<span class="hljs-keyword">for</span> i,(g,v) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(rg.items()):
    ax.text(v+(<span class="hljs-number">0.03</span> <span class="hljs-keyword">if</span> v&gt;=mg <span class="hljs-keyword">else</span> -<span class="hljs-number">0.03</span>), i, <span class="hljs-string">f&#x27;<span class="hljs-subst">{v:<span class="hljs-number">.2</span>f}</span>&#x27;</span>, va=<span class="hljs-string">&#x27;center&#x27;</span>,
            ha=<span class="hljs-string">&#x27;left&#x27;</span> <span class="hljs-keyword">if</span> v&gt;=mg <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;right&#x27;</span>, fontsize=<span class="hljs-number">10</span>, fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>, color=clr[i])
ax.set_title(<span class="hljs-string">&#x27;Narrativa e saggi storici le recensioni migliori&#x27;</span>, fontsize=<span class="hljs-number">13</span>, fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>, loc=<span class="hljs-string">&#x27;left&#x27;</span>,pad=<span class="hljs-number">15</span>)
<span class="hljs-keyword">for</span> sp <span class="hljs-keyword">in</span> [<span class="hljs-string">&#x27;bottom&#x27;</span>,<span class="hljs-string">&#x27;left&#x27;</span>]: ax.spines[sp].set_visible(<span class="hljs-literal">False</span>)
ax.xaxis.set_visible(<span class="hljs-literal">False</span>); ax.tick_params(left=<span class="hljs-literal">False</span>); ax.legend(loc=<span class="hljs-string">&#x27;lower right&#x27;</span>,fontsize=<span class="hljs-number">9</span>)
plt.tight_layout(); plt.show()</code></pre><p><img src="../../../Assets/Notebook/generated/datavis_masterclass_parte1/datavis_masterclass_parte1-output-05.png" alt="Notebook output 5"></p>
<hr>
<h2 id="52-grafici-di-distribuzione">5.2 Grafici di Distribuzione</h2>
<p>Ora vediamo in primis l&#39;istogramma. In particolare questo viene mostrato tre volte sullo stesso dato (prezzo di copertina) con 5, 20 e 50 bin per dimostrare come la scelta dei bin cambia il messaggio percepito.</p>
<p>Poi il box plot, che confronta la distribuzione dei prezzi per genere ordinando per mediana decrescente.</p>
<p>Il violin plot mostra la distribuzione delle copie vendute (in scala log) per formato, evidenziando che l&#39;audiolibro ha una distribuzione molto concentrata.</p>
<p>Il KDE sovrappone le curve di densit√† dei prezzi per anno di pubblicazione (2021-2024), mostrando lo spostamento verso l&#39;alto dei prezzi recenti.</p>
<h3 id="521-istogramma-attenzione-al-numero-di-bin">5.2.1 Istogramma: attenzione al numero di bin!</h3>
<pre><code class="hljs language-python"><span class="hljs-comment"># ============================================================</span>
<span class="hljs-comment"># 5.2.1 ‚Äî ISTOGRAMMA: Effetto dei bin</span>
<span class="hljs-comment"># ============================================================</span>
fig, axes = plt.subplots(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">5</span>))
<span class="hljs-keyword">for</span> ax,nb,t <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(axes,[<span class="hljs-number">5</span>,<span class="hljs-number">20</span>,<span class="hljs-number">50</span>],[<span class="hljs-string">&#x27;5 bin: troppo pochi&#x27;</span>,<span class="hljs-string">&#x27;20 bin: giusto&#x27;</span>,<span class="hljs-string">&#x27;50 bin: troppi&#x27;</span>]):
    ax.hist(libri[<span class="hljs-string">&#x27;prezzo_copertina&#x27;</span>],bins=nb,color=<span class="hljs-string">&#x27;#3498db&#x27;</span>,edgecolor=<span class="hljs-string">&#x27;white&#x27;</span>,alpha=<span class="hljs-number">0.8</span>)
    ax.set_title(t,fontsize=<span class="hljs-number">11</span>,fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>); ax.set_xlabel(<span class="hljs-string">&#x27;Prezzo EUR&#x27;</span>)
    ax.spines[<span class="hljs-string">&#x27;top&#x27;</span>].set_visible(<span class="hljs-literal">False</span>); ax.spines[<span class="hljs-string">&#x27;right&#x27;</span>].set_visible(<span class="hljs-literal">False</span>)
plt.suptitle(<span class="hljs-string">&#x27;Il numero di bin cambia il messaggio!&#x27;</span>,fontsize=<span class="hljs-number">14</span>,fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>,y=<span class="hljs-number">1.02</span>)
plt.tight_layout(); plt.show()</code></pre><p><img src="../../../Assets/Notebook/generated/datavis_masterclass_parte1/datavis_masterclass_parte1-output-06.png" alt="Notebook output 6"></p>
<h3 id="522-box-plot-5-statistiche-in-un-colpo">5.2.2 Box Plot: 5 statistiche in un colpo</h3>
<p>Le 5 statistiche del box plot sono:</p>
<ul>
<li>Mediana ‚Äî la linea centrale nella scatola</li>
<li>Q1 (1¬∞ quartile) ‚Äî bordo inferiore della scatola</li>
<li>Q3 (3¬∞ quartile) ‚Äî bordo superiore della scatola</li>
<li>Whiskers (baffi) ‚Äî si estendono fino a Q1 ‚àí 1.5√óIQR e Q3 + 1.5√óIQR</li>
<li>Outlier ‚Äî i punti isolati oltre i whiskers</li>
</ul>
<p>La scatola centrale racchiude il 50% dei dati (l&#39;IQR, interquartile range)</p>
<pre><code class="hljs language-python"><span class="hljs-comment"># ============================================================</span>
<span class="hljs-comment"># 5.2.2 ‚Äî BOX PLOT: Prezzo per genere</span>
<span class="hljs-comment"># ============================================================</span>
om = libri.groupby(<span class="hljs-string">&#x27;genere&#x27;</span>)[<span class="hljs-string">&#x27;prezzo_copertina&#x27;</span>].median().sort_values(ascending=<span class="hljs-literal">False</span>).index
fig, ax = plt.subplots(figsize=(<span class="hljs-number">14</span>,<span class="hljs-number">6</span>))
bp = ax.boxplot([libri[libri[<span class="hljs-string">&#x27;genere&#x27;</span>]==g][<span class="hljs-string">&#x27;prezzo_copertina&#x27;</span>] <span class="hljs-keyword">for</span> g <span class="hljs-keyword">in</span> om],
    labels=om, patch_artist=<span class="hljs-literal">True</span>, widths=<span class="hljs-number">0.6</span>,
    medianprops=<span class="hljs-built_in">dict</span>(color=<span class="hljs-string">&#x27;#e74c3c&#x27;</span>,linewidth=<span class="hljs-number">2</span>), whiskerprops=<span class="hljs-built_in">dict</span>(color=<span class="hljs-string">&#x27;#7f8c8d&#x27;</span>))
<span class="hljs-keyword">for</span> patch,c <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(bp[<span class="hljs-string">&#x27;boxes&#x27;</span>],[<span class="hljs-string">&#x27;#3498db&#x27;</span>,<span class="hljs-string">&#x27;#2ecc71&#x27;</span>]*<span class="hljs-number">5</span>):
    patch.set_facecolor(c); patch.set_alpha(<span class="hljs-number">0.4</span>)
ax.set_title(<span class="hljs-string">&#x27;Thriller e Narrativa hanno i prezzi piu alti e variabili&#x27;</span>,
             fontsize=<span class="hljs-number">13</span>,fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>,loc=<span class="hljs-string">&#x27;left&#x27;</span>,pad=<span class="hljs-number">15</span>)
ax.set_ylabel(<span class="hljs-string">&#x27;Prezzo EUR&#x27;</span>); ax.tick_params(axis=<span class="hljs-string">&#x27;x&#x27;</span>,rotation=<span class="hljs-number">30</span>)
plt.tight_layout(); plt.show()</code></pre><p><img src="../../../Assets/Notebook/generated/datavis_masterclass_parte1/datavis_masterclass_parte1-output-07.png" alt="Notebook output 7"></p>
<p>üì¢ ATTENZIONE üì¢</p>
<p>Qui i colori non codificano nessuna variabile, alternano blu e verde solo per &quot;decorazione&quot;, ma non c&#39;√® nessuna legenda n√© significato associato.</p>
<p>Anzi, potenzialmente potrebbero confondere: il lettore si chiede &quot;cosa vuol dire blu vs verde?&quot; e la risposta √®... nulla.</p>
<p>Qui il colore dovrebbe o essere uniforme (un solo grigio/blu per tutti) oppure codificare qualcosa di utile ,per esempio evidenziare in rosso i generi con mediana sopra un certo prezzo target, e grigio gli altri. Cos√¨ il colore avrebbe un &quot;So What?&quot;.</p>
<blockquote>
<p>√à esattamente il principio della parte 6 e in parte gi√† visto prima: grigio = default, colore solo per evidenziare</p>
</blockquote>
<h3 id="523-violin-plot">5.2.3 Violin Plot</h3>
<p>Il violin plot √® un box plot che ha imparato a parlareüòÄ: oltre alle 5 statistiche classiche, mostra la densit√† della distribuzione lungo tutta la sua altezza. Dove il violino √® pi√π largo, l√¨ si concentrano pi√π dati.</p>
<p>In generale quando scegliere il:</p>
<ul>
<li><strong>Box plot</strong>: confronti rapidi tra molte categorie (&gt;5), audience non tecnica, spazio limitato. Il box plot √® immediato e universale.</li>
<li><strong>Violin plot</strong>: quando la forma della distribuzione √® la vera storia che vuole essere raccontata. Una distribuzione bimodale (due gobbe) √® invisibile nel box plot ma evidente nel violin. Stesso discorso per distribuzioni molto asimmetriche o con addensamenti particolari a certi valori.</li>
</ul>
<p>Regola pratica: se stai confrontando mediane ‚Üí box plot. Se stai confrontando come si comportano i dati ‚Üí violin plot.</p>
<pre><code class="hljs language-python"><span class="hljs-comment"># === GRAFICO 1: Violin Plot ===</span>
<span class="hljs-comment"># Messaggio: l&#x27;audiolibro ha distribuzione concentrata</span>

fig, ax = plt.subplots(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">6</span>))

ds = df.sample(<span class="hljs-number">10000</span>, random_state=<span class="hljs-number">42</span>)
formati = [<span class="hljs-string">&#x27;Cartaceo&#x27;</span>, <span class="hljs-string">&#x27;Ebook&#x27;</span>, <span class="hljs-string">&#x27;Audiolibro&#x27;</span>]

violin_data = []
<span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> formati:
    vals = np.log10(ds[ds[<span class="hljs-string">&#x27;formato&#x27;</span>] == f][<span class="hljs-string">&#x27;copie_vendute&#x27;</span>].clip(<span class="hljs-number">1</span>))
    <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> vals:
        violin_data.append({<span class="hljs-string">&#x27;formato&#x27;</span>: f, <span class="hljs-string">&#x27;log10_copie&#x27;</span>: v})
violin_df = pd.DataFrame(violin_data)

<span class="hljs-comment"># Grigio per tutti, rosso solo per l&#x27;audiolibro (√® il messaggio)</span>
palette_violin = {
    <span class="hljs-string">&#x27;Cartaceo&#x27;</span>: <span class="hljs-string">&#x27;#bdc3c7&#x27;</span>,
    <span class="hljs-string">&#x27;Ebook&#x27;</span>: <span class="hljs-string">&#x27;#bdc3c7&#x27;</span>,
    <span class="hljs-string">&#x27;Audiolibro&#x27;</span>: <span class="hljs-string">&#x27;#e74c3c&#x27;</span>
}

sns.violinplot(data=violin_df, x=<span class="hljs-string">&#x27;formato&#x27;</span>, y=<span class="hljs-string">&#x27;log10_copie&#x27;</span>,
               palette=palette_violin, inner=<span class="hljs-string">&#x27;quartile&#x27;</span>,
               order=formati, ax=ax, linewidth=<span class="hljs-number">1.2</span>, saturation=<span class="hljs-number">0.8</span>)

<span class="hljs-comment"># Annotazione mediane in unit√† leggibili</span>
<span class="hljs-keyword">for</span> i, f <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(formati):
    med = np.log10(ds[ds[<span class="hljs-string">&#x27;formato&#x27;</span>] == f][<span class="hljs-string">&#x27;copie_vendute&#x27;</span>].clip(<span class="hljs-number">1</span>)).median()
    label = <span class="hljs-string">f&#x27;<span class="hljs-subst">{<span class="hljs-number">10</span>**med:<span class="hljs-number">.0</span>f}</span> copie&#x27;</span>
    ax.annotate(label, xy=(i, med), xytext=(i + <span class="hljs-number">0.45</span>, med),
                fontsize=<span class="hljs-number">10</span>, fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>,
                color=<span class="hljs-string">&#x27;#e74c3c&#x27;</span> <span class="hljs-keyword">if</span> f == <span class="hljs-string">&#x27;Audiolibro&#x27;</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;#7f8c8d&#x27;</span>,
                arrowprops=<span class="hljs-built_in">dict</span>(arrowstyle=<span class="hljs-string">&#x27;-&#x27;</span>, color=<span class="hljs-string">&#x27;gray&#x27;</span>, lw=<span class="hljs-number">0.5</span>))

ax.set_title(
    <span class="hljs-string">&quot;L&#x27;audiolibro ha distribuzione concentrata: pochi bestseller&quot;</span>,
    <span class="hljs-comment">#&quot;pochi bestseller, molti titoli a basse vendite&quot;,</span>
    fontsize=<span class="hljs-number">12</span>, fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>, loc=<span class="hljs-string">&#x27;left&#x27;</span>, pad=<span class="hljs-number">15</span>)
ax.set_xlabel(<span class="hljs-string">&#x27;&#x27;</span>)
ax.set_ylabel(<span class="hljs-string">&#x27;Copie vendute (scala log10)&#x27;</span>)
ax.spines[<span class="hljs-string">&#x27;top&#x27;</span>].set_visible(<span class="hljs-literal">False</span>)
ax.spines[<span class="hljs-string">&#x27;right&#x27;</span>].set_visible(<span class="hljs-literal">False</span>)
plt.tight_layout(); plt.show()</code></pre><p><img src="../../../Assets/Notebook/generated/datavis_masterclass_parte1/datavis_masterclass_parte1-output-08.png" alt="Notebook output 8"></p>
<h4 id="perch-la-scala-log10">Perch√© la scala log10?</h4>
<p>Perch√© le vendite per libro seguono una distribuzione lognormale molto asimmetrica. Pochi bestseller vendono migliaia di copie mentre la maggior parte dei titoli vende poche decine.</p>
<p>In scala lineare il violin sarebbe schiacciato tutto in basso con una coda lunga invisibile verso l&#39;alto.</p>
<h3 id="524-kde-plot">5.2.4 KDE Plot</h3>
<pre><code class="hljs language-python"><span class="hljs-keyword">from</span> scipy <span class="hljs-keyword">import</span> stats

fig, ax = plt.subplots(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">6</span>))

generi_kde = [<span class="hljs-string">&#x27;Poesia&#x27;</span>, <span class="hljs-string">&#x27;Saggistica&#x27;</span>, <span class="hljs-string">&#x27;Fantasy&#x27;</span>, <span class="hljs-string">&#x27;Narrativa&#x27;</span>, <span class="hljs-string">&#x27;Thriller&#x27;</span>]
x_range = np.linspace(<span class="hljs-number">5</span>, <span class="hljs-number">35</span>, <span class="hljs-number">300</span>)

stili = {
    <span class="hljs-string">&#x27;Poesia&#x27;</span>:      {<span class="hljs-string">&#x27;color&#x27;</span>: <span class="hljs-string">&#x27;#bdc3c7&#x27;</span>, <span class="hljs-string">&#x27;lw&#x27;</span>: <span class="hljs-number">1.5</span>, <span class="hljs-string">&#x27;alpha&#x27;</span>: <span class="hljs-number">0.5</span>, <span class="hljs-string">&#x27;ls&#x27;</span>: <span class="hljs-string">&#x27;:&#x27;</span>},
    <span class="hljs-string">&#x27;Saggistica&#x27;</span>:  {<span class="hljs-string">&#x27;color&#x27;</span>: <span class="hljs-string">&#x27;#bdc3c7&#x27;</span>, <span class="hljs-string">&#x27;lw&#x27;</span>: <span class="hljs-number">1.5</span>, <span class="hljs-string">&#x27;alpha&#x27;</span>: <span class="hljs-number">0.5</span>, <span class="hljs-string">&#x27;ls&#x27;</span>: <span class="hljs-string">&#x27;--&#x27;</span>},
    <span class="hljs-string">&#x27;Fantasy&#x27;</span>:     {<span class="hljs-string">&#x27;color&#x27;</span>: <span class="hljs-string">&#x27;#bdc3c7&#x27;</span>, <span class="hljs-string">&#x27;lw&#x27;</span>: <span class="hljs-number">1.5</span>, <span class="hljs-string">&#x27;alpha&#x27;</span>: <span class="hljs-number">0.5</span>, <span class="hljs-string">&#x27;ls&#x27;</span>: <span class="hljs-string">&#x27;-.&#x27;</span>},
    <span class="hljs-string">&#x27;Narrativa&#x27;</span>:   {<span class="hljs-string">&#x27;color&#x27;</span>: <span class="hljs-string">&#x27;#e67e22&#x27;</span>, <span class="hljs-string">&#x27;lw&#x27;</span>: <span class="hljs-number">3</span>,   <span class="hljs-string">&#x27;alpha&#x27;</span>: <span class="hljs-number">0.9</span>, <span class="hljs-string">&#x27;ls&#x27;</span>: <span class="hljs-string">&#x27;-&#x27;</span>},
    <span class="hljs-string">&#x27;Thriller&#x27;</span>:    {<span class="hljs-string">&#x27;color&#x27;</span>: <span class="hljs-string">&#x27;#e74c3c&#x27;</span>, <span class="hljs-string">&#x27;lw&#x27;</span>: <span class="hljs-number">3</span>,   <span class="hljs-string">&#x27;alpha&#x27;</span>: <span class="hljs-number">0.9</span>, <span class="hljs-string">&#x27;ls&#x27;</span>: <span class="hljs-string">&#x27;-&#x27;</span>},
}

<span class="hljs-keyword">for</span> genere <span class="hljs-keyword">in</span> generi_kde:
    subset = libri[libri[<span class="hljs-string">&#x27;genere&#x27;</span>] == genere][<span class="hljs-string">&#x27;prezzo_copertina&#x27;</span>]
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(subset) &lt; <span class="hljs-number">5</span>:
        <span class="hljs-keyword">continue</span>
    kde = stats.gaussian_kde(subset)
    y_vals = kde(x_range)
    s = stili[genere]
    med = subset.median()

    ax.plot(x_range, y_vals, color=s[<span class="hljs-string">&#x27;color&#x27;</span>], linewidth=s[<span class="hljs-string">&#x27;lw&#x27;</span>],
            alpha=s[<span class="hljs-string">&#x27;alpha&#x27;</span>], linestyle=s[<span class="hljs-string">&#x27;ls&#x27;</span>],
            label=<span class="hljs-string">f&#x27;<span class="hljs-subst">{genere}</span> (EUR <span class="hljs-subst">{med:<span class="hljs-number">.0</span>f}</span>)&#x27;</span>)

    ax.vlines(med, <span class="hljs-number">0</span>, kde(med)[<span class="hljs-number">0</span>], color=s[<span class="hljs-string">&#x27;color&#x27;</span>],
              linewidth=<span class="hljs-number">1</span>, alpha=<span class="hljs-number">0.4</span>, linestyle=s[<span class="hljs-string">&#x27;ls&#x27;</span>])

ax.yaxis.set_visible(<span class="hljs-literal">False</span>)
<span class="hljs-keyword">for</span> sp <span class="hljs-keyword">in</span> [<span class="hljs-string">&#x27;left&#x27;</span>, <span class="hljs-string">&#x27;top&#x27;</span>, <span class="hljs-string">&#x27;right&#x27;</span>]:
    ax.spines[sp].set_visible(<span class="hljs-literal">False</span>)

ax.set_xlabel(<span class="hljs-string">&#x27;Prezzo di copertina (EUR)&#x27;</span>, fontsize=<span class="hljs-number">11</span>)
ax.set_xlim(<span class="hljs-number">5</span>, <span class="hljs-number">35</span>)
ax.legend(loc=<span class="hljs-string">&#x27;center left&#x27;</span>, bbox_to_anchor=(<span class="hljs-number">1.02</span>, <span class="hljs-number">0.5</span>),
          fontsize=<span class="hljs-number">10</span>, frameon=<span class="hljs-literal">False</span>,
          title=<span class="hljs-string">&#x27;Genere (mediana)&#x27;</span>, title_fontsize=<span class="hljs-number">10</span>)
ax.set_title(
    <span class="hljs-string">&#x27;Thriller e Narrativa nella fascia alta, Poesia e Saggistica in basso&#x27;</span>,
    fontsize=<span class="hljs-number">13</span>, fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>, loc=<span class="hljs-string">&#x27;left&#x27;</span>, pad=<span class="hljs-number">15</span>)

<span class="hljs-comment"># Caption: spiega come leggere il grafico</span>
fig.text(<span class="hljs-number">0.02</span>, -<span class="hljs-number">0.02</span>,
         <span class="hljs-string">&#x27;Ogni curva mostra come si distribuiscono i prezzi di copertina per genere. &#x27;</span>
         <span class="hljs-string">&#x27;Piu la curva e alta, piu libri si concentrano a quel prezzo. &#x27;</span>
         <span class="hljs-string">&#x27;Le linee verticali indicano la mediana.&#x27;</span>,
         fontsize=<span class="hljs-number">9</span>, color=<span class="hljs-string">&#x27;#7f8c8d&#x27;</span>, style=<span class="hljs-string">&#x27;italic&#x27;</span>, va=<span class="hljs-string">&#x27;top&#x27;</span>)

plt.tight_layout()
plt.show()</code></pre><p><img src="../../../Assets/Notebook/generated/datavis_masterclass_parte1/datavis_masterclass_parte1-output-09.png" alt="Notebook output 9"></p>
<hr>
<h2 id="53-grafici-di-relazione">5.3 Grafici di Relazione</h2>
<p>Ora vedremo:</p>
<ul>
<li><p>scatter plot, mappa rating Goodreads (x) vs ricavo totale (y) per ogni libro, con colore = genere e dimensione del punto = numero di recensioni, mostrando che il rating alto non garantisce ricavi alti.</p>
</li>
<li><p>La heatmap mostra la matrice genere √ó mese con intensit√† normalizzata per riga, con un rettangolo che evidenzia la colonna di Dicembre.</p>
</li>
<li><p>La matrice di correlazione usa una maschera triangolare e palette divergente RdBu, rivelando che il numero di recensioni √® il miglior predittore dei ricavi.</p>
</li>
</ul>
<h3 id="531-scatter-plot">5.3.1 Scatter Plot</h3>
<p>Lo scatter plot mappa la relazione tra due variabili continue. Ogni punto √® un&#39;osservazione (in questo caso un libro) e la sua posizione nel piano rivela se esiste una correlazione.
In questo esempio vogliamo rispondere a una domanda comune in ambito editoriale: un rating alto su Goodreads si traduce in ricavi alti?</p>
<p>La risposta non √® scontata. Un libro pu√≤ avere 4.8 stelle ed essere letto da 30 persone, oppure 3.5 stelle e vendere centinaia di migliaia di copie. Il fattore discriminante non √® la qualit√† percepita ma la visibilit√†, approssimata dal numero di recensioni.</p>
<p>Scelte di design fatte da me:</p>
<ul>
<li>Asse $X$ = rating Goodreads, Asse $Y$ = ricavo totale in EUR</li>
<li>Colore = numero di recensioni, raggruppato in 4 fasce $(&lt; 50, 50-200, 200-1K, &gt; 1K)$ con palette sequenziale grigio ‚Üí rosso. Questo √® il vero driver e deve saltare all&#39;occhio</li>
<li>Dimensione uniforme: ricordiamoci che l&#39;occhio umano √® pessimo a confrontare aree (vedi Parte 4: le propriet√† visive). Meglio usare il colore e dividere in 4 fasce le classi, con un ordinamento chiaro (poche = grigio, molte = rosso).</li>
<li>Genere nell&#39;hover, non nella legenda: il messaggio del grafico non riguarda i generi. Usare 10 colori per genere avrebbe nascosto il pattern principale. Il genere resta disponibile in hover per chi vuole esplorare.</li>
<li>Plotly interattivo: permette di fare hover su ogni punto per vedere genere, prezzo, copie e recensioni. L&#39;esplorazione sostituisce la legenda affollata. Per√≤ questa scelta la ritengo ultima per importanza rispetto alle altre fatte.</li>
</ul>
<pre><code class="hljs language-python">ls = (df.groupby([<span class="hljs-string">&#x27;libro_id&#x27;</span>,<span class="hljs-string">&#x27;genere&#x27;</span>,<span class="hljs-string">&#x27;rating_goodreads&#x27;</span>,<span class="hljs-string">&#x27;n_recensioni&#x27;</span>,<span class="hljs-string">&#x27;prezzo_copertina&#x27;</span>])
      .agg(ricavo_totale=(<span class="hljs-string">&#x27;ricavo&#x27;</span>,<span class="hljs-string">&#x27;sum&#x27;</span>), copie_totali=(<span class="hljs-string">&#x27;copie_vendute&#x27;</span>,<span class="hljs-string">&#x27;sum&#x27;</span>)).reset_index())

ls[<span class="hljs-string">&#x27;fascia_recensioni&#x27;</span>] = pd.cut(
    ls[<span class="hljs-string">&#x27;n_recensioni&#x27;</span>],
    bins=[<span class="hljs-number">0</span>, <span class="hljs-number">50</span>, <span class="hljs-number">200</span>, <span class="hljs-number">1000</span>, <span class="hljs-number">10000</span>],
    labels=[<span class="hljs-string">&#x27;&lt; 50&#x27;</span>, <span class="hljs-string">&#x27;50-200&#x27;</span>, <span class="hljs-string">&#x27;200-1K&#x27;</span>, <span class="hljs-string">&#x27;&gt; 1K&#x27;</span>]
)

fig = px.scatter(
    ls,
    x=<span class="hljs-string">&#x27;rating_goodreads&#x27;</span>,
    y=<span class="hljs-string">&#x27;ricavo_totale&#x27;</span>,
    color=<span class="hljs-string">&#x27;fascia_recensioni&#x27;</span>,
    color_discrete_map={
        <span class="hljs-string">&#x27;&lt; 50&#x27;</span>:    <span class="hljs-string">&#x27;#d5d8dc&#x27;</span>,
        <span class="hljs-string">&#x27;50-200&#x27;</span>:  <span class="hljs-string">&#x27;#aeb6bf&#x27;</span>,
        <span class="hljs-string">&#x27;200-1K&#x27;</span>:  <span class="hljs-string">&#x27;#e67e22&#x27;</span>,
        <span class="hljs-string">&#x27;&gt; 1K&#x27;</span>:    <span class="hljs-string">&#x27;#e74c3c&#x27;</span>,
    },
    category_orders={<span class="hljs-string">&#x27;fascia_recensioni&#x27;</span>: [<span class="hljs-string">&#x27;&lt; 50&#x27;</span>, <span class="hljs-string">&#x27;50-200&#x27;</span>, <span class="hljs-string">&#x27;200-1K&#x27;</span>, <span class="hljs-string">&#x27;&gt; 1K&#x27;</span>]},
    hover_data={
        <span class="hljs-string">&#x27;genere&#x27;</span>: <span class="hljs-literal">True</span>,
        <span class="hljs-string">&#x27;n_recensioni&#x27;</span>: <span class="hljs-literal">True</span>,
        <span class="hljs-string">&#x27;prezzo_copertina&#x27;</span>: <span class="hljs-string">&#x27;:.2f&#x27;</span>,
        <span class="hljs-string">&#x27;copie_totali&#x27;</span>: <span class="hljs-string">&#x27;:,.0f&#x27;</span>,
        <span class="hljs-string">&#x27;ricavo_totale&#x27;</span>: <span class="hljs-string">&#x27;:,.0f&#x27;</span>,
        <span class="hljs-string">&#x27;rating_goodreads&#x27;</span>: <span class="hljs-string">&#x27;:.1f&#x27;</span>,
        <span class="hljs-string">&#x27;fascia_recensioni&#x27;</span>: <span class="hljs-literal">False</span>,
    },
    labels={
        <span class="hljs-string">&#x27;rating_goodreads&#x27;</span>: <span class="hljs-string">&#x27;Rating Goodreads&#x27;</span>,
        <span class="hljs-string">&#x27;ricavo_totale&#x27;</span>: <span class="hljs-string">&#x27;Ricavo Totale (EUR)&#x27;</span>,
        <span class="hljs-string">&#x27;fascia_recensioni&#x27;</span>: <span class="hljs-string">&#x27;N. Recensioni&#x27;</span>,
        <span class="hljs-string">&#x27;genere&#x27;</span>: <span class="hljs-string">&#x27;Genere&#x27;</span>,
        <span class="hljs-string">&#x27;n_recensioni&#x27;</span>: <span class="hljs-string">&#x27;Recensioni&#x27;</span>,
        <span class="hljs-string">&#x27;prezzo_copertina&#x27;</span>: <span class="hljs-string">&#x27;Prezzo&#x27;</span>,
        <span class="hljs-string">&#x27;copie_totali&#x27;</span>: <span class="hljs-string">&#x27;Copie vendute&#x27;</span>,
    },
    opacity=<span class="hljs-number">0.6</span>,
)

fig.update_traces(marker=<span class="hljs-built_in">dict</span>(size=<span class="hljs-number">8</span>, line=<span class="hljs-built_in">dict</span>(width=<span class="hljs-number">0</span>)))

fig.update_layout(
    title=<span class="hljs-built_in">dict</span>(
        text=(
            <span class="hljs-string">&#x27;&lt;b&gt;Il rating alto non garantisce ricavi: &#x27;</span>
            <span class="hljs-string">&#x27;servono le recensioni&lt;/b&gt;&#x27;</span>
            <span class="hljs-string">&#x27;&lt;br&gt;&lt;sup&gt;Ogni punto = un libro. &#x27;</span>
            <span class="hljs-string">&#x27;Colore = volume recensioni. Hover per dettagli.&lt;/sup&gt;&#x27;</span>
        ),
        x=<span class="hljs-number">0</span>, xanchor=<span class="hljs-string">&#x27;left&#x27;</span>,
    ),
    template=<span class="hljs-string">&#x27;plotly_white&#x27;</span>,
    height=<span class="hljs-number">550</span>, width=<span class="hljs-number">900</span>,
    legend=<span class="hljs-built_in">dict</span>(
        title=<span class="hljs-string">&#x27;N. Recensioni&#x27;</span>,
        orientation=<span class="hljs-string">&#x27;v&#x27;</span>,
        yanchor=<span class="hljs-string">&#x27;top&#x27;</span>, y=<span class="hljs-number">0.98</span>,
        xanchor=<span class="hljs-string">&#x27;left&#x27;</span>, x=<span class="hljs-number">1.02</span>,
        font=<span class="hljs-built_in">dict</span>(size=<span class="hljs-number">11</span>),
    ),
    xaxis=<span class="hljs-built_in">dict</span>(dtick=<span class="hljs-number">0.5</span>),
)
fig.show()</code></pre><div class="notebook-output notebook-html">
<html>
<head><meta charset="utf-8" /></head>
<body>
    <div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>                <div id="1a05f7b9-2ddf-486a-ad34-d20c9530df5d" class="plotly-graph-div" style="height:550px; width:900px;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("1a05f7b9-2ddf-486a-ad34-d20c9530df5d")) {                    Plotly.newPlot(                        "1a05f7b9-2ddf-486a-ad34-d20c9530df5d",                        [{"customdata":[["Thriller",8,24.09,3657,"\u003c 50"],["Narrativa",33,15.99,778,"\u003c 50"],["Romance",16,9.98,1771,"\u003c 50"],["Narrativa",48,22.38,2268,"\u003c 50"],["Young Adult",48,10.43,2407,"\u003c 50"],["Narrativa",10,25.48,3841,"\u003c 50"],["Thriller",29,16.28,3014,"\u003c 50"],["Saggistica",18,14.48,2091,"\u003c 50"],["Storico",46,18.8,1786,"\u003c 50"],["Narrativa",34,16.56,2356,"\u003c 50"],["Fantasy",46,20.33,6147,"\u003c 50"],["Narrativa",50,10.45,2710,"\u003c 50"],["Bambini",12,11.29,2378,"\u003c 50"],["Young Adult",11,18.72,2129,"\u003c 50"],["Narrativa",14,11.41,2172,"\u003c 50"],["Saggistica",46,18.95,2163,"\u003c 50"],["Narrativa",5,21.05,1455,"\u003c 50"],["Thriller",43,15.34,13555,"\u003c 50"],["Narrativa",47,15.66,3000,"\u003c 50"],["Poesia",16,14.13,67,"\u003c 50"],["Fantasy",25,16.5,510,"\u003c 50"],["Narrativa",33,11.79,3098,"\u003c 50"],["Thriller",5,26.29,6997,"\u003c 50"],["Saggistica",43,16.22,728,"\u003c 50"],["Storico",31,22.5,268,"\u003c 50"],["Storico",16,18.72,809,"\u003c 50"],["Romance",5,12.67,1194,"\u003c 50"],["Storico",14,14.92,856,"\u003c 50"],["Sci-Fi",44,14.0,3696,"\u003c 50"],["Narrativa",5,25.21,9309,"\u003c 50"],["Fantasy",41,22.53,2309,"\u003c 50"],["Saggistica",14,21.94,2584,"\u003c 50"],["Narrativa",33,17.61,12386,"\u003c 50"],["Fantasy",5,11.11,6989,"\u003c 50"],["Storico",42,20.82,1052,"\u003c 50"],["Saggistica",36,17.35,1193,"\u003c 50"],["Saggistica",47,16.45,4350,"\u003c 50"],["Saggistica",42,20.84,1630,"\u003c 50"],["Narrativa",9,22.45,3916,"\u003c 50"],["Saggistica",12,19.75,1726,"\u003c 50"],["Thriller",33,25.84,13581,"\u003c 50"],["Sci-Fi",10,21.55,678,"\u003c 50"],["Storico",46,23.5,1693,"\u003c 50"],["Sci-Fi",42,19.86,3968,"\u003c 50"],["Thriller",9,15.18,2136,"\u003c 50"],["Romance",5,19.71,1341,"\u003c 50"],["Young Adult",8,16.86,1836,"\u003c 50"],["Thriller",16,16.65,13243,"\u003c 50"],["Saggistica",45,13.66,7814,"\u003c 50"],["Narrativa",26,23.79,5508,"\u003c 50"],["Thriller",26,20.15,1596,"\u003c 50"],["Bambini",10,17.75,2839,"\u003c 50"],["Thriller",30,12.78,1238,"\u003c 50"],["Romance",17,18.05,1548,"\u003c 50"],["Romance",43,17.17,2609,"\u003c 50"],["Fantasy",16,12.92,2752,"\u003c 50"],["Bambini",32,21.25,1052,"\u003c 50"],["Storico",26,24.67,553,"\u003c 50"],["Saggistica",29,10.31,255,"\u003c 50"],["Narrativa",39,17.7,2573,"\u003c 50"],["Poesia",18,18.83,85,"\u003c 50"],["Bambini",27,17.98,1626,"\u003c 50"],["Fantasy",5,17.37,843,"\u003c 50"],["Poesia",26,12.49,798,"\u003c 50"],["Poesia",13,17.22,170,"\u003c 50"],["Storico",5,24.37,5042,"\u003c 50"],["Fantasy",27,12.96,1283,"\u003c 50"],["Narrativa",41,14.92,948,"\u003c 50"],["Fantasy",16,18.56,1809,"\u003c 50"],["Narrativa",37,20.39,7415,"\u003c 50"],["Narrativa",42,24.81,8321,"\u003c 50"],["Narrativa",8,18.79,1161,"\u003c 50"],["Romance",40,20.34,435,"\u003c 50"],["Romance",37,21.8,902,"\u003c 50"],["Fantasy",28,23.31,3856,"\u003c 50"],["Thriller",18,25.45,1399,"\u003c 50"],["Fantasy",18,17.48,2250,"\u003c 50"],["Saggistica",23,16.17,2084,"\u003c 50"],["Saggistica",34,19.92,693,"\u003c 50"],["Thriller",34,25.44,5679,"\u003c 50"],["Narrativa",5,10.59,8537,"\u003c 50"],["Young Adult",10,17.81,8196,"\u003c 50"],["Saggistica",43,12.71,866,"\u003c 50"],["Young Adult",5,22.77,1431,"\u003c 50"],["Romance",30,22.32,1692,"\u003c 50"],["Young Adult",11,22.29,3869,"\u003c 50"],["Storico",34,15.12,1030,"\u003c 50"],["Romance",10,16.66,4630,"\u003c 50"],["Storico",10,22.52,3210,"\u003c 50"],["Bambini",11,24.59,2308,"\u003c 50"],["Poesia",37,10.02,1052,"\u003c 50"],["Narrativa",10,23.58,5895,"\u003c 50"],["Fantasy",5,13.09,762,"\u003c 50"],["Narrativa",36,10.92,4723,"\u003c 50"],["Thriller",5,26.37,2791,"\u003c 50"],["Narrativa",10,20.86,7343,"\u003c 50"],["Romance",22,16.81,11016,"\u003c 50"],["Storico",27,24.55,518,"\u003c 50"],["Thriller",32,12.72,1049,"\u003c 50"],["Thriller",25,24.17,2987,"\u003c 50"],["Romance",47,20.8,1205,"\u003c 50"],["Thriller",33,15.92,6002,"\u003c 50"],["Romance",41,14.12,974,"\u003c 50"],["Fantasy",36,22.99,2235,"\u003c 50"],["Thriller",31,12.49,5620,"\u003c 50"],["Storico",12,13.53,2063,"\u003c 50"],["Romance",47,14.4,2446,"\u003c 50"],["Narrativa",45,11.15,7781,"\u003c 50"],["Saggistica",47,18.8,3592,"\u003c 50"],["Thriller",31,25.61,2802,"\u003c 50"],["Fantasy",37,11.08,6002,"\u003c 50"],["Thriller",46,24.0,23772,"\u003c 50"],["Narrativa",31,18.61,1662,"\u003c 50"],["Narrativa",13,11.39,1765,"\u003c 50"],["Bambini",5,11.31,414,"\u003c 50"],["Fantasy",45,23.54,3513,"\u003c 50"],["Thriller",5,21.93,10219,"\u003c 50"],["Saggistica",41,23.08,2523,"\u003c 50"],["Bambini",5,17.66,1119,"\u003c 50"],["Narrativa",42,19.72,9500,"\u003c 50"],["Sci-Fi",10,13.46,562,"\u003c 50"],["Narrativa",14,18.47,1466,"\u003c 50"],["Romance",41,21.05,3909,"\u003c 50"],["Storico",6,17.49,611,"\u003c 50"],["Narrativa",20,11.51,44294,"\u003c 50"],["Storico",5,13.72,2509,"\u003c 50"],["Thriller",39,26.92,3534,"\u003c 50"],["Bambini",5,14.87,1496,"\u003c 50"],["Storico",5,14.11,1095,"\u003c 50"],["Young Adult",38,23.88,1654,"\u003c 50"],["Romance",35,17.51,778,"\u003c 50"],["Saggistica",8,15.82,4538,"\u003c 50"],["Storico",27,14.54,2027,"\u003c 50"],["Narrativa",48,20.42,2610,"\u003c 50"],["Sci-Fi",25,10.67,522,"\u003c 50"],["Narrativa",29,19.91,1894,"\u003c 50"],["Bambini",27,15.44,4737,"\u003c 50"],["Young Adult",5,11.72,2810,"\u003c 50"],["Narrativa",25,19.74,4362,"\u003c 50"],["Narrativa",48,20.41,5930,"\u003c 50"],["Fantasy",8,11.71,2325,"\u003c 50"],["Young Adult",5,23.44,2374,"\u003c 50"],["Thriller",13,19.7,4608,"\u003c 50"],["Young Adult",35,17.19,2321,"\u003c 50"],["Saggistica",32,11.75,903,"\u003c 50"],["Narrativa",50,15.8,3908,"\u003c 50"],["Saggistica",5,22.58,1801,"\u003c 50"],["Bambini",9,21.73,422,"\u003c 50"],["Thriller",10,24.07,3026,"\u003c 50"],["Thriller",13,16.15,1615,"\u003c 50"],["Saggistica",11,15.47,9895,"\u003c 50"],["Thriller",35,20.81,2711,"\u003c 50"],["Fantasy",39,20.48,923,"\u003c 50"],["Young Adult",46,15.52,1377,"\u003c 50"],["Young Adult",15,12.4,835,"\u003c 50"]],"hovertemplate":"Rating Goodreads=%{x:.1f}\u003cbr\u003eRicavo Totale (EUR)=%{y:,.0f}\u003cbr\u003eGenere=%{customdata[0]}\u003cbr\u003eRecensioni=%{customdata[1]}\u003cbr\u003ePrezzo=%{customdata[2]:.2f}\u003cbr\u003eCopie vendute=%{customdata[3]:,.0f}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"\u003c 50","marker":{"color":"#d5d8dc","opacity":0.6,"symbol":"circle","line":{"width":0},"size":8},"mode":"markers","name":"\u003c 50","orientation":"v","showlegend":true,"x":[3.1,3.4,3.3,4.2,4.5,3.7,3.3,3.5,3.5,3.6,4.0,3.6,3.9,3.6,3.1,4.8,4.0,2.8,3.5,3.8,4.7,4.3,3.6,2.9,3.9,3.5,4.0,3.9,2.8,3.4,5.0,3.8,3.7,4.0,4.0,3.7,3.6,3.6,3.6,3.8,3.2,4.0,4.1,3.3,3.5,3.3,2.9,3.2,2.7,4.0,3.1,3.7,3.8,4.6,3.5,3.3,3.5,3.5,3.8,4.1,3.6,3.9,3.6,3.6,4.4,4.2,4.2,3.7,3.4,3.5,3.6,3.5,4.0,3.0,3.9,3.2,4.1,3.2,4.3,3.2,4.0,3.6,3.6,3.2,4.3,3.7,3.4,3.8,3.7,3.8,3.6,3.8,4.0,3.1,4.3,3.1,3.3,4.7,3.7,4.0,4.7,3.0,3.4,3.9,4.6,3.6,3.9,3.7,3.5,3.5,3.5,4.7,3.6,3.4,2.8,4.2,3.4,2.7,3.1,4.5,3.3,3.0,3.1,3.9,3.5,2.4,4.0,4.3,3.7,4.3,3.4,4.0,3.2,4.0,3.6,3.5,3.9,4.1,3.2,4.0,3.5,4.1,4.0,3.9,2.6,3.5,3.5,3.8,3.8,2.9,3.4,4.5,3.4,3.1,4.3],"xaxis":"x","y":[71281.13,10198.42,14539.4,41127.700000000004,20152.36,79612.25,40328.04,24621.78,27627.54,32242.32,102363.6,23130.57,21901.489999999998,32585.9,20167.73,32945.55,24170.73,169547.68,38579.22,798.26,6792.3099999999995,29861.74,150444.54,9757.95,4946.68,12346.76,12395.09,10371.64,42463.4,190382.12,42534.42,45784.48,175846.42,62839.28,17736.61,16875.54,57940.19,28116.280000000002,71227.12,28462.73,283714.2,12124.1,32485.32,64505.25,26353.25,21691.83,25416.46,178917.57,86773.14,107173.94,26238.31,40845.45,13072.02,22734.05,36747.25,29189.52,18300.49,11317.36,2214.53,37093.92,1389.69,23892.75,12078.19,8333.4,2426.2999999999997,100643.25,13499.75,11401.1,27505.95,124280.13,166466.41,17605.29,7265.44,16316.21,74457.99,29042.29,32152.7,27036.23,11497.86,116236.67,73506.78,118733.01,8926.23,26791.18,30716.77,69494.63,12731.8,62746.55,59832.26,46268.55,8632.69,114622.38,8117.82,42259.29,59997.020000000004,124958.73,150935.33,10416.65,10916.95,58909.53,20451.6,76973.99,11306.6,42126.86,57088.7,22486.85,29108.16,69068.17,54881.9,57931.09,54265.42,470655.6,25361.7,16346.39,3877.05,68313.09,182558.48,47299.01,16106.86,152298.55,6112.85,22178.78,68397.82,8848.22,417381.39,28021.7,77704.58,18347.36,12480.96,31982.51,10873.68,58637.65,23990.309999999998,43419.07,4593.98,30464.32,59799.87,26763.23,70167.8,99369.15,22612.0,45014.17,74703.38,32520.91,8743.23,50009.37,33300.97,7582.64,59742.95,21208.99,124449.2,45471.89,15420.44,17432.08,8513.84],"yaxis":"y","type":"scatter"},{"customdata":[["Young Adult",70,12.96,835,"50-200"],["Fantasy",153,20.9,960,"50-200"],["Narrativa",166,20.1,9974,"50-200"],["Narrativa",150,13.36,6715,"50-200"],["Sci-Fi",81,21.66,1715,"50-200"],["Sci-Fi",84,21.09,228,"50-200"],["Narrativa",109,16.19,3786,"50-200"],["Thriller",77,25.36,13116,"50-200"],["Fantasy",200,24.85,1620,"50-200"],["Narrativa",182,16.19,4813,"50-200"],["Thriller",82,18.29,4695,"50-200"],["Thriller",63,22.8,1772,"50-200"],["Saggistica",76,23.19,697,"50-200"],["Saggistica",98,16.09,2261,"50-200"],["Fantasy",160,19.19,2038,"50-200"],["Narrativa",138,22.9,1459,"50-200"],["Thriller",52,21.48,13536,"50-200"],["Romance",137,18.6,1564,"50-200"],["Saggistica",146,18.32,9757,"50-200"],["Narrativa",156,19.23,5453,"50-200"],["Romance",169,22.28,758,"50-200"],["Thriller",183,19.11,6902,"50-200"],["Saggistica",141,11.06,1064,"50-200"],["Saggistica",56,10.78,1974,"50-200"],["Young Adult",136,21.67,3517,"50-200"],["Narrativa",200,15.56,2703,"50-200"],["Thriller",132,14.53,2360,"50-200"],["Thriller",181,20.76,6549,"50-200"],["Thriller",170,23.02,5838,"50-200"],["Sci-Fi",78,24.88,1483,"50-200"],["Thriller",131,21.49,1960,"50-200"],["Narrativa",89,20.41,1847,"50-200"],["Narrativa",76,12.26,1684,"50-200"],["Narrativa",167,16.44,8548,"50-200"],["Romance",85,15.33,2262,"50-200"],["Narrativa",85,23.5,5432,"50-200"],["Fantasy",85,17.67,1993,"50-200"],["Thriller",192,15.82,8686,"50-200"],["Thriller",133,15.17,8245,"50-200"],["Thriller",142,17.97,4259,"50-200"],["Romance",152,22.99,666,"50-200"],["Poesia",187,10.15,860,"50-200"],["Narrativa",92,12.89,3932,"50-200"],["Narrativa",197,20.0,4971,"50-200"],["Fantasy",139,11.93,3710,"50-200"],["Thriller",167,23.29,27710,"50-200"],["Narrativa",117,14.28,3264,"50-200"],["Narrativa",143,14.32,13020,"50-200"],["Storico",200,21.29,3614,"50-200"],["Fantasy",110,16.65,1135,"50-200"],["Storico",69,10.88,1740,"50-200"],["Poesia",131,8.32,210,"50-200"],["Saggistica",115,10.84,1428,"50-200"],["Poesia",68,9.59,408,"50-200"],["Narrativa",164,16.87,4329,"50-200"],["Saggistica",90,23.4,2210,"50-200"],["Storico",149,10.23,2999,"50-200"],["Narrativa",183,25.57,3407,"50-200"],["Saggistica",83,18.3,523,"50-200"],["Saggistica",87,23.95,2097,"50-200"],["Thriller",157,11.75,33491,"50-200"],["Thriller",51,27.08,1790,"50-200"],["Saggistica",88,13.75,544,"50-200"],["Thriller",53,14.16,6369,"50-200"],["Young Adult",104,18.38,1609,"50-200"],["Thriller",101,26.93,9527,"50-200"],["Narrativa",79,12.78,1948,"50-200"],["Fantasy",159,13.28,1754,"50-200"],["Narrativa",163,23.94,4393,"50-200"],["Thriller",173,22.57,4033,"50-200"],["Storico",51,11.13,1477,"50-200"],["Thriller",55,18.45,5134,"50-200"],["Thriller",108,13.63,1596,"50-200"],["Fantasy",115,24.09,3301,"50-200"],["Fantasy",66,22.65,3895,"50-200"],["Saggistica",65,19.94,2390,"50-200"],["Thriller",55,21.63,1815,"50-200"],["Fantasy",59,17.59,5237,"50-200"],["Romance",65,22.0,456,"50-200"],["Narrativa",105,17.63,2906,"50-200"],["Narrativa",74,14.47,4841,"50-200"],["Romance",120,12.37,2906,"50-200"],["Thriller",104,16.34,1932,"50-200"],["Thriller",169,14.27,8142,"50-200"],["Thriller",86,14.83,2139,"50-200"],["Romance",141,16.67,3077,"50-200"],["Fantasy",167,21.48,565,"50-200"],["Thriller",177,11.97,8127,"50-200"],["Thriller",190,12.63,2337,"50-200"],["Thriller",197,21.72,3935,"50-200"],["Romance",108,22.23,4579,"50-200"],["Poesia",65,17.43,568,"50-200"],["Narrativa",109,22.96,32813,"50-200"],["Romance",140,15.84,5212,"50-200"],["Saggistica",74,12.27,2524,"50-200"],["Romance",143,22.76,272,"50-200"],["Thriller",122,25.84,2012,"50-200"],["Thriller",80,15.46,3186,"50-200"],["Storico",84,24.65,4329,"50-200"],["Fantasy",116,12.01,2218,"50-200"],["Sci-Fi",178,12.93,1278,"50-200"],["Romance",181,12.66,1653,"50-200"],["Narrativa",104,20.7,1388,"50-200"],["Thriller",79,13.4,3679,"50-200"],["Thriller",149,21.04,1591,"50-200"],["Young Adult",114,11.15,1782,"50-200"],["Poesia",139,17.56,157,"50-200"],["Storico",61,24.41,1160,"50-200"],["Fantasy",176,24.66,20338,"50-200"],["Narrativa",74,20.39,2421,"50-200"],["Narrativa",106,17.13,1561,"50-200"],["Fantasy",81,12.33,1927,"50-200"],["Bambini",96,20.69,4517,"50-200"],["Thriller",123,25.58,3600,"50-200"],["Narrativa",148,11.64,7671,"50-200"],["Bambini",175,20.87,2335,"50-200"],["Young Adult",192,22.19,1122,"50-200"],["Sci-Fi",115,18.01,3401,"50-200"],["Thriller",99,24.44,2794,"50-200"],["Narrativa",60,17.63,13596,"50-200"],["Bambini",90,17.31,3202,"50-200"],["Fantasy",94,20.58,2033,"50-200"],["Narrativa",73,11.98,3145,"50-200"],["Thriller",73,21.64,2529,"50-200"],["Thriller",117,21.13,2020,"50-200"],["Sci-Fi",156,16.97,2856,"50-200"],["Saggistica",70,19.41,1216,"50-200"],["Storico",85,20.04,7232,"50-200"],["Romance",122,20.19,2147,"50-200"],["Storico",58,10.94,2778,"50-200"],["Thriller",64,25.01,7431,"50-200"],["Thriller",69,14.64,4839,"50-200"],["Fantasy",69,14.09,14676,"50-200"],["Narrativa",93,20.52,9613,"50-200"],["Saggistica",192,20.31,3693,"50-200"],["Saggistica",160,17.59,6822,"50-200"],["Thriller",185,15.93,2639,"50-200"],["Narrativa",162,15.18,3070,"50-200"],["Sci-Fi",99,19.7,1512,"50-200"],["Storico",119,21.73,11268,"50-200"],["Narrativa",131,24.69,2947,"50-200"],["Fantasy",109,16.61,3713,"50-200"],["Young Adult",166,22.87,1315,"50-200"],["Saggistica",145,18.1,4277,"50-200"],["Sci-Fi",136,14.1,1433,"50-200"],["Romance",159,22.78,6551,"50-200"],["Narrativa",129,24.74,1386,"50-200"],["Narrativa",150,22.27,3867,"50-200"],["Saggistica",96,10.17,1971,"50-200"],["Romance",189,24.34,1473,"50-200"],["Young Adult",56,22.34,918,"50-200"],["Fantasy",82,11.59,709,"50-200"],["Thriller",106,19.81,6948,"50-200"],["Narrativa",178,10.59,1968,"50-200"],["Narrativa",72,17.78,3440,"50-200"],["Narrativa",161,19.82,2639,"50-200"],["Saggistica",176,21.05,3572,"50-200"],["Saggistica",151,22.68,2285,"50-200"],["Narrativa",58,20.92,3130,"50-200"],["Fantasy",177,12.68,636,"50-200"],["Narrativa",135,14.16,4023,"50-200"],["Fantasy",162,10.42,2191,"50-200"],["Fantasy",180,22.37,17716,"50-200"],["Narrativa",68,19.82,1518,"50-200"],["Fantasy",84,11.62,2924,"50-200"],["Saggistica",122,18.48,1863,"50-200"],["Thriller",164,18.0,5934,"50-200"],["Young Adult",58,14.65,6404,"50-200"],["Narrativa",59,19.88,7310,"50-200"],["Thriller",128,22.48,2445,"50-200"],["Thriller",59,17.24,8528,"50-200"],["Thriller",79,21.35,11501,"50-200"],["Storico",67,15.33,284,"50-200"],["Saggistica",125,10.58,4856,"50-200"],["Thriller",56,13.2,5057,"50-200"],["Storico",159,14.05,1288,"50-200"],["Saggistica",146,12.84,2747,"50-200"],["Bambini",144,17.65,2918,"50-200"],["Saggistica",124,9.98,6407,"50-200"],["Sci-Fi",146,10.01,1333,"50-200"],["Poesia",132,8.36,495,"50-200"],["Thriller",130,12.67,6318,"50-200"],["Narrativa",87,19.4,5799,"50-200"],["Thriller",184,19.35,8634,"50-200"],["Young Adult",73,14.3,4810,"50-200"],["Fantasy",136,15.86,6634,"50-200"],["Thriller",62,12.77,9339,"50-200"],["Thriller",112,16.59,4566,"50-200"],["Storico",157,20.43,717,"50-200"],["Saggistica",188,11.87,2704,"50-200"],["Narrativa",134,14.72,3183,"50-200"],["Saggistica",90,16.23,8052,"50-200"],["Poesia",168,12.86,253,"50-200"],["Thriller",169,25.86,1922,"50-200"],["Narrativa",70,21.64,2858,"50-200"],["Fantasy",104,22.26,1531,"50-200"],["Narrativa",176,25.44,4170,"50-200"],["Narrativa",179,23.33,2167,"50-200"],["Romance",156,9.92,4924,"50-200"],["Romance",151,13.76,1393,"50-200"],["Narrativa",137,11.33,8915,"50-200"],["Young Adult",183,20.2,636,"50-200"],["Thriller",91,12.78,5279,"50-200"],["Thriller",165,17.23,14020,"50-200"],["Thriller",141,23.29,4134,"50-200"],["Narrativa",180,11.52,54440,"50-200"],["Bambini",115,19.93,2671,"50-200"],["Narrativa",100,21.08,5790,"50-200"],["Saggistica",77,15.33,3668,"50-200"],["Saggistica",127,10.05,1611,"50-200"],["Narrativa",131,20.04,7322,"50-200"],["Fantasy",134,23.01,2611,"50-200"],["Storico",65,20.76,8802,"50-200"],["Thriller",82,11.99,2052,"50-200"],["Sci-Fi",140,12.03,738,"50-200"],["Narrativa",161,15.05,2962,"50-200"],["Young Adult",200,18.28,1680,"50-200"],["Romance",146,16.35,4071,"50-200"],["Fantasy",93,14.03,507,"50-200"],["Narrativa",61,17.43,3448,"50-200"],["Narrativa",73,19.56,1192,"50-200"],["Narrativa",94,21.24,2711,"50-200"]],"hovertemplate":"Rating Goodreads=%{x:.1f}\u003cbr\u003eRicavo Totale (EUR)=%{y:,.0f}\u003cbr\u003eGenere=%{customdata[0]}\u003cbr\u003eRecensioni=%{customdata[1]}\u003cbr\u003ePrezzo=%{customdata[2]:.2f}\u003cbr\u003eCopie vendute=%{customdata[3]:,.0f}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"50-200","marker":{"color":"#aeb6bf","opacity":0.6,"symbol":"circle","line":{"width":0},"size":8},"mode":"markers","name":"50-200","orientation":"v","showlegend":true,"x":[3.6,4.1,4.4,4.4,3.6,3.1,3.8,3.7,4.0,3.7,3.5,3.6,3.7,4.5,4.0,4.3,2.9,3.1,3.8,4.6,3.4,3.3,3.4,3.6,2.7,2.4,4.7,3.1,3.9,3.5,5.0,3.8,4.2,3.5,3.5,3.7,4.3,3.2,3.4,4.4,2.6,4.2,4.3,4.0,2.2,4.0,3.9,3.0,4.1,4.2,4.1,3.4,3.9,4.1,4.1,4.2,3.7,3.6,3.3,3.4,3.6,3.8,3.7,4.0,4.2,3.3,3.6,3.6,4.4,3.8,4.3,3.8,4.1,3.2,3.9,4.0,3.9,2.8,3.4,3.5,4.3,3.7,3.7,4.1,3.0,3.3,4.1,3.8,3.8,3.4,2.5,3.8,4.0,4.3,3.7,3.4,3.1,3.4,3.6,3.5,4.4,3.9,4.0,3.1,3.7,4.0,2.9,3.9,3.3,3.1,4.0,3.5,3.7,3.2,4.1,3.4,2.4,3.6,3.6,3.7,3.1,3.9,4.0,3.1,3.0,3.8,3.6,2.9,3.6,2.9,4.5,3.7,3.1,3.4,3.5,3.5,4.3,3.8,3.9,3.3,3.9,3.8,4.7,2.9,2.6,4.5,3.6,3.5,2.9,3.9,3.8,3.7,3.9,4.1,3.1,3.9,3.5,4.0,4.1,3.8,3.7,3.6,4.4,4.4,3.4,4.1,4.1,3.7,4.0,3.8,4.2,4.1,3.8,3.9,4.3,3.2,3.9,3.5,3.4,3.7,3.2,4.0,3.9,2.8,3.4,3.2,4.1,3.6,4.2,3.3,3.3,3.9,4.4,4.0,2.9,3.5,3.8,4.7,5.0,4.0,4.1,4.6,3.8,3.9,3.4,3.1,4.5,3.7,4.0,3.5,3.6,3.7,2.9,4.0,3.7,4.0,4.2,4.0,3.0,3.5,4.3,2.8],"xaxis":"x","y":[8875.68,16245.55,163033.21,73097.22,30433.38,3944.94,50299.909999999996,271979.62,32815.75,63587.81,69891.58,32768.16,13119.74,29198.53,32292.99,27234.95,235991.11,24069.329999999998,144602.49,85627.37,13783.52,108467.4,9694.08,17368.2,61787.68,34477.88,28488.23,111361.82,110729.68000000001,30393.41,34407.61,30920.14,16930.44,114466.77,28322.95,106080.22,28865.8,110947.27,100960.92,61591.3,12632.98,7147.67,41699.14,82132.0,35917.659999999996,530484.46,38402.51,152803.7,60983.07,15777.59,15396.82,1428.59,12711.53,3255.77,59648.1,41296.32,24942.28,71069.3,7730.93,41207.21,321146.94,39045.29,6161.36,73236.21,24279.98,207825.54,20620.52,18987.760000000002,86617.29,73243.03,13445.03,78183.79,17861.44,64184.200000000004,71504.94,39059.45,31999.46,75180.56,8329.199999999999,41069.12,56281.8,29296.49,25599.93,94491.63,25923.57,42237.61,9961.37,79838.72,24501.59,69778.81,83922.7,8176.4800000000005,605913.26,67902.9,25090.29,5067.56,42437.05,40262.479999999996,87837.83,21838.38,13566.83,17185.31,23129.19,39788.62,27501.39,16435.74,2303.9,22934.38,415368.1,40259.04,21642.93,19065.25,75134.7,75446.9,73500.15,39853.36,20350.5,49395.11,56087.32,196454.63,44737.72,34208.06,30224.98,44701.78,34609.89,39817.55,19214.93,117990.52,35364.78,24357.93,151783.23,56916.68,167280.02,158966.4,61197.1,99389.68,34134.79,38041.06,24830.91,204751.99,59834.96,50719.46,24400.02,63419.79,16163.55,121688.5,28030.43,70247.38,16038.61,29125.25,16597.56,6868.24,113048.73,16828.03,50530.79,43150.12,60715.58,42568.07,53897.23,6590.41,46469.6,18613.78,320914.43,24681.84,27993.72,27934.34,85665.6,76501.62,116496.79,44511.54,117800.01,201472.49,3565.69,41796.27,55247.28,14657.7,29078.14,42221.42,52115.04,11042.54,3425.94,64544.18,92777.59,137118.98,56967.02,86666.19,95969.15,61630.200000000004,12105.9,26257.61,38025.4,106429.04,2678.7799999999997,40055.86,50423.35,28026.45,87447.43000000001,41659.19,38891.37,15691.21,81684.22,10644.39,54757.83,197594.48,77933.02,509698.93,43315.87,97703.65,46298.93,13291.68,120732.98,49128.68,149659.86000000002,20182.76,7314.31,36527.92,25073.75,53650.98,5811.26,49786.15,19008.38,46666.4],"yaxis":"y","type":"scatter"},{"customdata":[["Romance",433,18.23,229,"200-1K"],["Fantasy",208,18.21,2083,"200-1K"],["Narrativa",589,13.59,5334,"200-1K"],["Saggistica",529,12.13,4126,"200-1K"],["Narrativa",518,15.99,11816,"200-1K"],["Storico",453,17.11,4218,"200-1K"],["Bambini",502,21.97,2299,"200-1K"],["Storico",301,20.52,649,"200-1K"],["Bambini",439,21.73,11069,"200-1K"],["Bambini",434,12.11,297,"200-1K"],["Narrativa",321,17.23,1863,"200-1K"],["Storico",474,21.68,107,"200-1K"],["Young Adult",274,16.05,2488,"200-1K"],["Narrativa",565,19.4,2443,"200-1K"],["Narrativa",206,10.8,816,"200-1K"],["Thriller",368,11.29,14442,"200-1K"],["Romance",314,17.14,10801,"200-1K"],["Storico",201,11.9,343,"200-1K"],["Bambini",453,24.25,487,"200-1K"],["Thriller",273,12.02,5020,"200-1K"],["Saggistica",245,10.76,638,"200-1K"],["Storico",259,14.13,566,"200-1K"],["Thriller",404,15.21,3001,"200-1K"],["Bambini",203,13.98,3520,"200-1K"],["Narrativa",380,18.07,4388,"200-1K"],["Thriller",338,19.68,12345,"200-1K"],["Thriller",232,16.62,1091,"200-1K"],["Narrativa",412,16.99,2827,"200-1K"],["Bambini",261,20.86,4855,"200-1K"],["Saggistica",392,19.03,1806,"200-1K"],["Thriller",216,12.77,4210,"200-1K"],["Saggistica",320,20.74,7916,"200-1K"],["Young Adult",252,10.92,2368,"200-1K"],["Narrativa",264,17.67,14779,"200-1K"],["Sci-Fi",233,16.08,1713,"200-1K"],["Narrativa",367,18.98,1212,"200-1K"],["Narrativa",458,11.37,2171,"200-1K"],["Saggistica",424,10.68,2894,"200-1K"],["Thriller",313,23.86,4796,"200-1K"],["Narrativa",293,18.57,5787,"200-1K"],["Narrativa",272,24.22,2170,"200-1K"],["Bambini",293,23.09,658,"200-1K"],["Sci-Fi",206,22.96,1222,"200-1K"],["Narrativa",332,18.64,1101,"200-1K"],["Thriller",482,16.12,4798,"200-1K"],["Thriller",306,18.15,38657,"200-1K"],["Romance",339,12.39,578,"200-1K"],["Bambini",236,18.3,1941,"200-1K"],["Thriller",271,22.61,7416,"200-1K"],["Thriller",258,16.08,4813,"200-1K"],["Sci-Fi",278,16.97,528,"200-1K"],["Fantasy",235,15.27,3397,"200-1K"],["Fantasy",289,14.93,3477,"200-1K"],["Narrativa",321,13.14,1269,"200-1K"],["Saggistica",244,13.5,3463,"200-1K"],["Sci-Fi",348,12.03,1043,"200-1K"],["Romance",314,21.13,3621,"200-1K"],["Storico",516,15.19,1236,"200-1K"],["Saggistica",244,11.79,23595,"200-1K"],["Fantasy",880,14.78,893,"200-1K"],["Narrativa",244,24.12,7367,"200-1K"],["Saggistica",222,21.39,3594,"200-1K"],["Fantasy",218,13.8,3718,"200-1K"],["Narrativa",228,20.96,2370,"200-1K"],["Saggistica",208,18.31,1283,"200-1K"],["Saggistica",243,11.56,1678,"200-1K"],["Thriller",203,17.17,12813,"200-1K"],["Saggistica",331,16.24,598,"200-1K"],["Narrativa",207,11.06,5166,"200-1K"],["Narrativa",358,22.05,204,"200-1K"],["Young Adult",213,23.67,707,"200-1K"],["Saggistica",329,14.28,4150,"200-1K"],["Saggistica",357,20.46,1177,"200-1K"],["Narrativa",258,15.14,3365,"200-1K"],["Sci-Fi",238,14.36,8213,"200-1K"],["Saggistica",419,23.44,2858,"200-1K"],["Saggistica",253,18.64,1999,"200-1K"],["Sci-Fi",225,24.83,734,"200-1K"],["Romance",214,22.74,585,"200-1K"],["Fantasy",317,22.34,3977,"200-1K"],["Bambini",342,16.42,698,"200-1K"],["Narrativa",328,22.59,1766,"200-1K"],["Narrativa",346,24.45,1832,"200-1K"],["Narrativa",834,17.38,3797,"200-1K"],["Narrativa",261,19.96,2160,"200-1K"],["Romance",279,19.37,10975,"200-1K"],["Narrativa",206,18.08,3060,"200-1K"],["Romance",246,19.68,4678,"200-1K"],["Fantasy",292,24.16,1300,"200-1K"],["Sci-Fi",906,18.91,700,"200-1K"],["Young Adult",229,16.99,1101,"200-1K"],["Sci-Fi",216,17.13,2395,"200-1K"],["Storico",215,19.06,1938,"200-1K"],["Narrativa",272,13.65,1305,"200-1K"],["Thriller",299,14.51,5524,"200-1K"],["Narrativa",701,15.73,1793,"200-1K"],["Bambini",212,21.94,737,"200-1K"],["Fantasy",395,11.21,3341,"200-1K"],["Saggistica",397,19.16,1042,"200-1K"],["Storico",814,23.01,858,"200-1K"],["Storico",595,17.3,4156,"200-1K"],["Narrativa",244,26.03,1502,"200-1K"],["Narrativa",426,19.97,7994,"200-1K"],["Storico",272,16.74,1638,"200-1K"],["Storico",226,16.18,1003,"200-1K"],["Storico",273,11.1,264,"200-1K"],["Fantasy",243,15.22,5096,"200-1K"],["Saggistica",486,24.03,1393,"200-1K"],["Narrativa",381,24.78,1958,"200-1K"],["Thriller",319,11.09,986,"200-1K"],["Young Adult",321,16.23,2008,"200-1K"],["Narrativa",298,19.49,1900,"200-1K"],["Poesia",325,8.45,196,"200-1K"],["Fantasy",243,20.84,7000,"200-1K"],["Young Adult",883,19.68,1955,"200-1K"],["Fantasy",341,20.29,10840,"200-1K"],["Saggistica",543,19.99,16041,"200-1K"],["Fantasy",281,14.49,1822,"200-1K"],["Young Adult",555,22.24,1810,"200-1K"],["Poesia",254,18.21,1768,"200-1K"],["Saggistica",287,23.65,3427,"200-1K"],["Fantasy",417,16.36,1984,"200-1K"]],"hovertemplate":"Rating Goodreads=%{x:.1f}\u003cbr\u003eRicavo Totale (EUR)=%{y:,.0f}\u003cbr\u003eGenere=%{customdata[0]}\u003cbr\u003eRecensioni=%{customdata[1]}\u003cbr\u003ePrezzo=%{customdata[2]:.2f}\u003cbr\u003eCopie vendute=%{customdata[3]:,.0f}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"200-1K","marker":{"color":"#e67e22","opacity":0.6,"symbol":"circle","line":{"width":0},"size":8},"mode":"markers","name":"200-1K","orientation":"v","showlegend":true,"x":[3.5,2.9,3.4,3.9,3.5,3.9,4.0,4.1,3.2,3.2,3.6,3.9,3.7,3.8,3.7,4.3,3.8,4.0,3.7,3.5,4.3,4.2,3.3,3.4,4.0,4.3,3.9,3.3,2.8,3.3,4.1,3.0,2.2,4.2,5.0,3.4,3.7,3.4,3.8,3.8,3.3,3.4,3.5,4.3,2.6,4.2,4.5,3.4,4.9,4.1,3.7,4.0,4.1,4.1,4.0,3.5,4.5,3.8,4.4,3.3,4.5,3.2,3.6,4.2,3.7,3.5,3.8,3.6,3.5,3.6,4.4,3.0,3.4,3.2,4.4,3.1,3.5,3.4,4.1,4.1,3.2,3.5,3.8,4.0,4.7,2.9,3.6,4.5,3.0,3.7,3.9,2.8,3.4,3.9,3.2,3.1,4.0,3.5,3.9,4.4,4.6,3.7,4.2,4.0,3.4,3.9,4.1,3.9,4.1,3.7,3.4,3.9,3.4,3.3,4.0,4.2,4.0,4.3,2.8,3.9,3.2,3.0],"xaxis":"x","y":[3465.59,30788.56,59535.07,40640.98,154538.62,58965.32,41331.13,10795.55,199104.38,2967.5299999999997,26217.18,1990.15,32278.2,38637.04,7172.28,129816.38,148351.84,3370.18,9664.88,49504.37,5649.54,6634.74,37966.43,40357.48,64150.31,200058.06,14706.24,39784.63,81963.11,28252.93,43498.44,131999.7,21283.07,213020.69,22665.579999999998,18625.08,20189.74,25311.03,93497.78,88266.0,42464.87,12304.71,23027.71,16768.54,62235.28,573711.47,5842.51,28883.88,136332.67,64256.49,7348.8099999999995,42123.81,41935.39,13469.85,37847.33,10258.619999999999,62338.78,15409.52,227792.81,10685.9,142654.13,62637.41,41874.72,40057.7,19241.95,15665.52,180831.86000000002,7858.55,46927.08,3818.08,13749.9,48584.840000000004,19681.5,41410.159999999996,96451.8,54894.15,30440.07,14962.56,10944.77,71622.05,9451.3,32999.47,36749.63,53872.82,35814.25,173890.32,45467.55,74697.42,26090.38,11015.04,15245.97,33470.31,30449.31,14615.78,65178.2,23170.32,13049.95,30627.96,16042.68,16278.45,58588.3,32299.35,129830.96,22449.98,13040.300000000001,2402.65,63954.44,27252.41,40255.15,8932.52,26678.89,30461.87,1388.27,119431.98,31865.88,181906.96,265297.27999999997,21693.68,32995.24,26136.84,66966.16,26953.92],"yaxis":"y","type":"scatter"},{"customdata":[["Storico",1020,11.46,1874,"\u003e 1K"]],"hovertemplate":"Rating Goodreads=%{x:.1f}\u003cbr\u003eRicavo Totale (EUR)=%{y:,.0f}\u003cbr\u003eGenere=%{customdata[0]}\u003cbr\u003eRecensioni=%{customdata[1]}\u003cbr\u003ePrezzo=%{customdata[2]:.2f}\u003cbr\u003eCopie vendute=%{customdata[3]:,.0f}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"\u003e 1K","marker":{"color":"#e74c3c","opacity":0.6,"symbol":"circle","line":{"width":0},"size":8},"mode":"markers","name":"\u003e 1K","orientation":"v","showlegend":true,"x":[3.6],"xaxis":"x","y":[17621.44],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"#C8D4E3"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""},"bgcolor":"white","radialaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"yaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"zaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"baxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"bgcolor":"white","caxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Rating Goodreads"},"dtick":0.5},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Ricavo Totale (EUR)"}},"legend":{"title":{"text":"N. Recensioni"},"tracegroupgap":0,"font":{"size":11},"orientation":"v","yanchor":"top","y":0.98,"xanchor":"left","x":1.02},"margin":{"t":60},"title":{"text":"\u003cb\u003eIl rating alto non garantisce ricavi: servono le recensioni\u003c\u002fb\u003e\u003cbr\u003e\u003csup\u003eOgni punto = un libro. Colore = volume recensioni. Hover per dettagli.\u003c\u002fsup\u003e","x":0,"xanchor":"left"},"height":550,"width":900},                        {"responsive": true}                    ).then(function(){
                            
<p>var gd = document.getElementById(&#39;1a05f7b9-2ddf-486a-ad34-d20c9530df5d&#39;);
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === &#39;none&#39;) {{
            console.log([gd, &#39;removed!&#39;]);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});</p>
<p>// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest(&#39;#notebook-container&#39;);
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}</p>
<p>// Listen for the clearing of the current output cell
var outputEl = gd.closest(&#39;.output&#39;);
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}</p>
<pre><code class="hljs language-applescript">                    })                };                            &lt;/<span class="hljs-keyword">script</span>&gt;        &lt;/<span class="hljs-keyword">div</span>&gt;</code></pre></body>
</html>
</div>

<h3 id="532-heatmap-stagionalita-per-genere">5.3.2 Heatmap: Stagionalita per genere</h3>
<pre><code class="hljs language-python"><span class="hljs-comment"># ============================================================</span>
<span class="hljs-comment"># 5.3.2 ‚Äî HEATMAP: Vendite per genere e mese</span>
<span class="hljs-comment"># ============================================================</span>
hd = df.groupby([df[<span class="hljs-string">&#x27;data&#x27;</span>].dt.month_name(),<span class="hljs-string">&#x27;genere&#x27;</span>])[<span class="hljs-string">&#x27;copie_vendute&#x27;</span>].<span class="hljs-built_in">sum</span>().reset_index()
hd.columns = [<span class="hljs-string">&#x27;mese&#x27;</span>,<span class="hljs-string">&#x27;genere&#x27;</span>,<span class="hljs-string">&#x27;copie&#x27;</span>]
mo = [<span class="hljs-string">&#x27;January&#x27;</span>,<span class="hljs-string">&#x27;February&#x27;</span>,<span class="hljs-string">&#x27;March&#x27;</span>,<span class="hljs-string">&#x27;April&#x27;</span>,<span class="hljs-string">&#x27;May&#x27;</span>,<span class="hljs-string">&#x27;June&#x27;</span>,<span class="hljs-string">&#x27;July&#x27;</span>,<span class="hljs-string">&#x27;August&#x27;</span>,<span class="hljs-string">&#x27;September&#x27;</span>,<span class="hljs-string">&#x27;October&#x27;</span>,<span class="hljs-string">&#x27;November&#x27;</span>,<span class="hljs-string">&#x27;December&#x27;</span>]
ml = [<span class="hljs-string">&#x27;Gen&#x27;</span>,<span class="hljs-string">&#x27;Feb&#x27;</span>,<span class="hljs-string">&#x27;Mar&#x27;</span>,<span class="hljs-string">&#x27;Apr&#x27;</span>,<span class="hljs-string">&#x27;Mag&#x27;</span>,<span class="hljs-string">&#x27;Giu&#x27;</span>,<span class="hljs-string">&#x27;Lug&#x27;</span>,<span class="hljs-string">&#x27;Ago&#x27;</span>,<span class="hljs-string">&#x27;Set&#x27;</span>,<span class="hljs-string">&#x27;Ott&#x27;</span>,<span class="hljs-string">&#x27;Nov&#x27;</span>,<span class="hljs-string">&#x27;Dic&#x27;</span>]
ph = hd.pivot(index=<span class="hljs-string">&#x27;genere&#x27;</span>,columns=<span class="hljs-string">&#x27;mese&#x27;</span>,values=<span class="hljs-string">&#x27;copie&#x27;</span>)[mo]
pn = ph.div(ph.<span class="hljs-built_in">max</span>(axis=<span class="hljs-number">1</span>),axis=<span class="hljs-number">0</span>)
fig, ax = plt.subplots(figsize=(<span class="hljs-number">14</span>,<span class="hljs-number">7</span>))
sns.heatmap(pn, annot=<span class="hljs-literal">False</span>, cmap=<span class="hljs-string">&#x27;YlOrRd&#x27;</span>, linewidths=<span class="hljs-number">0.5</span>, xticklabels=ml, ax=ax)
ax.set_title(<span class="hljs-string">&quot;Dicembre e&#x27; il mese d&#x27;oro per TUTTI i generi&quot;</span>,fontsize=<span class="hljs-number">12</span>,fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>,loc=<span class="hljs-string">&#x27;left&#x27;</span>,pad=<span class="hljs-number">15</span>)
ax.set_ylabel(<span class="hljs-string">&#x27;&#x27;</span>); ax.set_xlabel(<span class="hljs-string">&#x27;&#x27;</span>)
<span class="hljs-keyword">from</span> matplotlib.patches <span class="hljs-keyword">import</span> Rectangle
ax.add_patch(Rectangle((<span class="hljs-number">11</span>,<span class="hljs-number">0</span>),<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(pn),linewidth=<span class="hljs-number">3</span>,edgecolor=<span class="hljs-string">&#x27;#2c3e50&#x27;</span>,facecolor=<span class="hljs-string">&#x27;none&#x27;</span>))
plt.tight_layout(); plt.show()</code></pre><p><img src="../../../Assets/Notebook/generated/datavis_masterclass_parte1/datavis_masterclass_parte1-output-10.png" alt="Notebook output 10"></p>
<h3 id="533-matrice-di-correlazione">5.3.3 Matrice di correlazione</h3>
<pre><code class="hljs language-python"><span class="hljs-comment"># ============================================================</span>
<span class="hljs-comment"># 5.3.3 ‚Äî CORRELATION MATRIX</span>
<span class="hljs-comment"># ============================================================</span>
lf = df.groupby(<span class="hljs-string">&#x27;libro_id&#x27;</span>).agg(ricavo_totale=(<span class="hljs-string">&#x27;ricavo&#x27;</span>,<span class="hljs-string">&#x27;sum&#x27;</span>),copie_totali=(<span class="hljs-string">&#x27;copie_vendute&#x27;</span>,<span class="hljs-string">&#x27;sum&#x27;</span>)).reset_index().merge(libri,on=<span class="hljs-string">&#x27;libro_id&#x27;</span>)
nc = [<span class="hljs-string">&#x27;prezzo_copertina&#x27;</span>,<span class="hljs-string">&#x27;pagine&#x27;</span>,<span class="hljs-string">&#x27;rating_goodreads&#x27;</span>,<span class="hljs-string">&#x27;n_recensioni&#x27;</span>,<span class="hljs-string">&#x27;ricavo_totale&#x27;</span>,<span class="hljs-string">&#x27;copie_totali&#x27;</span>]
li = [<span class="hljs-string">&#x27;Prezzo&#x27;</span>,<span class="hljs-string">&#x27;Pagine&#x27;</span>,<span class="hljs-string">&#x27;Rating&#x27;</span>,<span class="hljs-string">&#x27;N.Recens.&#x27;</span>,<span class="hljs-string">&#x27;Ricavo&#x27;</span>,<span class="hljs-string">&#x27;Copie&#x27;</span>]
corr = lf[nc].corr()
mask = np.triu(np.ones_like(corr,dtype=<span class="hljs-built_in">bool</span>))
fig, ax = plt.subplots(figsize=(<span class="hljs-number">9</span>,<span class="hljs-number">7</span>))
sns.heatmap(corr,mask=mask,annot=<span class="hljs-literal">True</span>,fmt=<span class="hljs-string">&#x27;.2f&#x27;</span>,cmap=<span class="hljs-string">&#x27;RdBu_r&#x27;</span>,center=<span class="hljs-number">0</span>,vmin=-<span class="hljs-number">1</span>,vmax=<span class="hljs-number">1</span>,square=<span class="hljs-literal">True</span>,
            xticklabels=li,yticklabels=li,linewidths=<span class="hljs-number">1</span>,ax=ax)
ax.set_title(<span class="hljs-string">&#x27;Il n. recensioni e il miglior predittore dei ricavi, non il rating&#x27;</span>,fontsize=<span class="hljs-number">12</span>,fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>,loc=<span class="hljs-string">&#x27;left&#x27;</span>,pad=<span class="hljs-number">15</span>)
plt.tight_layout(); plt.show()</code></pre><p><img src="../../../Assets/Notebook/generated/datavis_masterclass_parte1/datavis_masterclass_parte1-output-11.png" alt="Notebook output 11"></p>
<hr>
<h2 id="54-grafici-di-composizione">5.4 Grafici di composizione</h2>
<p>In questa sezione vediamo:</p>
<ul>
<li>lo stacked bar 100% orizzontale, che mostra la quota dei 3 formati per ogni genere, evidenziando che Sci-Fi e Fantasy guidano il settore digitale.</li>
<li>Il treemap Plotly interattivo visualizza la gerarchia genere ‚Üí collana con colore proporzionale ai ricavi.</li>
<li>Infine una nota critica sul pie chart con un confronto: a sinistra una torta a 2 fette che funziona (Cartaceo vs Digitale), a destra la stessa con 10 generi che diventa illeggibile.</li>
</ul>
<h3 id="541-stacked-bar-100">5.4.1 Stacked Bar 100%</h3>
<pre><code class="hljs language-python"><span class="hljs-comment"># ============================================================</span>
<span class="hljs-comment"># 5.4.1 ‚Äî STACKED BAR 100%: Quota formati per genere</span>
<span class="hljs-comment"># ============================================================</span>
sd = df.groupby([<span class="hljs-string">&#x27;genere&#x27;</span>,<span class="hljs-string">&#x27;formato&#x27;</span>])[<span class="hljs-string">&#x27;ricavo&#x27;</span>].<span class="hljs-built_in">sum</span>().reset_index()
sp = sd.pivot(index=<span class="hljs-string">&#x27;genere&#x27;</span>,columns=<span class="hljs-string">&#x27;formato&#x27;</span>,values=<span class="hljs-string">&#x27;ricavo&#x27;</span>)
spct = sp.div(sp.<span class="hljs-built_in">sum</span>(axis=<span class="hljs-number">1</span>),axis=<span class="hljs-number">0</span>)*<span class="hljs-number">100</span>
spct = spct.sort_values(<span class="hljs-string">&#x27;Ebook&#x27;</span>,ascending=<span class="hljs-literal">True</span>)
fig, ax = plt.subplots(figsize=(<span class="hljs-number">12</span>,<span class="hljs-number">6</span>))
fc = {<span class="hljs-string">&#x27;Cartaceo&#x27;</span>:<span class="hljs-string">&#x27;#2c3e50&#x27;</span>,<span class="hljs-string">&#x27;Ebook&#x27;</span>:<span class="hljs-string">&#x27;#3498db&#x27;</span>,<span class="hljs-string">&#x27;Audiolibro&#x27;</span>:<span class="hljs-string">&#x27;#e74c3c&#x27;</span>}
bot = np.zeros(<span class="hljs-built_in">len</span>(spct))
<span class="hljs-keyword">for</span> fmt <span class="hljs-keyword">in</span> [<span class="hljs-string">&#x27;Cartaceo&#x27;</span>,<span class="hljs-string">&#x27;Ebook&#x27;</span>,<span class="hljs-string">&#x27;Audiolibro&#x27;</span>]:
    v = spct[fmt].values
    ax.barh(spct.index,v,left=bot,label=fmt,color=fc[fmt],height=<span class="hljs-number">0.65</span>,alpha=<span class="hljs-number">0.85</span>)
    <span class="hljs-keyword">for</span> i,(val,b) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(<span class="hljs-built_in">zip</span>(v,bot)):
        <span class="hljs-keyword">if</span> val&gt;<span class="hljs-number">10</span>: ax.text(b+val/<span class="hljs-number">2</span>,i,<span class="hljs-string">f&#x27;<span class="hljs-subst">{val:<span class="hljs-number">.1</span>f}</span>%&#x27;</span>,ha=<span class="hljs-string">&#x27;center&#x27;</span>,va=<span class="hljs-string">&#x27;center&#x27;</span>,fontsize=<span class="hljs-number">9</span>,color=<span class="hljs-string">&#x27;white&#x27;</span>,fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>)
    bot += v
ax.set_title(<span class="hljs-string">&#x27;Sci-Fi e Fantasy guidano la transizione digitale&#x27;</span>,fontsize=<span class="hljs-number">12</span>,fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>,loc=<span class="hljs-string">&#x27;left&#x27;</span>,pad=<span class="hljs-number">15</span>)
ax.legend(loc=<span class="hljs-string">&#x27;lower right&#x27;</span>); ax.set_xlim(<span class="hljs-number">0</span>,<span class="hljs-number">100</span>)
plt.tight_layout(); plt.show()</code></pre><p><img src="../../../Assets/Notebook/generated/datavis_masterclass_parte1/datavis_masterclass_parte1-output-12.png" alt="Notebook output 12"></p>
<h3 id="542-treemap-plotly-interattivo">5.4.2 Treemap (Plotly interattivo)</h3>
<pre><code class="hljs language-python"><span class="hljs-comment"># ============================================================</span>
<span class="hljs-comment"># 5.4.2 ‚Äî TREEMAP</span>
<span class="hljs-comment"># ============================================================</span>
td = df.groupby([<span class="hljs-string">&#x27;genere&#x27;</span>,<span class="hljs-string">&#x27;collana&#x27;</span>])[<span class="hljs-string">&#x27;ricavo&#x27;</span>].<span class="hljs-built_in">sum</span>().reset_index()
fig = px.treemap(td, path=[<span class="hljs-string">&#x27;genere&#x27;</span>,<span class="hljs-string">&#x27;collana&#x27;</span>], values=<span class="hljs-string">&#x27;ricavo&#x27;</span>, color=<span class="hljs-string">&#x27;ricavo&#x27;</span>, color_continuous_scale=<span class="hljs-string">&#x27;RdYlBu_r&#x27;</span>,
                 title=<span class="hljs-string">&#x27;&lt;b&gt;Mappa dei ricavi: Genere &gt; Collana&lt;/b&gt;&#x27;</span>)
fig.update_layout(margin=<span class="hljs-built_in">dict</span>(t=<span class="hljs-number">50</span>,l=<span class="hljs-number">10</span>,r=<span class="hljs-number">10</span>,b=<span class="hljs-number">10</span>), height=<span class="hljs-number">500</span>)
fig.show()</code></pre><div class="notebook-output notebook-html">
<html>
<head><meta charset="utf-8" /></head>
<body>
    <div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>                <div id="f1b5693f-dcec-498d-9b8a-300bf4275df2" class="plotly-graph-div" style="height:500px; width:100%;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("f1b5693f-dcec-498d-9b8a-300bf4275df2")) {                    Plotly.newPlot(                        "f1b5693f-dcec-498d-9b8a-300bf4275df2",                        [{"branchvalues":"total","customdata":[[3877.05],[351702.99],[1739378.42],[350817.51],[79016.38],[114381.61999999998],[88597.74],[1049256.57],[118733.01],[114067.77999999998],[491848.04],[634431.73],[798.26],[251339.65],[295548.08],[42517.51],[129326.12],[842890.3],[58225.28],[412873.33],[426792.15],[977563.94],[18083.94],[73625.54],[259584.06],[225769.88999999998],[252280.53],[604074.76],[208442.5],[96589.61],[854065.64],[1688240.93],[1428.59],[148663.99],[69316.67],[35027.36],[291721.06],[1084389.92],[114760.53],[101131.0],[137309.94],[1355205.74],[26136.84],[149452.72],[296007.07],[243186.09],[1970457.68],[116540.01],[104102.75],[150367.96],[980738.39],[2303.9],[97011.06],[786714.99],[48723.95999999999],[159232.17],[1387892.07],[84073.52],[254632.36],[664012.28],[18197.44],[513449.37],[593676.09],[87170.83],[212434.6],[901559.29],[197516.47],[108622.41],[318066.61],[452191.57],[10573.61],[38559.81],[553442.89],[22311.37],[30130.49],[1120991.8],[73120.05],[239767.09593965052],[497408.4737488944],[1257400.7910756199],[18847.37821832813],[314637.03260114527],[521961.16399203526],[134676.30815077425],[215971.4343596142],[1253202.6257100706],[143209.35349575256]],"domain":{"x":[0.0,1.0],"y":[0.0,1.0]},"hovertemplate":"labels=%{label}\u003cbr\u003ericavo_sum=%{value}\u003cbr\u003eparent=%{parent}\u003cbr\u003eid=%{id}\u003cbr\u003ericavo=%{color}\u003cextra\u003e\u003c\u002fextra\u003e","ids":["Bambini\u002fChrysalide","Fantasy\u002fChrysalide","Narrativa\u002fChrysalide","Romance\u002fChrysalide","Saggistica\u002fChrysalide","Sci-Fi\u002fChrysalide","Storico\u002fChrysalide","Thriller\u002fChrysalide","Young Adult\u002fChrysalide","Bambini\u002fClassici Moderni","Fantasy\u002fClassici Moderni","Narrativa\u002fClassici Moderni","Poesia\u002fClassici Moderni","Romance\u002fClassici Moderni","Saggistica\u002fClassici Moderni","Sci-Fi\u002fClassici Moderni","Storico\u002fClassici Moderni","Thriller\u002fClassici Moderni","Young Adult\u002fClassici Moderni","Bambini\u002fContemporanea","Fantasy\u002fContemporanea","Narrativa\u002fContemporanea","Poesia\u002fContemporanea","Romance\u002fContemporanea","Saggistica\u002fContemporanea","Sci-Fi\u002fContemporanea","Storico\u002fContemporanea","Thriller\u002fContemporanea","Young Adult\u002fContemporanea","Bambini\u002fOmnibus","Fantasy\u002fOmnibus","Narrativa\u002fOmnibus","Poesia\u002fOmnibus","Romance\u002fOmnibus","Saggistica\u002fOmnibus","Sci-Fi\u002fOmnibus","Storico\u002fOmnibus","Thriller\u002fOmnibus","Young Adult\u002fOmnibus","Bambini\u002fOscar Mondadori","Fantasy\u002fOscar Mondadori","Narrativa\u002fOscar Mondadori","Poesia\u002fOscar Mondadori","Romance\u002fOscar Mondadori","Saggistica\u002fOscar Mondadori","Storico\u002fOscar Mondadori","Thriller\u002fOscar Mondadori","Young Adult\u002fOscar Mondadori","Bambini\u002fPiccoli Brividi","Fantasy\u002fPiccoli Brividi","Narrativa\u002fPiccoli Brividi","Poesia\u002fPiccoli Brividi","Romance\u002fPiccoli Brividi","Saggistica\u002fPiccoli Brividi","Sci-Fi\u002fPiccoli Brividi","Storico\u002fPiccoli Brividi","Thriller\u002fPiccoli Brividi","Young Adult\u002fPiccoli Brividi","Fantasy\u002fStrade Blu","Narrativa\u002fStrade Blu","Poesia\u002fStrade Blu","Romance\u002fStrade Blu","Saggistica\u002fStrade Blu","Sci-Fi\u002fStrade Blu","Storico\u002fStrade Blu","Thriller\u002fStrade Blu","Young Adult\u002fStrade Blu","Bambini\u002fVoci","Fantasy\u002fVoci","Narrativa\u002fVoci","Poesia\u002fVoci","Romance\u002fVoci","Saggistica\u002fVoci","Sci-Fi\u002fVoci","Storico\u002fVoci","Thriller\u002fVoci","Young Adult\u002fVoci","Bambini","Fantasy","Narrativa","Poesia","Romance","Saggistica","Sci-Fi","Storico","Thriller","Young Adult"],"labels":["Chrysalide","Chrysalide","Chrysalide","Chrysalide","Chrysalide","Chrysalide","Chrysalide","Chrysalide","Chrysalide","Classici Moderni","Classici Moderni","Classici Moderni","Classici Moderni","Classici Moderni","Classici Moderni","Classici Moderni","Classici Moderni","Classici Moderni","Classici Moderni","Contemporanea","Contemporanea","Contemporanea","Contemporanea","Contemporanea","Contemporanea","Contemporanea","Contemporanea","Contemporanea","Contemporanea","Omnibus","Omnibus","Omnibus","Omnibus","Omnibus","Omnibus","Omnibus","Omnibus","Omnibus","Omnibus","Oscar Mondadori","Oscar Mondadori","Oscar Mondadori","Oscar Mondadori","Oscar Mondadori","Oscar Mondadori","Oscar Mondadori","Oscar Mondadori","Oscar Mondadori","Piccoli Brividi","Piccoli Brividi","Piccoli Brividi","Piccoli Brividi","Piccoli Brividi","Piccoli Brividi","Piccoli Brividi","Piccoli Brividi","Piccoli Brividi","Piccoli Brividi","Strade Blu","Strade Blu","Strade Blu","Strade Blu","Strade Blu","Strade Blu","Strade Blu","Strade Blu","Strade Blu","Voci","Voci","Voci","Voci","Voci","Voci","Voci","Voci","Voci","Voci","Bambini","Fantasy","Narrativa","Poesia","Romance","Saggistica","Sci-Fi","Storico","Thriller","Young Adult"],"marker":{"coloraxis":"coloraxis","colors":[3877.05,351702.99,1739378.42,350817.51,79016.38,114381.61999999998,88597.74,1049256.57,118733.01,114067.77999999998,491848.04,634431.73,798.26,251339.65,295548.08,42517.51,129326.12,842890.3,58225.28,412873.33,426792.15,977563.94,18083.94,73625.54,259584.06,225769.88999999998,252280.53,604074.76,208442.5,96589.61,854065.64,1688240.93,1428.59,148663.99,69316.67,35027.36,291721.06,1084389.92,114760.53,101131.0,137309.94,1355205.74,26136.84,149452.72,296007.07,243186.09,1970457.68,116540.01,104102.75,150367.96,980738.39,2303.9,97011.06,786714.99,48723.95999999999,159232.17,1387892.07,84073.52,254632.36,664012.28,18197.44,513449.37,593676.09,87170.83,212434.6,901559.29,197516.47,108622.41,318066.61,452191.57,10573.61,38559.81,553442.89,22311.37,30130.49,1120991.8,73120.05,239767.09593965052,497408.4737488944,1257400.7910756199,18847.37821832813,314637.03260114527,521961.16399203526,134676.30815077425,215971.4343596142,1253202.6257100706,143209.35349575256]},"name":"","parents":["Bambini","Fantasy","Narrativa","Romance","Saggistica","Sci-Fi","Storico","Thriller","Young Adult","Bambini","Fantasy","Narrativa","Poesia","Romance","Saggistica","Sci-Fi","Storico","Thriller","Young Adult","Bambini","Fantasy","Narrativa","Poesia","Romance","Saggistica","Sci-Fi","Storico","Thriller","Young Adult","Bambini","Fantasy","Narrativa","Poesia","Romance","Saggistica","Sci-Fi","Storico","Thriller","Young Adult","Bambini","Fantasy","Narrativa","Poesia","Romance","Saggistica","Storico","Thriller","Young Adult","Bambini","Fantasy","Narrativa","Poesia","Romance","Saggistica","Sci-Fi","Storico","Thriller","Young Adult","Fantasy","Narrativa","Poesia","Romance","Saggistica","Sci-Fi","Storico","Thriller","Young Adult","Bambini","Fantasy","Narrativa","Poesia","Romance","Saggistica","Sci-Fi","Storico","Thriller","Young Adult","","","","","","","","","",""],"values":[3877.05,351702.99,1739378.42,350817.51,79016.38,114381.62,88597.74,1049256.57,118733.01,114067.78,491848.04,634431.73,798.26,251339.65,295548.08,42517.51,129326.12,842890.3,58225.28,412873.33,426792.15,977563.94,18083.94,73625.54,259584.06,225769.88999999998,252280.53,604074.76,208442.5,96589.61,854065.64,1688240.93,1428.59,148663.99,69316.67,35027.36,291721.06,1084389.92,114760.53,101131.0,137309.94,1355205.74,26136.84,149452.72,296007.07,243186.09,1970457.68,116540.01,104102.75,150367.96,980738.39,2303.9,97011.06,786714.99,48723.96,159232.17,1387892.07,84073.52,254632.36,664012.28,18197.44,513449.37,593676.09,87170.83,212434.6,901559.29,197516.47,108622.41,318066.61,452191.57,10573.61,38559.81,553442.89,22311.37,30130.49,1120991.8,73120.05,941263.93,2984785.69,8491763.0,77522.58,1622919.65,2933306.23,575902.54,1406908.8,8961512.39,971411.37],"type":"treemap"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"coloraxis":{"colorbar":{"title":{"text":"ricavo"}},"colorscale":[[0.0,"rgb(49,54,149)"],[0.1,"rgb(69,117,180)"],[0.2,"rgb(116,173,209)"],[0.3,"rgb(171,217,233)"],[0.4,"rgb(224,243,248)"],[0.5,"rgb(255,255,191)"],[0.6,"rgb(254,224,144)"],[0.7,"rgb(253,174,97)"],[0.8,"rgb(244,109,67)"],[0.9,"rgb(215,48,39)"],[1.0,"rgb(165,0,38)"]]},"legend":{"tracegroupgap":0},"title":{"text":"\u003cb\u003eMappa dei ricavi: Genere \u003e Collana\u003c\u002fb\u003e"},"margin":{"t":50,"l":10,"r":10,"b":10},"height":500},                        {"responsive": true}                    ).then(function(){
                            
<p>var gd = document.getElementById(&#39;f1b5693f-dcec-498d-9b8a-300bf4275df2&#39;);
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === &#39;none&#39;) {{
            console.log([gd, &#39;removed!&#39;]);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});</p>
<p>// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest(&#39;#notebook-container&#39;);
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}</p>
<p>// Listen for the clearing of the current output cell
var outputEl = gd.closest(&#39;.output&#39;);
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}</p>
<pre><code class="hljs language-applescript">                    })                };                            &lt;/<span class="hljs-keyword">script</span>&gt;        &lt;/<span class="hljs-keyword">div</span>&gt;</code></pre></body>
</html>
</div>

<h3 id="nota-sul-pie-chart">Nota sul Pie Chart</h3>
<p>Il <strong>pie chart</strong> e&#39; il grafico piu&#39; criticato. L&#39;occhio umano e&#39; pessimo a confrontare angoli.</p>
<p><strong>Regola:</strong> Se potreste usare un bar chart al suo posto, usate il bar chart. Accettabile solo con 2-3 categorie e una dominante.</p>
<pre><code class="hljs language-python"><span class="hljs-comment"># Pie: quando funziona e quando no</span>
fig, (ax1,ax2) = plt.subplots(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,figsize=(<span class="hljs-number">14</span>,<span class="hljs-number">5</span>))
ax1.pie([<span class="hljs-number">55</span>,<span class="hljs-number">45</span>],labels=[<span class="hljs-string">&#x27;Cartaceo&#x27;</span>,<span class="hljs-string">&#x27;Digitale&#x27;</span>],autopct=<span class="hljs-string">&#x27;%1.0f%%&#x27;</span>,colors=[<span class="hljs-string">&#x27;#2c3e50&#x27;</span>,<span class="hljs-string">&#x27;#3498db&#x27;</span>],startangle=<span class="hljs-number">90</span>,textprops={<span class="hljs-string">&#x27;fontsize&#x27;</span>:<span class="hljs-number">12</span>})
ax1.set_title(<span class="hljs-string">&#x27;OK: 2 categorie, chiaro&#x27;</span>,fontsize=<span class="hljs-number">10</span>,fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>,pad=<span class="hljs-number">15</span>)
rgp = df.groupby(<span class="hljs-string">&#x27;genere&#x27;</span>)[<span class="hljs-string">&#x27;ricavo&#x27;</span>].<span class="hljs-built_in">sum</span>().sort_values()
ax2.pie(rgp.values,labels=rgp.index,autopct=<span class="hljs-string">&#x27;%1.0f%%&#x27;</span>,startangle=<span class="hljs-number">90</span>,textprops={<span class="hljs-string">&#x27;fontsize&#x27;</span>:<span class="hljs-number">8</span>})
ax2.set_title(<span class="hljs-string">&#x27;NO: 10 categorie, illeggibile!&#x27;</span>,fontsize=<span class="hljs-number">10</span>,fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>,pad=<span class="hljs-number">15</span>)
plt.tight_layout(); plt.show()</code></pre><p><img src="../../../Assets/Notebook/generated/datavis_masterclass_parte1/datavis_masterclass_parte1-output-13.png" alt="Notebook output 13"></p>
<hr>
<h2 id="55-grafici-temporali">5.5 Grafici temporali</h2>
<p>Il line chart traccia le vendite mensili per formato con stili diversi (audiolibro in tratteggio rosso), bande gialle semitrasparenti sui Dicembre e titolo che annuncia la triplicazione dell&#39;audiolibro.</p>
<p>Lo stacked area mostra l&#39;evoluzione dei ricavi cumulati per i top 5 generi, rendendo visibile il contributo crescente del Thriller.</p>
<h3 id="551-line-chart">5.5.1 Line Chart</h3>
<pre><code class="hljs language-python"><span class="hljs-comment"># ============================================================</span>
<span class="hljs-comment"># 5.5.1 ‚Äî LINE CHART: Vendite mensili per formato</span>
<span class="hljs-comment"># ============================================================</span>
vm = df.groupby([df[<span class="hljs-string">&#x27;data&#x27;</span>],<span class="hljs-string">&#x27;formato&#x27;</span>])[<span class="hljs-string">&#x27;copie_vendute&#x27;</span>].<span class="hljs-built_in">sum</span>().reset_index()
fig, ax = plt.subplots(figsize=(<span class="hljs-number">14</span>,<span class="hljs-number">6</span>))
<span class="hljs-keyword">for</span> fmt,sty <span class="hljs-keyword">in</span> [(<span class="hljs-string">&#x27;Cartaceo&#x27;</span>,{<span class="hljs-string">&#x27;color&#x27;</span>:<span class="hljs-string">&#x27;#2c3e50&#x27;</span>,<span class="hljs-string">&#x27;lw&#x27;</span>:<span class="hljs-number">2.5</span>,<span class="hljs-string">&#x27;ls&#x27;</span>:<span class="hljs-string">&#x27;-&#x27;</span>}),
                (<span class="hljs-string">&#x27;Ebook&#x27;</span>,{<span class="hljs-string">&#x27;color&#x27;</span>:<span class="hljs-string">&#x27;#3498db&#x27;</span>,<span class="hljs-string">&#x27;lw&#x27;</span>:<span class="hljs-number">2.5</span>,<span class="hljs-string">&#x27;ls&#x27;</span>:<span class="hljs-string">&#x27;-&#x27;</span>}),
                (<span class="hljs-string">&#x27;Audiolibro&#x27;</span>,{<span class="hljs-string">&#x27;color&#x27;</span>:<span class="hljs-string">&#x27;#e74c3c&#x27;</span>,<span class="hljs-string">&#x27;lw&#x27;</span>:<span class="hljs-number">2.5</span>,<span class="hljs-string">&#x27;ls&#x27;</span>:<span class="hljs-string">&#x27;--&#x27;</span>})]:
    s = vm[vm[<span class="hljs-string">&#x27;formato&#x27;</span>]==fmt]
    ax.plot(s[<span class="hljs-string">&#x27;data&#x27;</span>],s[<span class="hljs-string">&#x27;copie_vendute&#x27;</span>]/<span class="hljs-number">1000</span>,label=fmt,color=sty[<span class="hljs-string">&#x27;color&#x27;</span>],linewidth=sty[<span class="hljs-string">&#x27;lw&#x27;</span>],linestyle=sty[<span class="hljs-string">&#x27;ls&#x27;</span>])
<span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> [<span class="hljs-number">2023</span>,<span class="hljs-number">2024</span>]:
    ax.axvspan(pd.Timestamp(<span class="hljs-string">f&#x27;<span class="hljs-subst">{y}</span>-12-01&#x27;</span>),pd.Timestamp(<span class="hljs-string">f&#x27;<span class="hljs-subst">{y}</span>-12-31&#x27;</span>),alpha=<span class="hljs-number">0.1</span>,color=<span class="hljs-string">&#x27;#f39c12&#x27;</span>,label=<span class="hljs-string">&#x27;_nolegend_&#x27;</span>)
ax.set_title(<span class="hljs-string">&quot;L&#x27;audiolibro triplica in 2 anni: il futuro e&#x27; multiformat&quot;</span>,fontsize=<span class="hljs-number">12</span>,fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>,loc=<span class="hljs-string">&#x27;left&#x27;</span>,pad=<span class="hljs-number">15</span>)
ax.set_ylabel(<span class="hljs-string">&#x27;Copie (migliaia)&#x27;</span>); ax.legend(loc=<span class="hljs-string">&#x27;upper left&#x27;</span>)
ax.xaxis.set_major_formatter(mdates.DateFormatter(<span class="hljs-string">&#x27;%b %Y&#x27;</span>)); ax.xaxis.set_major_locator(mdates.MonthLocator(interval=<span class="hljs-number">3</span>))
plt.xticks(rotation=<span class="hljs-number">30</span>); plt.tight_layout(); plt.show()</code></pre><p><img src="../../../Assets/Notebook/generated/datavis_masterclass_parte1/datavis_masterclass_parte1-output-14.png" alt="Notebook output 14"></p>
<h3 id="552-stacked-area-chart">5.5.2 Stacked Area Chart</h3>
<pre><code class="hljs language-python"><span class="hljs-comment"># ============================================================</span>
<span class="hljs-comment"># 5.5.2 ‚Äî STACKED AREA: Ricavi per genere Top 5</span>
<span class="hljs-comment"># ============================================================</span>
t5 = df.groupby(<span class="hljs-string">&#x27;genere&#x27;</span>)[<span class="hljs-string">&#x27;ricavo&#x27;</span>].<span class="hljs-built_in">sum</span>().nlargest(<span class="hljs-number">5</span>).index
rm = (df[df[<span class="hljs-string">&#x27;genere&#x27;</span>].isin(t5)].groupby([df[<span class="hljs-string">&#x27;data&#x27;</span>],<span class="hljs-string">&#x27;genere&#x27;</span>])[<span class="hljs-string">&#x27;ricavo&#x27;</span>].<span class="hljs-built_in">sum</span>().reset_index()
      .pivot(index=<span class="hljs-string">&#x27;data&#x27;</span>,columns=<span class="hljs-string">&#x27;genere&#x27;</span>,values=<span class="hljs-string">&#x27;ricavo&#x27;</span>).fillna(<span class="hljs-number">0</span>)/<span class="hljs-number">1000</span>)
fig, ax = plt.subplots(figsize=(<span class="hljs-number">14</span>,<span class="hljs-number">6</span>))
ax.stackplot(rm.index,[rm[g] <span class="hljs-keyword">for</span> g <span class="hljs-keyword">in</span> rm.columns],labels=rm.columns,
             colors=[<span class="hljs-string">&#x27;#2c3e50&#x27;</span>,<span class="hljs-string">&#x27;#e74c3c&#x27;</span>,<span class="hljs-string">&#x27;#3498db&#x27;</span>,<span class="hljs-string">&#x27;#27ae60&#x27;</span>,<span class="hljs-string">&#x27;#f39c12&#x27;</span>],alpha=<span class="hljs-number">0.7</span>)
ax.set_title(<span class="hljs-string">&#x27;Ricavi in crescita, trainati dal Thriller&#x27;</span>,fontsize=<span class="hljs-number">12</span>,fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>,loc=<span class="hljs-string">&#x27;left&#x27;</span>,pad=<span class="hljs-number">15</span>)
ax.set_ylabel(<span class="hljs-string">&#x27;Ricavi (EUR K)&#x27;</span>); ax.legend(loc=<span class="hljs-string">&#x27;upper left&#x27;</span>)
ax.xaxis.set_major_formatter(mdates.DateFormatter(<span class="hljs-string">&#x27;%b %Y&#x27;</span>)); ax.xaxis.set_major_locator(mdates.MonthLocator(interval=<span class="hljs-number">3</span>))
plt.xticks(rotation=<span class="hljs-number">30</span>); plt.tight_layout(); plt.show()</code></pre><p><img src="../../../Assets/Notebook/generated/datavis_masterclass_parte1/datavis_masterclass_parte1-output-15.png" alt="Notebook output 15"></p>
<hr>
<h1 id="parte-6-tecniche-fondamentali">Parte 6: Tecniche fondamentali</h1>
<h2 id="61-il-potere-delle-annotazioni">6.1 Il potere delle annotazioni</h2>
<p>Si pu√≤ fare un confronto drammatico &quot;prima/dopo&quot; sullo stesso line chart dei ricavi trimestrali.</p>
<ul>
<li>Sopra: il grafico generico con titolo descrittivo &quot;Ricavi Trimestrali (EUR M)&quot;.</li>
<li>Sotto: lo stesso dato con linea target tratteggiata verde, punti colorati verde/rosso sopra/sotto target, frecce annotate su picco e minimo, box verde in alto a destra con le 3 azioni raccomandate, e titolo che dice &quot;Servono strategie anti-stagionalit√† per Q1&quot;.</li>
</ul>
<pre><code class="hljs language-python"><span class="hljs-comment"># ============================================================</span>
<span class="hljs-comment"># 6.1 ‚Äî ANNOTAZIONI: Prima e Dopo</span>
<span class="hljs-comment"># ============================================================</span>
rq = df.groupby(df[<span class="hljs-string">&#x27;data&#x27;</span>].dt.to_period(<span class="hljs-string">&#x27;Q&#x27;</span>))[<span class="hljs-string">&#x27;ricavo&#x27;</span>].<span class="hljs-built_in">sum</span>()/<span class="hljs-number">1e6</span>
rq.index = rq.index.to_timestamp()
fig, (ax1,ax2) = plt.subplots(<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,figsize=(<span class="hljs-number">14</span>,<span class="hljs-number">10</span>),sharex=<span class="hljs-literal">True</span>)

ax1.plot(rq.index,rq.values,<span class="hljs-string">&#x27;o-&#x27;</span>,color=<span class="hljs-string">&#x27;#3498db&#x27;</span>,linewidth=<span class="hljs-number">2</span>)
ax1.set_title(<span class="hljs-string">&#x27;Ricavi Trimestrali (EUR M)&#x27;</span>,fontsize=<span class="hljs-number">13</span>); ax1.set_ylabel(<span class="hljs-string">&#x27;EUR M&#x27;</span>)
ax1.text(<span class="hljs-number">0.5</span>,-<span class="hljs-number">0.05</span>,<span class="hljs-string">&#x27;PRIMA: informativo ma non azionabile&#x27;</span>,transform=ax1.transAxes,ha=<span class="hljs-string">&#x27;center&#x27;</span>,fontsize=<span class="hljs-number">11</span>,color=<span class="hljs-string">&#x27;red&#x27;</span>)

ax2.plot(rq.index,rq.values,<span class="hljs-string">&#x27;o-&#x27;</span>,color=<span class="hljs-string">&#x27;#2c3e50&#x27;</span>,linewidth=<span class="hljs-number">2.5</span>)
tgt = rq.mean()*<span class="hljs-number">1.1</span>
ax2.axhline(tgt,color=<span class="hljs-string">&#x27;#27ae60&#x27;</span>,linestyle=<span class="hljs-string">&#x27;--&#x27;</span>,linewidth=<span class="hljs-number">1.5</span>,alpha=<span class="hljs-number">0.7</span>)
ax2.text(rq.index[-<span class="hljs-number">1</span>],tgt+<span class="hljs-number">0.1</span>,<span class="hljs-string">f&#x27;Target: EUR <span class="hljs-subst">{tgt:<span class="hljs-number">.1</span>f}</span>M&#x27;</span>,fontsize=<span class="hljs-number">9</span>,color=<span class="hljs-string">&#x27;#27ae60&#x27;</span>,fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>,ha=<span class="hljs-string">&#x27;right&#x27;</span>)
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(rq)):
    c = <span class="hljs-string">&#x27;#27ae60&#x27;</span> <span class="hljs-keyword">if</span> rq.values[i]&gt;=tgt <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;#e74c3c&#x27;</span>
    ax2.plot(rq.index[i],rq.values[i],<span class="hljs-string">&#x27;o&#x27;</span>,color=c,markersize=<span class="hljs-number">10</span>,zorder=<span class="hljs-number">5</span>)
ax2.annotate(<span class="hljs-string">f&#x27;Picco: EUR <span class="hljs-subst">{rq.<span class="hljs-built_in">max</span>():<span class="hljs-number">.1</span>f}</span>M&#x27;</span>,xy=(rq.idxmax(),rq.<span class="hljs-built_in">max</span>()),
             xytext=(rq.idxmax()-pd.DateOffset(months=<span class="hljs-number">3</span>),rq.<span class="hljs-built_in">max</span>()+<span class="hljs-number">0.5</span>),
             arrowprops=<span class="hljs-built_in">dict</span>(arrowstyle=<span class="hljs-string">&#x27;-&gt;&#x27;</span>,color=<span class="hljs-string">&#x27;#27ae60&#x27;</span>),fontsize=<span class="hljs-number">10</span>,fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>,color=<span class="hljs-string">&#x27;#27ae60&#x27;</span>)
ax2.annotate(<span class="hljs-string">f&#x27;Minimo: EUR <span class="hljs-subst">{rq.<span class="hljs-built_in">min</span>():<span class="hljs-number">.1</span>f}</span>M&#x27;</span>,xy=(rq.idxmin(),rq.<span class="hljs-built_in">min</span>()),
             xytext=(rq.idxmin()+pd.DateOffset(months=<span class="hljs-number">2</span>),rq.<span class="hljs-built_in">min</span>()-<span class="hljs-number">0.1</span>),
             arrowprops=<span class="hljs-built_in">dict</span>(arrowstyle=<span class="hljs-string">&#x27;-&gt;&#x27;</span>,color=<span class="hljs-string">&#x27;#e74c3c&#x27;</span>),fontsize=<span class="hljs-number">10</span>,fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>,color=<span class="hljs-string">&#x27;#e74c3c&#x27;</span>)
ax2.set_title(<span class="hljs-string">&#x27;Servono strategie anti-stagionalita per Q1&#x27;</span>,fontsize=<span class="hljs-number">13</span>,fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>,loc=<span class="hljs-string">&#x27;left&#x27;</span>,pad=<span class="hljs-number">15</span>)
ax2.set_ylabel(<span class="hljs-string">&#x27;EUR M&#x27;</span>)
ax2.text(<span class="hljs-number">0.9</span>,<span class="hljs-number">0.95</span>,<span class="hljs-string">&#x27;AZIONE: Promozioni Q1, uscite\n thriller anticipate a Gennaio&#x27;</span>,
         transform=ax2.transAxes,fontsize=<span class="hljs-number">9</span>,va=<span class="hljs-string">&#x27;top&#x27;</span>,ha=<span class="hljs-string">&#x27;right&#x27;</span>,
         bbox=<span class="hljs-built_in">dict</span>(boxstyle=<span class="hljs-string">&#x27;round,pad=0.5&#x27;</span>,facecolor=<span class="hljs-string">&#x27;#e8f5e9&#x27;</span>,alpha=<span class="hljs-number">0.9</span>))
ax2.text(<span class="hljs-number">0.5</span>,-<span class="hljs-number">0.1</span>,<span class="hljs-string">&#x27;DOPO: stesso dato, racconta storia + suggerisce azione&#x27;</span>,transform=ax2.transAxes,ha=<span class="hljs-string">&#x27;center&#x27;</span>,fontsize=<span class="hljs-number">11</span>,color=<span class="hljs-string">&#x27;green&#x27;</span>)
<span class="hljs-keyword">for</span> ax <span class="hljs-keyword">in</span> [ax1,ax2]: ax.spines[<span class="hljs-string">&#x27;top&#x27;</span>].set_visible(<span class="hljs-literal">False</span>); ax.spines[<span class="hljs-string">&#x27;right&#x27;</span>].set_visible(<span class="hljs-literal">False</span>)
plt.tight_layout(); plt.show()</code></pre><p><img src="../../../Assets/Notebook/generated/datavis_masterclass_parte1/datavis_masterclass_parte1-output-16.png" alt="Notebook output 16"></p>
<h2 id="62-il-colore-nella-data-visualization">6.2 Il colore nella Data Visualization</h2>
<figure class="table-wrapper" data-enhanced-table><div class="table-wrapper__scroll"><table>
<thead>
<tr>
<th>Tipo</th>
<th>Uso</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Sequenziale</strong></td>
<td>Basso ‚Üí Alto</td>
</tr>
<tr>
<td><strong>Divergente</strong></td>
<td>Negativo ‚Üê Neutro ‚Üí Positivo</td>
</tr>
<tr>
<td><strong>Categorica</strong></td>
<td>Categorie distinte</td>
</tr>
</tbody></table>
</div></figure><p><strong>Regole:</strong> Grigio = default. Max 6-7 colori. Attenzione daltonici (~8% uomini).</p>
<p>Ora vediamo solo un bar chart orizzontale della crescita YoY per genere. Usiamo solo 3 colori con significato semantico: rosso per calo, grigio per crescita moderata, verde per crescita forte (&gt;15%). Le etichette riportano il delta con segno. Questo dimostra il principio &quot;grigio = default, colore solo per evidenziare&quot;.</p>
<pre><code class="hljs language-python"><span class="hljs-comment"># ============================================================</span>
<span class="hljs-comment"># 6.2 ‚Äî COLORE STRATEGICO: Variazione YoY</span>
<span class="hljs-comment"># ============================================================</span>
r23 = df[df[<span class="hljs-string">&#x27;anno&#x27;</span>]==<span class="hljs-number">2023</span>].groupby(<span class="hljs-string">&#x27;genere&#x27;</span>)[<span class="hljs-string">&#x27;ricavo&#x27;</span>].<span class="hljs-built_in">sum</span>()
r24 = df[df[<span class="hljs-string">&#x27;anno&#x27;</span>]==<span class="hljs-number">2024</span>].groupby(<span class="hljs-string">&#x27;genere&#x27;</span>)[<span class="hljs-string">&#x27;ricavo&#x27;</span>].<span class="hljs-built_in">sum</span>()
yoy = ((r24-r23)/r23*<span class="hljs-number">100</span>).sort_values()
fig, ax = plt.subplots(figsize=(<span class="hljs-number">12</span>,<span class="hljs-number">6</span>))
cy = [<span class="hljs-string">&#x27;#e74c3c&#x27;</span> <span class="hljs-keyword">if</span> v&lt;<span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;#bdc3c7&#x27;</span> <span class="hljs-keyword">if</span> v&lt;<span class="hljs-number">15</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;#27ae60&#x27;</span> <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> yoy.values]
bars = ax.barh(yoy.index,yoy.values,color=cy,height=<span class="hljs-number">0.6</span>)
ax.axvline(<span class="hljs-number">0</span>,color=<span class="hljs-string">&#x27;#2c3e50&#x27;</span>,linewidth=<span class="hljs-number">0.8</span>)
<span class="hljs-keyword">for</span> bar,val <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(bars,yoy.values):
    ax.text(val+(<span class="hljs-number">1</span> <span class="hljs-keyword">if</span> val&gt;=<span class="hljs-number">0</span> <span class="hljs-keyword">else</span> -<span class="hljs-number">1</span>), bar.get_y()+bar.get_height()/<span class="hljs-number">2</span>,
            <span class="hljs-string">f&#x27;<span class="hljs-subst">{val:+<span class="hljs-number">.1</span>f}</span>%&#x27;</span>,va=<span class="hljs-string">&#x27;center&#x27;</span>,ha=<span class="hljs-string">&#x27;left&#x27;</span> <span class="hljs-keyword">if</span> val&gt;=<span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;right&#x27;</span>,fontsize=<span class="hljs-number">10</span>,fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>,
            color=<span class="hljs-string">&#x27;#e74c3c&#x27;</span> <span class="hljs-keyword">if</span> val&lt;<span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;#27ae60&#x27;</span> <span class="hljs-keyword">if</span> val&gt;=<span class="hljs-number">15</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;#7f8c8d&#x27;</span>)
ax.set_title(<span class="hljs-string">&#x27;Crescita YoY: Fantasy esplode, Poesia in calo&#x27;</span>,fontsize=<span class="hljs-number">13</span>,fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>,loc=<span class="hljs-string">&#x27;left&#x27;</span>,pad=<span class="hljs-number">15</span>)
<span class="hljs-keyword">for</span> sp <span class="hljs-keyword">in</span> [<span class="hljs-string">&#x27;top&#x27;</span>,<span class="hljs-string">&#x27;right&#x27;</span>,<span class="hljs-string">&#x27;bottom&#x27;</span>,<span class="hljs-string">&#x27;left&#x27;</span>]: ax.spines[sp].set_visible(<span class="hljs-literal">False</span>)
ax.xaxis.set_visible(<span class="hljs-literal">False</span>); ax.tick_params(left=<span class="hljs-literal">False</span>)
plt.tight_layout(); plt.show()</code></pre><p><img src="../../../Assets/Notebook/generated/datavis_masterclass_parte1/datavis_masterclass_parte1-output-17.png" alt="Notebook output 17"></p>
<h2 id="63-small-multiples">6.3 Small Multiples</h2>
<blockquote>
<p><em>&quot;Small multiples are the most effective way to display complex data.&quot;</em> ‚Äî Edward Tufte. Statistico e scultore statunitense.</p>
</blockquote>
<p>Gli small multiples affiancano pi√π grafici identici nella struttura ma diversi nei dati, permettendo confronti istantanei tra categorie. La tentazione √® usare <code>sharey=True</code> per rendere le scale comparabili, ma quando i volumi assoluti sono molto diversi (Thriller a 35k copie, Storico a 3k) si sacrifica la leggibilit√† di tutti i generi minori sull&#39;altare della comparabilit√†.</p>
<p><strong>La scelta qui √® <code>sharey=False</code></strong>: ogni genere ha la sua scala Y, perch√© l&#39;obiettivo non √® confrontare i volumi assoluti (gi√† fatto nel bar chart della sezione 5.1) ma leggere la <strong>dinamica interna</strong> di ciascun genere nel tempo.</p>
<p>La <strong>media mobile a 6 mesi</strong> filtra il rumore stagionale e rivela il trend strutturale. L&#39;<strong>area riempita</strong> mostra i dati mensili grezzi come contesto; la <strong>linea scura</strong> √® il messaggio. La <strong>variazione %</strong> in alto a destra sintetizza in un numero quello che l&#39;occhio gi√† intuisce dalla pendenza.</p>
<p><strong>Regola pratica:</strong> negli small multiples, scegli <code>sharey=True</code> solo se il confronto dei valori assoluti √® la storia principale. Se la storia √® il trend, libera ogni pannello sulla sua scala.</p>
<pre><code class="hljs language-python"><span class="hljs-comment"># ============================================================</span>
<span class="hljs-comment"># 6.3 ‚Äî SMALL MULTIPLES: Trend per genere (fixed)</span>
<span class="hljs-comment"># ============================================================</span>
t6 = df.groupby(<span class="hljs-string">&#x27;genere&#x27;</span>)[<span class="hljs-string">&#x27;ricavo&#x27;</span>].<span class="hljs-built_in">sum</span>().nlargest(<span class="hljs-number">6</span>).index
fig, axes = plt.subplots(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">8</span>), sharey=<span class="hljs-literal">False</span>, sharex=<span class="hljs-literal">True</span>)  <span class="hljs-comment"># sharey=False!</span>

<span class="hljs-keyword">for</span> i, g <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(t6):
    ax = axes.flatten()[i]
    s = (df[df[<span class="hljs-string">&#x27;genere&#x27;</span>] == g]
         .groupby(<span class="hljs-string">&#x27;data&#x27;</span>)[<span class="hljs-string">&#x27;copie_vendute&#x27;</span>].<span class="hljs-built_in">sum</span>()
         .reset_index())
    s[<span class="hljs-string">&#x27;ma6&#x27;</span>] = s[<span class="hljs-string">&#x27;copie_vendute&#x27;</span>].rolling(<span class="hljs-number">6</span>, center=<span class="hljs-literal">True</span>).mean()  <span class="hljs-comment"># 6 mesi, pi√π smooth</span>

    <span class="hljs-comment"># Area = dati raw (contesto), linea = trend smoothed (messaggio)</span>
    ax.fill_between(s[<span class="hljs-string">&#x27;data&#x27;</span>], <span class="hljs-number">0</span>, s[<span class="hljs-string">&#x27;copie_vendute&#x27;</span>] / <span class="hljs-number">1000</span>,
                    alpha=<span class="hljs-number">0.12</span>, color=<span class="hljs-string">&#x27;#3498db&#x27;</span>, label=<span class="hljs-string">&#x27;Mensile&#x27;</span>)
    ax.plot(s[<span class="hljs-string">&#x27;data&#x27;</span>], s[<span class="hljs-string">&#x27;ma6&#x27;</span>] / <span class="hljs-number">1000</span>,
            color=<span class="hljs-string">&#x27;#2c3e50&#x27;</span>, linewidth=<span class="hljs-number">2.5</span>, label=<span class="hljs-string">&#x27;Media 6m&#x27;</span>)

    <span class="hljs-comment"># Variazione % primo vs ultimo valore della MA</span>
    ma_clean = s[<span class="hljs-string">&#x27;ma6&#x27;</span>].dropna()
    delta_pct = (ma_clean.iloc[-<span class="hljs-number">1</span>] - ma_clean.iloc[<span class="hljs-number">0</span>]) / ma_clean.iloc[<span class="hljs-number">0</span>] * <span class="hljs-number">100</span>
    color_delta = <span class="hljs-string">&#x27;#27ae60&#x27;</span> <span class="hljs-keyword">if</span> delta_pct &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;#e74c3c&#x27;</span>
    arrow = <span class="hljs-string">&#x27;‚ñ≤&#x27;</span> <span class="hljs-keyword">if</span> delta_pct &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;‚ñº&#x27;</span>

    ax.set_title(<span class="hljs-string">f&#x27;<span class="hljs-subst">{g}</span>&#x27;</span>, fontsize=<span class="hljs-number">12</span>, fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>, loc=<span class="hljs-string">&#x27;left&#x27;</span>)
    ax.text(<span class="hljs-number">0.98</span>, <span class="hljs-number">0.95</span>, <span class="hljs-string">f&#x27;<span class="hljs-subst">{arrow}</span> <span class="hljs-subst">{<span class="hljs-built_in">abs</span>(delta_pct):<span class="hljs-number">.0</span>f}</span>%&#x27;</span>,
            transform=ax.transAxes, fontsize=<span class="hljs-number">11</span>, fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>,
            color=color_delta, ha=<span class="hljs-string">&#x27;right&#x27;</span>, va=<span class="hljs-string">&#x27;top&#x27;</span>)

    <span class="hljs-comment"># Asse Y con unit√† chiara</span>
    ax.set_ylabel(<span class="hljs-string">&#x27;Copie (k)&#x27;</span>, fontsize=<span class="hljs-number">8</span>)
    ax.spines[<span class="hljs-string">&#x27;top&#x27;</span>].set_visible(<span class="hljs-literal">False</span>)
    ax.spines[<span class="hljs-string">&#x27;right&#x27;</span>].set_visible(<span class="hljs-literal">False</span>)
    ax.xaxis.set_major_formatter(mdates.DateFormatter(<span class="hljs-string">&#x27;%b\n%y&#x27;</span>))
    ax.xaxis.set_major_locator(mdates.MonthLocator(interval=<span class="hljs-number">6</span>))
    ax.tick_params(labelsize=<span class="hljs-number">8</span>)

<span class="hljs-comment"># Legenda unica in alto</span>
axes[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>].legend(fontsize=<span class="hljs-number">8</span>, loc=<span class="hljs-string">&#x27;upper left&#x27;</span>, frameon=<span class="hljs-literal">False</span>)

plt.suptitle(<span class="hljs-string">&#x27;Trend vendite per genere ‚Äî variazione % sull\&#x27;intero periodo&#x27;</span>,
             fontsize=<span class="hljs-number">14</span>, fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>, y=<span class="hljs-number">1.02</span>)
plt.tight_layout()
plt.show()</code></pre><p><img src="../../../Assets/Notebook/generated/datavis_masterclass_parte1/datavis_masterclass_parte1-output-18.png" alt="Notebook output 18"></p>
<h2 id="64-grafici-interattivi-con-plotly">6.4 Grafici interattivi con Plotly</h2>
<pre><code class="hljs language-python"><span class="hljs-comment"># ============================================================</span>
<span class="hljs-comment"># 6.4 ‚Äî PLOTLY INTERATTIVO</span>
<span class="hljs-comment"># ============================================================</span>
lpx = (df.groupby([<span class="hljs-string">&#x27;libro_id&#x27;</span>,<span class="hljs-string">&#x27;genere&#x27;</span>,<span class="hljs-string">&#x27;collana&#x27;</span>,<span class="hljs-string">&#x27;rating_goodreads&#x27;</span>,<span class="hljs-string">&#x27;n_recensioni&#x27;</span>,<span class="hljs-string">&#x27;prezzo_copertina&#x27;</span>,<span class="hljs-string">&#x27;anno_pubblicazione&#x27;</span>])
       .agg(ricavo_totale=(<span class="hljs-string">&#x27;ricavo&#x27;</span>,<span class="hljs-string">&#x27;sum&#x27;</span>),copie_totali=(<span class="hljs-string">&#x27;copie_vendute&#x27;</span>,<span class="hljs-string">&#x27;sum&#x27;</span>)).reset_index())
fig = px.scatter(lpx, x=<span class="hljs-string">&#x27;n_recensioni&#x27;</span>, y=<span class="hljs-string">&#x27;ricavo_totale&#x27;</span>, color=<span class="hljs-string">&#x27;genere&#x27;</span>, size=<span class="hljs-string">&#x27;copie_totali&#x27;</span>, size_max=<span class="hljs-number">25</span>,
    hover_data=[<span class="hljs-string">&#x27;collana&#x27;</span>,<span class="hljs-string">&#x27;prezzo_copertina&#x27;</span>,<span class="hljs-string">&#x27;rating_goodreads&#x27;</span>,<span class="hljs-string">&#x27;anno_pubblicazione&#x27;</span>],
    title=<span class="hljs-string">&#x27;&lt;b&gt;Esplora il catalogo: ogni punto e un libro&lt;/b&gt;&lt;br&gt;&lt;i&gt;Dimensione = copie. Hover per dettagli.&lt;/i&gt;&#x27;</span>,
    labels={<span class="hljs-string">&#x27;n_recensioni&#x27;</span>:<span class="hljs-string">&#x27;N. Recensioni&#x27;</span>,<span class="hljs-string">&#x27;ricavo_totale&#x27;</span>:<span class="hljs-string">&#x27;Ricavo (EUR)&#x27;</span>,<span class="hljs-string">&#x27;genere&#x27;</span>:<span class="hljs-string">&#x27;Genere&#x27;</span>}, opacity=<span class="hljs-number">0.6</span>)
fig.update_layout(height=<span class="hljs-number">550</span>,template=<span class="hljs-string">&#x27;plotly_white&#x27;</span>,
    legend=<span class="hljs-built_in">dict</span>(orientation=<span class="hljs-string">&quot;h&quot;</span>,yanchor=<span class="hljs-string">&quot;bottom&quot;</span>,y=-<span class="hljs-number">0.25</span>,xanchor=<span class="hljs-string">&quot;center&quot;</span>,x=<span class="hljs-number">0.5</span>))
fig.show()</code></pre><div class="notebook-output notebook-html">
<html>
<head><meta charset="utf-8" /></head>
<body>
    <div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>                <div id="c9292490-4023-40c0-9a77-de3ede402def" class="plotly-graph-div" style="height:550px; width:100%;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("c9292490-4023-40c0-9a77-de3ede402def")) {                    Plotly.newPlot(                        "c9292490-4023-40c0-9a77-de3ede402def",                        [{"customdata":[["Piccoli Brividi",24.09,3.1,2020],["Strade Blu",16.28,3.3,2024],["Omnibus",25.36,3.7,2024],["Strade Blu",18.29,3.5,2020],["Strade Blu",22.8,3.6,2022],["Voci",21.48,2.9,2023],["Piccoli Brividi",15.34,2.8,2018],["Contemporanea",19.11,3.3,2024],["Chrysalide",14.53,4.7,2020],["Oscar Mondadori",20.76,3.1,2024],["Omnibus",23.02,3.9,2024],["Omnibus",26.29,3.6,2024],["Piccoli Brividi",21.49,5.0,2024],["Piccoli Brividi",11.29,4.3,2024],["Omnibus",15.82,3.2,2020],["Piccoli Brividi",15.17,3.4,2023],["Oscar Mondadori",17.97,4.4,2022],["Chrysalide",23.29,4.0,2021],["Chrysalide",12.02,3.5,2021],["Piccoli Brividi",15.21,3.3,2023],["Oscar Mondadori",25.84,3.2,2024],["Contemporanea",19.68,4.3,2023],["Piccoli Brividi",16.62,3.9,2018],["Strade Blu",11.75,3.6,2023],["Classici Moderni",15.18,3.5,2020],["Contemporanea",27.08,3.8,2020],["Chrysalide",14.16,4.0,2019],["Oscar Mondadori",26.93,3.3,2024],["Classici Moderni",16.65,3.2,2022],["Chrysalide",12.77,4.1,2023],["Oscar Mondadori",20.15,3.1,2019],["Omnibus",12.78,3.8,2018],["Oscar Mondadori",22.57,3.8,2024],["Chrysalide",18.45,3.8,2021],["Voci",13.63,4.1,2023],["Omnibus",21.63,3.9,2022],["Classici Moderni",23.86,3.8,2024],["Voci",16.34,3.7,2023],["Piccoli Brividi",14.27,4.1,2020],["Voci",14.83,3.0,2020],["Voci",11.97,3.8,2023],["Strade Blu",12.63,3.8,2021],["Omnibus",21.72,3.4,2018],["Piccoli Brividi",16.12,2.6,2022],["Oscar Mondadori",25.84,3.1,2022],["Piccoli Brividi",15.46,3.4,2024],["Classici Moderni",13.4,3.1,2021],["Oscar Mondadori",18.15,4.2,2018],["Piccoli Brividi",21.04,3.7,2021],["Voci",25.45,3.2,2019],["Oscar Mondadori",25.44,3.2,2024],["Classici Moderni",25.58,3.2,2023],["Classici Moderni",22.61,4.9,2021],["Piccoli Brividi",16.08,4.1,2023],["Strade Blu",24.44,3.6,2024],["Omnibus",21.64,3.1,2024],["Strade Blu",21.13,3.0,2018],["Classici Moderni",25.01,4.5,2023],["Oscar Mondadori",14.64,3.7,2021],["Chrysalide",15.93,4.3,2019],["Oscar Mondadori",26.37,4.3,2023],["Voci",17.17,3.8,2022],["Chrysalide",12.72,3.7,2023],["Contemporanea",24.17,4.0,2022],["Piccoli Brividi",15.92,3.0,2018],["Omnibus",19.81,3.9,2024],["Piccoli Brividi",12.49,4.6,2024],["Classici Moderni",25.61,3.5,2021],["Voci",24.0,4.7,2024],["Piccoli Brividi",21.93,3.4,2024],["Piccoli Brividi",18.0,4.1,2023],["Omnibus",22.48,3.8,2023],["Strade Blu",17.24,4.2,2021],["Oscar Mondadori",21.35,4.1,2024],["Voci",13.2,4.3,2023],["Omnibus",26.92,4.0,2021],["Strade Blu",14.51,3.2,2023],["Strade Blu",12.67,4.0,2020],["Chrysalide",19.35,2.8,2024],["Oscar Mondadori",12.77,4.1,2024],["Classici Moderni",16.59,3.6,2023],["Piccoli Brividi",25.86,4.0,2024],["Chrysalide",12.78,3.8,2022],["Contemporanea",17.23,3.9,2023],["Piccoli Brividi",23.29,3.4,2024],["Piccoli Brividi",11.99,4.0,2021],["Strade Blu",19.7,4.0,2019],["Chrysalide",11.09,3.7,2023],["Oscar Mondadori",24.07,3.8,2023],["Classici Moderni",16.15,2.9,2024],["Omnibus",20.81,4.5,2023]],"hovertemplate":"Genere=Thriller\u003cbr\u003eN. Recensioni=%{x}\u003cbr\u003eRicavo (EUR)=%{y}\u003cbr\u003ecopie_totali=%{marker.size}\u003cbr\u003ecollana=%{customdata[0]}\u003cbr\u003eprezzo_copertina=%{customdata[1]}\u003cbr\u003erating_goodreads=%{customdata[2]}\u003cbr\u003eanno_pubblicazione=%{customdata[3]}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"Thriller","marker":{"color":"#636efa","opacity":0.6,"size":[3657,3014,13116,4695,1772,13536,13555,6902,2360,6549,5838,6997,1960,14442,8686,8245,4259,27710,5020,3001,13581,12345,1091,33491,2136,1790,6369,9527,13243,4210,1596,1238,4033,5134,1596,1815,4796,1932,8142,2139,8127,2337,3935,4798,2012,3186,3679,38657,1591,1399,5679,3600,7416,4813,2794,2529,2020,7431,4839,2639,2791,12813,1049,2987,6002,6948,5620,2802,23772,10219,5934,2445,8528,11501,5057,3534,5524,6318,8634,9339,4566,1922,5279,14020,4134,2052,4608,986,3026,1615,2711],"sizemode":"area","sizeref":87.104,"symbol":"circle"},"mode":"markers","name":"Thriller","orientation":"v","showlegend":true,"x":[8,29,77,82,63,52,43,183,132,181,170,5,131,368,192,133,142,167,273,404,33,338,232,157,9,51,53,101,16,216,26,30,173,55,108,55,313,104,169,86,177,190,197,482,122,80,79,306,149,18,34,123,271,258,99,73,117,64,69,185,5,203,32,25,33,106,31,31,46,5,164,128,59,79,56,39,299,130,184,62,112,169,91,165,141,82,13,319,10,13,35],"xaxis":"x","y":[71281.13,40328.04,271979.62,69891.58,32768.16,235991.11,169547.68,108467.4,28488.23,111361.82,110729.68000000001,150444.54,34407.61,129816.38,110947.27,100960.92,61591.3,530484.46,49504.37,37966.43,283714.2,200058.06,14706.24,321146.94,26353.25,39045.29,73236.21,207825.54,178917.57,43498.44,26238.31,13072.02,73243.03,78183.79,17861.44,31999.46,93497.78,25599.93,94491.63,25923.57,79838.72,24501.59,69778.81,62235.28,42437.05,40262.479999999996,39788.62,573711.47,27501.39,29042.29,116236.67,75446.9,136332.67,64256.49,56087.32,44701.78,34609.89,151783.23,56916.68,34134.79,59997.020000000004,180831.86000000002,10916.95,58909.53,76973.99,113048.73,57088.7,57931.09,470655.6,182558.48,85665.6,44511.54,117800.01,201472.49,55247.28,77704.58,65178.2,64544.18,137118.98,95969.15,61630.200000000004,40055.86,54757.83,197594.48,77933.02,20182.76,74703.38,8932.52,59742.95,21208.99,45471.89],"yaxis":"y","type":"scatter"},{"customdata":[["Classici Moderni",12.96,3.6,2024],["Omnibus",10.43,4.5,2022],["Oscar Mondadori",18.72,3.6,2021],["Strade Blu",21.67,2.7,2024],["Omnibus",16.05,3.7,2022],["Oscar Mondadori",18.38,4.2,2021],["Piccoli Brividi",16.86,2.9,2024],["Voci",10.92,2.2,2022],["Classici Moderni",11.15,4.0,2023],["Chrysalide",17.81,3.6,2024],["Piccoli Brividi",22.77,3.2,2020],["Strade Blu",22.19,2.4,2024],["Contemporanea",22.29,3.7,2024],["Classici Moderni",22.87,4.7,2022],["Omnibus",23.67,4.4,2022],["Omnibus",22.34,3.8,2024],["Contemporanea",14.65,3.7,2019],["Strade Blu",16.99,3.9,2024],["Strade Blu",14.3,3.4,2020],["Omnibus",23.88,4.3,2022],["Strade Blu",20.2,4.6,2023],["Voci",11.72,4.1,2024],["Contemporanea",23.44,4.1,2024],["Oscar Mondadori",16.23,3.4,2021],["Strade Blu",17.19,3.9,2020],["Voci",18.28,4.2,2023],["Piccoli Brividi",19.68,4.0,2024],["Oscar Mondadori",22.24,2.8,2024],["Contemporanea",15.52,3.1,2024],["Classici Moderni",12.4,4.3,2023]],"hovertemplate":"Genere=Young Adult\u003cbr\u003eN. Recensioni=%{x}\u003cbr\u003eRicavo (EUR)=%{y}\u003cbr\u003ecopie_totali=%{marker.size}\u003cbr\u003ecollana=%{customdata[0]}\u003cbr\u003eprezzo_copertina=%{customdata[1]}\u003cbr\u003erating_goodreads=%{customdata[2]}\u003cbr\u003eanno_pubblicazione=%{customdata[3]}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"Young Adult","marker":{"color":"#EF553B","opacity":0.6,"size":[835,2407,2129,3517,2488,1609,1836,2368,1782,8196,1431,1122,3869,1315,707,918,6404,1101,4810,1654,636,2810,2374,2008,2321,1680,1955,1810,1377,835],"sizemode":"area","sizeref":87.104,"symbol":"circle"},"mode":"markers","name":"Young Adult","orientation":"v","showlegend":true,"x":[70,48,11,136,274,104,8,252,114,10,5,192,11,166,213,56,58,229,73,38,183,5,5,321,35,200,883,555,46,15],"xaxis":"x","y":[8875.68,20152.36,32585.9,61787.68,32278.2,24279.98,25416.46,21283.07,16435.74,118733.01,26791.18,20350.5,69494.63,24400.02,13749.9,16597.56,76501.62,15245.97,56967.02,31982.51,10644.39,26763.23,45014.17,26678.89,32520.91,25073.75,31865.88,32995.24,17432.08,8513.84],"yaxis":"y","type":"scatter"},{"customdata":[["Oscar Mondadori",18.23,3.5,2023],["Voci",9.98,3.3,2024],["Oscar Mondadori",18.6,3.1,2023],["Contemporanea",22.28,3.4,2024],["Oscar Mondadori",12.67,4.0,2023],["Omnibus",15.33,3.5,2024],["Oscar Mondadori",22.99,2.6,2024],["Classici Moderni",17.14,3.8,2023],["Strade Blu",19.71,3.3,2021],["Strade Blu",18.05,4.6,2024],["Chrysalide",17.17,3.5,2022],["Voci",22.0,3.4,2024],["Classici Moderni",12.37,3.7,2021],["Chrysalide",16.67,3.3,2021],["Strade Blu",22.23,2.5,2020],["Piccoli Brividi",15.84,4.3,2018],["Chrysalide",20.34,4.0,2023],["Strade Blu",21.8,3.0,2021],["Strade Blu",22.76,3.4,2022],["Oscar Mondadori",12.66,3.9,2023],["Chrysalide",12.39,4.5,2023],["Contemporanea",22.32,4.3,2024],["Classici Moderni",16.66,3.8,2021],["Chrysalide",21.13,4.5,2023],["Omnibus",20.19,3.6,2022],["Strade Blu",16.81,3.3,2024],["Chrysalide",22.78,4.5,2024],["Contemporanea",24.34,3.9,2021],["Omnibus",20.8,4.7,2018],["Oscar Mondadori",14.12,3.4,2022],["Piccoli Brividi",14.4,3.9,2020],["Classici Moderni",22.74,4.1,2024],["Strade Blu",19.37,2.9,2024],["Chrysalide",19.68,4.5,2023],["Oscar Mondadori",21.05,3.1,2024],["Omnibus",17.51,3.4,2018],["Strade Blu",9.92,5.0,2024],["Voci",13.76,4.0,2022],["Omnibus",16.35,4.0,2021]],"hovertemplate":"Genere=Romance\u003cbr\u003eN. Recensioni=%{x}\u003cbr\u003eRicavo (EUR)=%{y}\u003cbr\u003ecopie_totali=%{marker.size}\u003cbr\u003ecollana=%{customdata[0]}\u003cbr\u003eprezzo_copertina=%{customdata[1]}\u003cbr\u003erating_goodreads=%{customdata[2]}\u003cbr\u003eanno_pubblicazione=%{customdata[3]}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"Romance","marker":{"color":"#00cc96","opacity":0.6,"size":[229,1771,1564,758,1194,2262,666,10801,1341,1548,2609,456,2906,3077,4579,5212,435,902,272,1653,578,1692,4630,3621,2147,11016,6551,1473,1205,974,2446,585,10975,4678,3909,778,4924,1393,4071],"sizemode":"area","sizeref":87.104,"symbol":"circle"},"mode":"markers","name":"Romance","orientation":"v","showlegend":true,"x":[433,16,137,169,5,85,152,314,5,17,43,65,120,141,108,140,40,37,143,181,339,30,10,314,122,22,159,189,47,41,47,214,279,246,41,35,156,151,146],"xaxis":"x","y":[3465.59,14539.4,24069.329999999998,13783.52,12395.09,28322.95,12632.98,148351.84,21691.83,22734.05,36747.25,8329.199999999999,29296.49,42237.61,83922.7,67902.9,7265.44,16316.21,5067.56,17185.31,5842.51,30716.77,62746.55,62338.78,35364.78,150935.33,121688.5,29125.25,20451.6,11306.6,29108.16,10944.77,173890.32,74697.42,68397.82,10873.68,38891.37,15691.21,53650.98],"yaxis":"y","type":"scatter"},{"customdata":[["Oscar Mondadori",20.9,4.1,2022],["Chrysalide",18.21,2.9,2024],["Classici Moderni",24.85,4.0,2020],["Omnibus",20.33,4.0,2024],["Classici Moderni",19.19,4.0,2024],["Oscar Mondadori",16.5,4.7,2022],["Omnibus",17.67,4.3,2023],["Voci",22.53,5.0,2022],["Classici Moderni",11.11,4.0,2024],["Strade Blu",11.93,2.2,2024],["Classici Moderni",16.65,4.2,2022],["Classici Moderni",13.28,3.6,2022],["Omnibus",24.09,3.2,2021],["Strade Blu",22.65,3.9,2023],["Contemporanea",17.59,2.8,2020],["Oscar Mondadori",12.92,3.3,2022],["Oscar Mondadori",21.48,4.1,2024],["Voci",17.37,3.6,2024],["Omnibus",12.96,4.2,2023],["Omnibus",18.56,3.4,2022],["Omnibus",12.01,3.5,2023],["Strade Blu",23.31,3.9,2024],["Contemporanea",17.48,4.1,2023],["Omnibus",24.66,3.3,2020],["Oscar Mondadori",12.33,3.5,2021],["Strade Blu",15.27,4.0,2023],["Voci",14.93,4.1,2021],["Classici Moderni",20.58,3.9,2021],["Classici Moderni",14.78,3.3,2024],["Classici Moderni",14.09,3.1,2019],["Oscar Mondadori",13.09,4.0,2022],["Omnibus",13.8,3.6,2024],["Piccoli Brividi",16.61,3.8,2024],["Oscar Mondadori",22.99,3.9,2022],["Omnibus",11.59,3.7,2023],["Contemporanea",12.68,3.8,2020],["Contemporanea",11.08,3.5,2021],["Omnibus",10.42,3.6,2022],["Chrysalide",22.37,4.4,2020],["Contemporanea",11.62,3.4,2024],["Classici Moderni",23.54,4.2,2020],["Piccoli Brividi",22.34,4.1,2021],["Contemporanea",24.16,3.0,2019],["Voci",15.86,3.2,2024],["Strade Blu",11.21,3.5,2020],["Piccoli Brividi",22.26,3.5,2023],["Omnibus",15.22,4.1,2018],["Omnibus",23.01,3.7,2023],["Contemporanea",11.71,3.5,2024],["Voci",20.84,3.3,2021],["Contemporanea",20.29,4.2,2024],["Oscar Mondadori",14.03,3.0,2018],["Classici Moderni",14.49,4.3,2023],["Classici Moderni",16.36,3.0,2024],["Voci",20.48,3.4,2020]],"hovertemplate":"Genere=Fantasy\u003cbr\u003eN. Recensioni=%{x}\u003cbr\u003eRicavo (EUR)=%{y}\u003cbr\u003ecopie_totali=%{marker.size}\u003cbr\u003ecollana=%{customdata[0]}\u003cbr\u003eprezzo_copertina=%{customdata[1]}\u003cbr\u003erating_goodreads=%{customdata[2]}\u003cbr\u003eanno_pubblicazione=%{customdata[3]}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"Fantasy","marker":{"color":"#ab63fa","opacity":0.6,"size":[960,2083,1620,6147,2038,510,1993,2309,6989,3710,1135,1754,3301,3895,5237,2752,565,843,1283,1809,2218,3856,2250,20338,1927,3397,3477,2033,893,14676,762,3718,3713,2235,709,636,6002,2191,17716,2924,3513,3977,1300,6634,3341,1531,5096,2611,2325,7000,10840,507,1822,1984,923],"sizemode":"area","sizeref":87.104,"symbol":"circle"},"mode":"markers","name":"Fantasy","orientation":"v","showlegend":true,"x":[153,208,200,46,160,25,85,41,5,139,110,159,115,66,59,16,167,5,27,16,116,28,18,176,81,235,289,94,880,69,5,218,109,36,82,177,37,162,180,84,45,317,292,136,395,104,243,134,8,243,341,93,281,417,39],"xaxis":"x","y":[16245.55,30788.56,32815.75,102363.6,32292.99,6792.3099999999995,28865.8,42534.42,62839.28,35917.659999999996,15777.59,18987.760000000002,64184.200000000004,71504.94,75180.56,29189.52,9961.37,12078.19,13499.75,27505.95,21838.38,74457.99,32152.7,415368.1,19065.25,42123.81,41935.39,34208.06,10685.9,167280.02,8117.82,41874.72,50719.46,42126.86,6868.24,6590.41,54265.42,18613.78,320914.43,27993.72,68313.09,71622.05,26090.38,86666.19,30627.96,28026.45,63954.44,49128.68,22612.0,119431.98,181906.96,5811.26,21693.68,26953.92,15420.44],"yaxis":"y","type":"scatter"},{"customdata":[["Oscar Mondadori",20.1,4.4,2020],["Omnibus",13.36,4.4,2024],["Chrysalide",15.99,3.4,2023],["Omnibus",22.38,4.2,2020],["Contemporanea",13.59,3.4,2024],["Omnibus",25.48,3.7,2018],["Piccoli Brividi",16.19,3.8,2023],["Oscar Mondadori",16.19,3.7,2024],["Strade Blu",16.56,3.6,2021],["Omnibus",10.45,3.6,2023],["Voci",15.99,3.5,2023],["Oscar Mondadori",22.9,4.3,2021],["Classici Moderni",11.41,3.1,2022],["Omnibus",19.23,4.6,2020],["Classici Moderni",21.05,4.0,2023],["Oscar Mondadori",15.66,3.5,2024],["Voci",15.56,2.4,2024],["Classici Moderni",17.23,3.6,2024],["Piccoli Brividi",11.79,4.3,2023],["Omnibus",20.41,3.8,2023],["Omnibus",12.26,4.2,2019],["Strade Blu",16.44,3.5,2018],["Strade Blu",19.4,3.8,2022],["Oscar Mondadori",10.8,3.7,2022],["Oscar Mondadori",23.5,3.7,2023],["Chrysalide",25.21,3.4,2020],["Chrysalide",17.61,3.7,2018],["Piccoli Brividi",22.45,3.6,2023],["Contemporanea",12.89,4.3,2023],["Contemporanea",20.0,4.0,2019],["Contemporanea",14.28,3.9,2019],["Oscar Mondadori",14.32,3.0,2023],["Omnibus",18.07,4.0,2021],["Classici Moderni",16.87,4.1,2022],["Piccoli Brividi",25.57,3.6,2018],["Piccoli Brividi",16.99,3.3,2018],["Piccoli Brividi",12.78,3.6,2021],["Contemporanea",23.79,4.0,2018],["Chrysalide",23.94,4.4,2021],["Omnibus",17.67,4.2,2023],["Piccoli Brividi",18.98,3.4,2024],["Contemporanea",11.37,3.7,2024],["Contemporanea",17.63,3.5,2023],["Classici Moderni",14.47,4.3,2018],["Contemporanea",18.57,3.8,2021],["Voci",24.22,3.3,2024],["Contemporanea",17.7,4.1,2021],["Strade Blu",18.64,4.3,2023],["Chrysalide",14.92,3.7,2020],["Piccoli Brividi",20.39,3.5,2022],["Omnibus",22.96,4.0,2023],["Oscar Mondadori",24.81,3.6,2020],["Omnibus",18.79,3.5,2024],["Oscar Mondadori",20.7,4.0,2024],["Strade Blu",20.39,3.1,2024],["Voci",17.13,4.0,2023],["Contemporanea",10.59,4.0,2024],["Classici Moderni",11.64,4.1,2022],["Omnibus",17.63,3.7,2024],["Contemporanea",13.14,4.1,2023],["Classici Moderni",11.98,4.0,2024],["Oscar Mondadori",23.58,3.8,2020],["Piccoli Brividi",20.52,3.4,2024],["Oscar Mondadori",10.92,3.1,2023],["Omnibus",15.18,3.8,2024],["Chrysalide",24.12,4.5,2024],["Oscar Mondadori",20.86,3.1,2018],["Strade Blu",24.69,3.9,2018],["Classici Moderni",20.96,4.2,2024],["Strade Blu",11.06,3.5,2024],["Oscar Mondadori",22.05,3.6,2024],["Voci",24.74,3.6,2020],["Strade Blu",22.27,3.5,2022],["Classici Moderni",10.59,4.1,2022],["Voci",17.78,3.1,2024],["Chrysalide",15.14,3.2,2024],["Piccoli Brividi",19.82,3.9,2023],["Piccoli Brividi",11.15,3.7,2021],["Classici Moderni",20.92,4.1,2023],["Classici Moderni",14.16,3.7,2021],["Piccoli Brividi",18.61,3.6,2024],["Strade Blu",11.39,3.4,2024],["Chrysalide",19.82,4.4,2022],["Oscar Mondadori",22.59,3.5,2021],["Strade Blu",19.88,4.0,2020],["Classici Moderni",24.45,3.8,2024],["Contemporanea",17.38,4.0,2024],["Voci",19.96,4.7,2024],["Contemporanea",19.72,4.5,2023],["Omnibus",18.47,3.0,2022],["Piccoli Brividi",18.08,3.6,2024],["Chrysalide",11.51,3.5,2023],["Contemporanea",13.65,3.9,2024],["Omnibus",15.73,3.1,2024],["Strade Blu",19.4,3.9,2018],["Contemporanea",26.03,3.7,2023],["Voci",14.72,3.3,2023],["Classici Moderni",21.64,2.9,2023],["Oscar Mondadori",19.97,4.2,2024],["Chrysalide",25.44,3.8,2024],["Chrysalide",23.33,4.7,2020],["Piccoli Brividi",20.42,4.0,2024],["Contemporanea",11.33,4.1,2024],["Oscar Mondadori",19.91,3.5,2019],["Chrysalide",11.52,3.1,2020],["Oscar Mondadori",21.08,3.7,2023],["Piccoli Brividi",19.74,3.2,2024],["Piccoli Brividi",20.41,4.0,2021],["Contemporanea",24.78,4.1,2024],["Omnibus",20.04,3.6,2022],["Omnibus",15.05,4.0,2024],["Oscar Mondadori",19.49,3.9,2023],["Classici Moderni",15.8,3.5,2022],["Classici Moderni",17.43,3.5,2024],["Strade Blu",19.56,4.3,2024],["Voci",21.24,2.8,2018]],"hovertemplate":"Genere=Narrativa\u003cbr\u003eN. Recensioni=%{x}\u003cbr\u003eRicavo (EUR)=%{y}\u003cbr\u003ecopie_totali=%{marker.size}\u003cbr\u003ecollana=%{customdata[0]}\u003cbr\u003eprezzo_copertina=%{customdata[1]}\u003cbr\u003erating_goodreads=%{customdata[2]}\u003cbr\u003eanno_pubblicazione=%{customdata[3]}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"Narrativa","marker":{"color":"#FFA15A","opacity":0.6,"size":[9974,6715,778,2268,5334,3841,3786,4813,2356,2710,11816,1459,2172,5453,1455,3000,2703,1863,3098,1847,1684,8548,2443,816,5432,9309,12386,3916,3932,4971,3264,13020,4388,4329,3407,2827,1948,5508,4393,14779,1212,2171,2906,4841,5787,2170,2573,1101,948,7415,32813,8321,1161,1388,2421,1561,8537,7671,13596,1269,3145,5895,9613,4723,3070,7367,7343,2947,2370,5166,204,1386,3867,1968,3440,3365,2639,7781,3130,4023,1662,1765,1518,1766,7310,1832,3797,2160,9500,1466,3060,44294,1305,1793,5799,1502,3183,2858,7994,4170,2167,2610,8915,1894,54440,5790,4362,5930,1958,7322,2962,1900,3908,3448,1192,2711],"sizemode":"area","sizeref":87.104,"symbol":"circle"},"mode":"markers","name":"Narrativa","orientation":"v","showlegend":true,"x":[166,150,33,48,589,10,109,182,34,50,518,138,14,156,5,47,200,321,33,89,76,167,565,206,85,5,33,9,92,197,117,143,380,164,183,412,79,26,163,264,367,458,105,74,293,272,39,332,41,37,109,42,8,104,74,106,5,148,60,321,73,10,93,36,162,244,10,131,228,207,358,129,150,178,72,258,161,45,58,135,31,13,68,328,59,346,834,261,42,14,206,20,272,701,87,244,134,70,426,176,179,48,137,29,180,100,25,48,381,131,161,298,50,61,73,94],"xaxis":"x","y":[163033.21,73097.22,10198.42,41127.700000000004,59535.07,79612.25,50299.909999999996,63587.81,32242.32,23130.57,154538.62,27234.95,20167.73,85627.37,24170.73,38579.22,34477.88,26217.18,29861.74,30920.14,16930.44,114466.77,38637.04,7172.28,106080.22,190382.12,175846.42,71227.12,41699.14,82132.0,38402.51,152803.7,64150.31,59648.1,71069.3,39784.63,20620.52,107173.94,86617.29,213020.69,18625.08,20189.74,41069.12,56281.8,88266.0,42464.87,37093.92,16768.54,11401.1,124280.13,605913.26,166466.41,17605.29,23129.19,40259.04,21642.93,73506.78,73500.15,196454.63,13469.85,30224.98,114622.38,158966.4,42259.29,38041.06,142654.13,124958.73,59834.96,40057.7,46927.08,3818.08,28030.43,70247.38,16828.03,50530.79,41410.159999999996,43150.12,69068.17,53897.23,46469.6,25361.7,16346.39,24681.84,32999.47,116496.79,36749.63,53872.82,35814.25,152298.55,22178.78,45467.55,417381.39,14615.78,23170.32,92777.59,32299.35,38025.4,50423.35,129830.96,87447.43000000001,41659.19,43419.07,81684.22,30464.32,509698.93,97703.65,70167.8,99369.15,40255.15,120732.98,36527.92,30461.87,50009.37,49786.15,19008.38,46666.4],"yaxis":"y","type":"scatter"},{"customdata":[["Omnibus",21.66,3.6,2023],["Piccoli Brividi",21.09,3.1,2021],["Classici Moderni",24.88,3.5,2020],["Contemporanea",14.0,2.8,2021],["Classici Moderni",21.55,4.0,2023],["Strade Blu",19.86,3.3,2023],["Strade Blu",16.08,5.0,2023],["Chrysalide",22.96,3.5,2023],["Contemporanea",12.93,4.4,2023],["Chrysalide",18.01,3.6,2023],["Voci",16.97,3.7,2024],["Piccoli Brividi",12.03,3.5,2024],["Contemporanea",16.97,3.8,2024],["Chrysalide",19.7,3.9,2022],["Piccoli Brividi",14.1,2.6,2022],["Contemporanea",14.36,4.4,2023],["Voci",24.83,3.4,2024],["Chrysalide",13.46,3.3,2019],["Chrysalide",18.91,3.7,2021],["Contemporanea",17.13,2.8,2024],["Piccoli Brividi",10.01,3.7,2024],["Omnibus",10.67,3.6,2019],["Piccoli Brividi",12.03,3.7,2024]],"hovertemplate":"Genere=Sci-Fi\u003cbr\u003eN. Recensioni=%{x}\u003cbr\u003eRicavo (EUR)=%{y}\u003cbr\u003ecopie_totali=%{marker.size}\u003cbr\u003ecollana=%{customdata[0]}\u003cbr\u003eprezzo_copertina=%{customdata[1]}\u003cbr\u003erating_goodreads=%{customdata[2]}\u003cbr\u003eanno_pubblicazione=%{customdata[3]}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"Sci-Fi","marker":{"color":"#19d3f3","opacity":0.6,"size":[1715,228,1483,3696,678,3968,1713,1222,1278,3401,528,1043,2856,1512,1433,8213,734,562,700,2395,1333,522,738],"sizemode":"area","sizeref":87.104,"symbol":"circle"},"mode":"markers","name":"Sci-Fi","orientation":"v","showlegend":true,"x":[81,84,78,44,10,42,233,206,178,115,278,348,156,99,136,238,225,10,906,216,146,25,140],"xaxis":"x","y":[30433.38,3944.94,30393.41,42463.4,12124.1,64505.25,22665.579999999998,23027.71,13566.83,49395.11,7348.8099999999995,10258.619999999999,39817.55,24830.91,16163.55,96451.8,14962.56,6112.85,11015.04,33470.31,11042.54,4593.98,7314.31],"yaxis":"y","type":"scatter"},{"customdata":[["Contemporanea",12.13,3.9,2024],["Voci",14.48,3.5,2022],["Voci",23.19,3.7,2024],["Contemporanea",16.09,4.5,2024],["Contemporanea",18.32,3.8,2024],["Strade Blu",18.95,4.8,2023],["Oscar Mondadori",11.06,3.4,2023],["Omnibus",10.78,3.6,2024],["Contemporanea",16.22,2.9,2023],["Strade Blu",21.94,3.8,2023],["Strade Blu",17.35,3.7,2022],["Strade Blu",16.45,3.6,2019],["Piccoli Brividi",20.84,3.6,2024],["Oscar Mondadori",19.75,3.8,2024],["Omnibus",10.76,4.3,2018],["Piccoli Brividi",10.84,3.9,2024],["Voci",23.4,4.2,2020],["Strade Blu",18.3,3.3,2021],["Strade Blu",23.95,3.4,2021],["Classici Moderni",13.75,3.7,2023],["Voci",19.03,3.3,2024],["Strade Blu",13.66,2.7,2024],["Strade Blu",20.74,3.0,2023],["Piccoli Brividi",19.94,4.0,2022],["Contemporanea",10.68,3.4,2024],["Contemporanea",10.31,3.8,2020],["Oscar Mondadori",12.27,3.7,2019],["Voci",16.17,3.2,2024],["Oscar Mondadori",19.92,4.3,2019],["Piccoli Brividi",12.71,3.6,2024],["Classici Moderni",13.5,4.0,2018],["Classici Moderni",19.41,3.6,2024],["Voci",11.79,4.4,2023],["Strade Blu",20.31,3.5,2022],["Piccoli Brividi",17.59,3.5,2024],["Strade Blu",21.39,3.2,2023],["Chrysalide",18.31,3.7,2023],["Classici Moderni",11.56,3.5,2024],["Voci",18.1,2.9,2024],["Contemporanea",16.24,3.6,2024],["Strade Blu",14.28,3.0,2021],["Voci",10.17,2.9,2022],["Piccoli Brividi",20.46,3.4,2021],["Piccoli Brividi",21.05,3.5,2024],["Classici Moderni",23.44,3.1,2024],["Voci",22.68,4.0,2023],["Oscar Mondadori",18.8,3.5,2023],["Chrysalide",18.64,3.5,2019],["Oscar Mondadori",23.08,2.7,2021],["Piccoli Brividi",18.48,4.1,2023],["Piccoli Brividi",10.58,3.9,2022],["Classici Moderni",12.84,3.9,2023],["Oscar Mondadori",9.98,3.4,2024],["Chrysalide",19.16,3.9,2024],["Classici Moderni",11.87,3.3,2021],["Piccoli Brividi",15.82,4.0,2023],["Classici Moderni",16.23,3.9,2024],["Voci",24.03,3.9,2018],["Omnibus",15.33,4.0,2024],["Chrysalide",10.05,3.5,2023],["Voci",11.75,2.6,2022],["Voci",22.58,3.5,2022],["Piccoli Brividi",19.99,4.0,2021],["Oscar Mondadori",23.65,3.2,2024],["Piccoli Brividi",15.47,3.4,2024]],"hovertemplate":"Genere=Saggistica\u003cbr\u003eN. Recensioni=%{x}\u003cbr\u003eRicavo (EUR)=%{y}\u003cbr\u003ecopie_totali=%{marker.size}\u003cbr\u003ecollana=%{customdata[0]}\u003cbr\u003eprezzo_copertina=%{customdata[1]}\u003cbr\u003erating_goodreads=%{customdata[2]}\u003cbr\u003eanno_pubblicazione=%{customdata[3]}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"Saggistica","marker":{"color":"#FF6692","opacity":0.6,"size":[4126,2091,697,2261,9757,2163,1064,1974,728,2584,1193,4350,1630,1726,638,1428,2210,523,2097,544,1806,7814,7916,2390,2894,255,2524,2084,693,866,3463,1216,23595,3693,6822,3594,1283,1678,4277,598,4150,1971,1177,3572,2858,2285,3592,1999,2523,1863,4856,2747,6407,1042,2704,4538,8052,1393,3668,1611,903,1801,16041,3427,9895],"sizemode":"area","sizeref":87.104,"symbol":"circle"},"mode":"markers","name":"Saggistica","orientation":"v","showlegend":true,"x":[529,18,76,98,146,46,141,56,43,14,36,47,42,12,245,115,90,83,87,88,392,45,320,65,424,29,74,23,34,43,244,70,244,192,160,222,208,243,145,331,329,96,357,176,419,151,47,253,41,122,125,146,124,397,188,8,90,486,77,127,32,5,543,287,11],"xaxis":"x","y":[40640.98,24621.78,13119.74,29198.53,144602.49,32945.55,9694.08,17368.2,9757.95,45784.48,16875.54,57940.19,28116.280000000002,28462.73,5649.54,12711.53,41296.32,7730.93,41207.21,6161.36,28252.93,86773.14,131999.7,39059.45,25311.03,2214.53,25090.29,27036.23,11497.86,8926.23,37847.33,19214.93,227792.81,61197.1,99389.68,62637.41,19241.95,15665.52,63419.79,7858.55,48584.840000000004,16038.61,19681.5,60715.58,54894.15,42568.07,54881.9,30440.07,47299.01,27934.34,41796.27,29078.14,52115.04,16042.68,26257.61,58637.65,106429.04,27252.41,46298.93,13291.68,8743.23,33300.97,265297.27999999997,66966.16,124449.2],"yaxis":"y","type":"scatter"},{"customdata":[["Piccoli Brividi",18.8,3.5,2020],["Strade Blu",17.11,3.9,2024],["Oscar Mondadori",20.52,4.1,2020],["Classici Moderni",21.68,3.9,2022],["Omnibus",22.5,3.9,2024],["Contemporanea",18.72,3.5,2022],["Piccoli Brividi",14.92,3.9,2022],["Voci",11.9,4.0,2020],["Strade Blu",20.82,4.0,2020],["Piccoli Brividi",14.13,4.2,2023],["Classici Moderni",21.29,4.1,2023],["Classici Moderni",10.88,4.1,2020],["Strade Blu",23.5,4.1,2022],["Chrysalide",10.23,3.7,2024],["Oscar Mondadori",11.13,4.3,2022],["Voci",24.67,3.5,2018],["Omnibus",24.37,4.2,2023],["Strade Blu",24.65,3.6,2022],["Classici Moderni",24.41,3.9,2022],["Contemporanea",15.12,3.4,2024],["Strade Blu",15.19,3.8,2024],["Piccoli Brividi",22.52,3.7,2022],["Oscar Mondadori",20.04,2.9,2024],["Chrysalide",10.94,2.9,2024],["Contemporanea",21.73,3.3,2021],["Oscar Mondadori",24.55,4.7,2023],["Piccoli Brividi",13.53,3.6,2019],["Piccoli Brividi",11.46,3.6,2022],["Chrysalide",17.49,3.9,2019],["Classici Moderni",13.72,2.4,2023],["Oscar Mondadori",15.33,3.8,2023],["Piccoli Brividi",14.05,3.2,2023],["Chrysalide",19.06,3.4,2024],["Omnibus",14.11,3.7,2024],["Oscar Mondadori",23.01,4.4,2022],["Oscar Mondadori",17.3,4.6,2023],["Oscar Mondadori",20.43,4.2,2024],["Omnibus",14.54,3.2,2022],["Contemporanea",16.74,4.0,2018],["Voci",16.18,3.4,2024],["Voci",11.1,3.9,2024],["Omnibus",20.76,2.9,2020]],"hovertemplate":"Genere=Storico\u003cbr\u003eN. Recensioni=%{x}\u003cbr\u003eRicavo (EUR)=%{y}\u003cbr\u003ecopie_totali=%{marker.size}\u003cbr\u003ecollana=%{customdata[0]}\u003cbr\u003eprezzo_copertina=%{customdata[1]}\u003cbr\u003erating_goodreads=%{customdata[2]}\u003cbr\u003eanno_pubblicazione=%{customdata[3]}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"Storico","marker":{"color":"#B6E880","opacity":0.6,"size":[1786,4218,649,107,268,809,856,343,1052,566,3614,1740,1693,2999,1477,553,5042,4329,1160,1030,1236,3210,7232,2778,11268,518,2063,1874,611,2509,284,1288,1938,1095,858,4156,717,2027,1638,1003,264,8802],"sizemode":"area","sizeref":87.104,"symbol":"circle"},"mode":"markers","name":"Storico","orientation":"v","showlegend":true,"x":[46,453,301,474,31,16,14,201,42,259,200,69,46,149,51,26,5,84,61,34,516,10,85,58,119,27,12,1020,6,5,67,159,215,5,814,595,157,27,272,226,273,65],"xaxis":"x","y":[27627.54,58965.32,10795.55,1990.15,4946.68,12346.76,10371.64,3370.18,17736.61,6634.74,60983.07,15396.82,32485.32,24942.28,13445.03,11317.36,100643.25,87837.83,22934.38,12731.8,15409.52,59832.26,117990.52,24357.93,204751.99,10416.65,22486.85,17621.44,8848.22,28021.7,3565.69,14657.7,30449.31,12480.96,16278.45,58588.3,12105.9,23990.309999999998,22449.98,13040.300000000001,2402.65,149659.86000000002],"yaxis":"y","type":"scatter"},{"customdata":[["Piccoli Brividi",11.29,3.9,2022],["Oscar Mondadori",21.97,4.0,2023],["Contemporanea",21.73,3.2,2023],["Omnibus",12.11,3.2,2024],["Piccoli Brividi",24.25,3.7,2021],["Voci",13.98,3.4,2023],["Contemporanea",20.86,2.8,2024],["Omnibus",17.75,3.7,2021],["Classici Moderni",21.25,3.5,2023],["Voci",23.09,3.4,2024],["Omnibus",17.98,3.9,2023],["Omnibus",18.3,3.4,2024],["Classici Moderni",20.69,3.7,2021],["Voci",20.87,3.4,2019],["Piccoli Brividi",17.31,3.1,2024],["Contemporanea",24.59,3.8,2024],["Chrysalide",11.31,2.8,2024],["Voci",17.66,3.1,2023],["Piccoli Brividi",16.42,3.2,2024],["Piccoli Brividi",14.87,4.3,2024],["Contemporanea",17.65,3.5,2024],["Classici Moderni",21.94,4.0,2024],["Oscar Mondadori",15.44,3.9,2024],["Contemporanea",19.93,4.5,2022],["Classici Moderni",21.73,3.8,2022]],"hovertemplate":"Genere=Bambini\u003cbr\u003eN. Recensioni=%{x}\u003cbr\u003eRicavo (EUR)=%{y}\u003cbr\u003ecopie_totali=%{marker.size}\u003cbr\u003ecollana=%{customdata[0]}\u003cbr\u003eprezzo_copertina=%{customdata[1]}\u003cbr\u003erating_goodreads=%{customdata[2]}\u003cbr\u003eanno_pubblicazione=%{customdata[3]}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"Bambini","marker":{"color":"#FF97FF","opacity":0.6,"size":[2378,2299,11069,297,487,3520,4855,2839,1052,658,1626,1941,4517,2335,3202,2308,414,1119,698,1496,2918,737,4737,2671,422],"sizemode":"area","sizeref":87.104,"symbol":"circle"},"mode":"markers","name":"Bambini","orientation":"v","showlegend":true,"x":[12,502,439,434,453,203,261,10,32,293,27,236,96,175,90,11,5,5,342,5,144,212,27,115,9],"xaxis":"x","y":[21901.489999999998,41331.13,199104.38,2967.5299999999997,9664.88,40357.48,81963.11,40845.45,18300.49,12304.71,23892.75,28883.88,75134.7,39853.36,44737.72,46268.55,3877.05,16106.86,9451.3,18347.36,42221.42,13049.95,59799.87,43315.87,7582.64],"yaxis":"y","type":"scatter"},{"customdata":[["Classici Moderni",14.13,3.8,2023],["Voci",10.15,4.2,2023],["Omnibus",8.32,3.4,2024],["Contemporanea",9.59,4.1,2021],["Contemporanea",18.83,3.6,2023],["Contemporanea",12.49,3.6,2024],["Contemporanea",17.22,4.4,2024],["Strade Blu",17.43,3.8,2024],["Piccoli Brividi",17.56,2.9,2023],["Strade Blu",10.02,3.6,2018],["Voci",8.36,3.2,2024],["Contemporanea",12.86,4.4,2020],["Strade Blu",8.45,3.4,2024],["Oscar Mondadori",18.21,3.9,2021]],"hovertemplate":"Genere=Poesia\u003cbr\u003eN. Recensioni=%{x}\u003cbr\u003eRicavo (EUR)=%{y}\u003cbr\u003ecopie_totali=%{marker.size}\u003cbr\u003ecollana=%{customdata[0]}\u003cbr\u003eprezzo_copertina=%{customdata[1]}\u003cbr\u003erating_goodreads=%{customdata[2]}\u003cbr\u003eanno_pubblicazione=%{customdata[3]}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"Poesia","marker":{"color":"#FECB52","opacity":0.6,"size":[67,860,210,408,85,798,170,568,157,1052,495,253,196,1768],"sizemode":"area","sizeref":87.104,"symbol":"circle"},"mode":"markers","name":"Poesia","orientation":"v","showlegend":true,"x":[16,187,131,68,18,26,13,65,139,37,132,168,325,254],"xaxis":"x","y":[798.26,7147.67,1428.59,3255.77,1389.69,8333.4,2426.2999999999997,8176.4800000000005,2303.9,8632.69,3425.94,2678.7799999999997,1388.27,26136.84],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"#C8D4E3"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""},"bgcolor":"white","radialaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"yaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"zaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"baxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"bgcolor":"white","caxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"N. Recensioni"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Ricavo (EUR)"}},"legend":{"title":{"text":"Genere"},"tracegroupgap":0,"itemsizing":"constant","orientation":"h","yanchor":"bottom","y":-0.25,"xanchor":"center","x":0.5},"title":{"text":"\u003cb\u003eEsplora il catalogo: ogni punto e un libro\u003c\u002fb\u003e\u003cbr\u003e\u003ci\u003eDimensione = copie. Hover per dettagli.\u003c\u002fi\u003e"},"height":550},                        {"responsive": true}                    ).then(function(){
                            
<p>var gd = document.getElementById(&#39;c9292490-4023-40c0-9a77-de3ede402def&#39;);
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === &#39;none&#39;) {{
            console.log([gd, &#39;removed!&#39;]);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});</p>
<p>// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest(&#39;#notebook-container&#39;);
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}</p>
<p>// Listen for the clearing of the current output cell
var outputEl = gd.closest(&#39;.output&#39;);
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}</p>
<pre><code class="hljs language-applescript">                    })                };                            &lt;/<span class="hljs-keyword">script</span>&gt;        &lt;/<span class="hljs-keyword">div</span>&gt;</code></pre></body>
</html>
</div>

<hr>
<h1 id="parte-7-esercizio-guidato---dal-dato-allinsight">Parte 7: Esercizio Guidato - Dal Dato all&#39;Insight</h1>
<h2 id="scenario">Scenario</h2>
<p>Il direttore chiede: <em>&quot;Come sta andando il catalogo? Dobbiamo cambiare qualcosa?&quot;</em></p>
<p>3 slide con il Pyramid Principle:</p>
<pre><code class="hljs language-pgsql">MESSAGGIO: &quot;Servono 3 interventi: diversificare generi, accelerare digitale, ridurre stagionalita&quot;

‚îú‚îÄ‚îÄ ARG <span class="hljs-number">1</span>: Concentrazione rischiosa ‚Üí Pareto + Bar
‚îú‚îÄ‚îÄ ARG <span class="hljs-number">2</span>: Digitale da accelerare  ‚Üí <span class="hljs-keyword">Stacked</span> Area
‚îî‚îÄ‚îÄ ARG <span class="hljs-number">3</span>: Stagionalita marcata   ‚Üí <span class="hljs-type">Line</span> + Annotazioni</code></pre><pre><code class="hljs language-python"><span class="hljs-comment"># ============================================================</span>
<span class="hljs-comment"># ANALISI RAPIDA</span>
<span class="hljs-comment"># ============================================================</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">60</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ANALISI RAPIDA DEL CATALOGO&quot;</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span> * <span class="hljs-number">60</span>)
rl = df.groupby(<span class="hljs-string">&#x27;libro_id&#x27;</span>)[<span class="hljs-string">&#x27;ricavo&#x27;</span>].<span class="hljs-built_in">sum</span>().sort_values(ascending=<span class="hljs-literal">False</span>)
t10 = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">len</span>(rl)*<span class="hljs-number">0.1</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nTop 10% (<span class="hljs-subst">{t10}</span> libri) = <span class="hljs-subst">{rl.head(t10).<span class="hljs-built_in">sum</span>()/rl.<span class="hljs-built_in">sum</span>()*<span class="hljs-number">100</span>:<span class="hljs-number">.0</span>f}</span>% dei ricavi&quot;</span>)
r23f = df[df[<span class="hljs-string">&#x27;anno&#x27;</span>]==<span class="hljs-number">2023</span>].groupby(<span class="hljs-string">&#x27;formato&#x27;</span>)[<span class="hljs-string">&#x27;ricavo&#x27;</span>].<span class="hljs-built_in">sum</span>()
r24f = df[df[<span class="hljs-string">&#x27;anno&#x27;</span>]==<span class="hljs-number">2024</span>].groupby(<span class="hljs-string">&#x27;formato&#x27;</span>)[<span class="hljs-string">&#x27;ricavo&#x27;</span>].<span class="hljs-built_in">sum</span>()
<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nCrescita formati YoY:&quot;</span>)
<span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> [<span class="hljs-string">&#x27;Cartaceo&#x27;</span>,<span class="hljs-string">&#x27;Ebook&#x27;</span>,<span class="hljs-string">&#x27;Audiolibro&#x27;</span>]:
    <span class="hljs-keyword">if</span> f <span class="hljs-keyword">in</span> r23f.index <span class="hljs-keyword">and</span> f <span class="hljs-keyword">in</span> r24f.index:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   <span class="hljs-subst">{f}</span>: <span class="hljs-subst">{(r24f[f]-r23f[f])/r23f[f]*<span class="hljs-number">100</span>:+<span class="hljs-number">.1</span>f}</span>%&quot;</span>)
r23g = df[df[<span class="hljs-string">&#x27;anno&#x27;</span>]==<span class="hljs-number">2023</span>].groupby(<span class="hljs-string">&#x27;genere&#x27;</span>)[<span class="hljs-string">&#x27;ricavo&#x27;</span>].<span class="hljs-built_in">sum</span>()
r24g = df[df[<span class="hljs-string">&#x27;anno&#x27;</span>]==<span class="hljs-number">2024</span>].groupby(<span class="hljs-string">&#x27;genere&#x27;</span>)[<span class="hljs-string">&#x27;ricavo&#x27;</span>].<span class="hljs-built_in">sum</span>()
yg = ((r24g-r23g)/r23g*<span class="hljs-number">100</span>).sort_values(ascending=<span class="hljs-literal">False</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nGeneri YoY:&quot;</span>)
<span class="hljs-keyword">for</span> g <span class="hljs-keyword">in</span> yg.index: <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   <span class="hljs-subst">{<span class="hljs-string">&#x27;UP&#x27;</span> <span class="hljs-keyword">if</span> yg[g]&gt;<span class="hljs-number">10</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;FLAT&#x27;</span> <span class="hljs-keyword">if</span> yg[g]&gt;<span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;DOWN&#x27;</span>}</span> <span class="hljs-subst">{g}</span>: <span class="hljs-subst">{yg[g]:+<span class="hljs-number">.1</span>f}</span>%&quot;</span>)
rm = df.groupby(df[<span class="hljs-string">&#x27;data&#x27;</span>].dt.month)[<span class="hljs-string">&#x27;ricavo&#x27;</span>].mean()
gap = (rm.<span class="hljs-built_in">max</span>()-rm.<span class="hljs-built_in">min</span>())/rm.mean()*<span class="hljs-number">100</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nGap stagionale: <span class="hljs-subst">{gap:<span class="hljs-number">.0</span>f}</span>%&quot;</span>)</code></pre><pre><code class="hljs language-text">============================================================
ANALISI RAPIDA DEL CATALOGO
============================================================

Top 10% (50 libri) = 40% dei ricavi

Crescita formati YoY:
   Cartaceo: +5.4%
   Ebook: +11.8%
   Audiolibro: +27.8%

Generi YoY:
   UP Thriller: +19.9%
   UP Young Adult: +15.8%
   UP Fantasy: +13.4%
   FLAT Romance: +4.4%
   FLAT Bambini: +4.3%
   FLAT Sci-Fi: +4.2%
   FLAT Narrativa: +3.5%
   FLAT Storico: +1.1%
   FLAT Saggistica: +0.3%
   DOWN Poesia: -8.1%

Gap stagionale: 112%</code></pre><pre><code class="hljs language-python"><span class="hljs-comment"># ============================================================</span>
<span class="hljs-comment"># SLIDE 1: Concentrazione (Pareto)</span>
<span class="hljs-comment"># ============================================================</span>
fig,(ax1,ax2) = plt.subplots(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">6</span>),gridspec_kw={<span class="hljs-string">&#x27;width_ratios&#x27;</span>:[<span class="hljs-number">1.3</span>,<span class="hljs-number">1</span>]})
rs = rl.values/<span class="hljs-number">1e6</span>; rc = np.cumsum(rs)/np.cumsum(rs)[-<span class="hljs-number">1</span>]*<span class="hljs-number">100</span>
xp = np.arange(<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(rs)+<span class="hljs-number">1</span>)/<span class="hljs-built_in">len</span>(rs)*<span class="hljs-number">100</span>
ax1.fill_between(xp,rc,alpha=<span class="hljs-number">0.3</span>,color=<span class="hljs-string">&#x27;#3498db&#x27;</span>); ax1.plot(xp,rc,color=<span class="hljs-string">&#x27;#2c3e50&#x27;</span>,linewidth=<span class="hljs-number">2</span>)
ax1.axhline(<span class="hljs-number">80</span>,color=<span class="hljs-string">&#x27;#e74c3c&#x27;</span>,linestyle=<span class="hljs-string">&#x27;--&#x27;</span>,alpha=<span class="hljs-number">0.7</span>)
i80 = np.argmin(np.<span class="hljs-built_in">abs</span>(rc-<span class="hljs-number">80</span>)); p80 = xp[i80]
ax1.axvline(p80,color=<span class="hljs-string">&#x27;#e74c3c&#x27;</span>,linestyle=<span class="hljs-string">&#x27;--&#x27;</span>,alpha=<span class="hljs-number">0.7</span>)
ax1.annotate(<span class="hljs-string">f&#x27;Solo il <span class="hljs-subst">{p80:<span class="hljs-number">.0</span>f}</span>% dei titoli\ngenera l\&#x27;80% dei ricavi&#x27;</span>,
    xy=(p80,<span class="hljs-number">80</span>),xytext=(p80+<span class="hljs-number">20</span>,<span class="hljs-number">60</span>),arrowprops=<span class="hljs-built_in">dict</span>(arrowstyle=<span class="hljs-string">&#x27;-&gt;&#x27;</span>,color=<span class="hljs-string">&#x27;#e74c3c&#x27;</span>,lw=<span class="hljs-number">2</span>),
    fontsize=<span class="hljs-number">11</span>,fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>,color=<span class="hljs-string">&#x27;#e74c3c&#x27;</span>,bbox=<span class="hljs-built_in">dict</span>(boxstyle=<span class="hljs-string">&#x27;round&#x27;</span>,facecolor=<span class="hljs-string">&#x27;#ffebee&#x27;</span>,alpha=<span class="hljs-number">0.9</span>))
ax1.set_xlabel(<span class="hljs-string">&#x27;% Titoli&#x27;</span>); ax1.set_ylabel(<span class="hljs-string">&#x27;% Ricavi cumulati&#x27;</span>); ax1.set_xlim(<span class="hljs-number">0</span>,<span class="hljs-number">100</span>); ax1.set_ylim(<span class="hljs-number">0</span>,<span class="hljs-number">100</span>)

rgen = df.groupby(<span class="hljs-string">&#x27;genere&#x27;</span>)[<span class="hljs-string">&#x27;ricavo&#x27;</span>].<span class="hljs-built_in">sum</span>().sort_values(ascending=<span class="hljs-literal">True</span>)/<span class="hljs-number">1e6</span>
ax2.barh(rgen.index,rgen.values,color=[<span class="hljs-string">&#x27;#e74c3c&#x27;</span> <span class="hljs-keyword">if</span> g <span class="hljs-keyword">in</span> rgen.nlargest(<span class="hljs-number">2</span>).index <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;#bdc3c7&#x27;</span> <span class="hljs-keyword">for</span> g <span class="hljs-keyword">in</span> rgen.index],height=<span class="hljs-number">0.6</span>)
<span class="hljs-keyword">for</span> i,(g,v) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(rgen.items()): ax2.text(v+<span class="hljs-number">0.1</span>,i,<span class="hljs-string">f&#x27;EUR <span class="hljs-subst">{v:<span class="hljs-number">.1</span>f}</span>M&#x27;</span>,va=<span class="hljs-string">&#x27;center&#x27;</span>,fontsize=<span class="hljs-number">9</span>,fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>)
ax2.set_title(<span class="hljs-string">&#x27;Due generi dominano&#x27;</span>,fontsize=<span class="hljs-number">12</span>,fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>,loc=<span class="hljs-string">&#x27;left&#x27;</span>)
ax2.xaxis.set_visible(<span class="hljs-literal">False</span>)
<span class="hljs-keyword">for</span> sp <span class="hljs-keyword">in</span> [<span class="hljs-string">&#x27;bottom&#x27;</span>,<span class="hljs-string">&#x27;left&#x27;</span>]: ax2.spines[sp].set_visible(<span class="hljs-literal">False</span>)
ax2.tick_params(left=<span class="hljs-literal">False</span>)
plt.suptitle(<span class="hljs-string">&#x27;SLIDE 1: Concentrazione eccessiva&#x27;</span>,fontsize=<span class="hljs-number">14</span>,fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>,y=<span class="hljs-number">1.02</span>)
plt.tight_layout(); plt.show()</code></pre><p><img src="../../../Assets/Notebook/generated/datavis_masterclass_parte1/datavis_masterclass_parte1-output-19.png" alt="Notebook output 19"></p>
<pre><code class="hljs language-python"><span class="hljs-comment"># ============================================================</span>
<span class="hljs-comment"># SLIDE 2: Transizione digitale</span>
<span class="hljs-comment"># ============================================================</span>
fm = (df.groupby([df[<span class="hljs-string">&#x27;data&#x27;</span>],<span class="hljs-string">&#x27;formato&#x27;</span>])[<span class="hljs-string">&#x27;ricavo&#x27;</span>].<span class="hljs-built_in">sum</span>().reset_index()
      .pivot(index=<span class="hljs-string">&#x27;data&#x27;</span>,columns=<span class="hljs-string">&#x27;formato&#x27;</span>,values=<span class="hljs-string">&#x27;ricavo&#x27;</span>).fillna(<span class="hljs-number">0</span>)/<span class="hljs-number">1000</span>)
fig, ax = plt.subplots(figsize=(<span class="hljs-number">14</span>,<span class="hljs-number">6</span>))
ax.stackplot(fm.index,[fm[<span class="hljs-string">&#x27;Cartaceo&#x27;</span>],fm[<span class="hljs-string">&#x27;Ebook&#x27;</span>],fm[<span class="hljs-string">&#x27;Audiolibro&#x27;</span>]],
    labels=[<span class="hljs-string">&#x27;Cartaceo&#x27;</span>,<span class="hljs-string">&#x27;Ebook&#x27;</span>,<span class="hljs-string">&#x27;Audiolibro&#x27;</span>],colors=[<span class="hljs-string">&#x27;#2c3e50&#x27;</span>,<span class="hljs-string">&#x27;#3498db&#x27;</span>,<span class="hljs-string">&#x27;#e74c3c&#x27;</span>],alpha=<span class="hljs-number">0.75</span>)
ds = fm.iloc[:<span class="hljs-number">3</span>][[<span class="hljs-string">&#x27;Ebook&#x27;</span>,<span class="hljs-string">&#x27;Audiolibro&#x27;</span>]].<span class="hljs-built_in">sum</span>().<span class="hljs-built_in">sum</span>()/fm.iloc[:<span class="hljs-number">3</span>].<span class="hljs-built_in">sum</span>().<span class="hljs-built_in">sum</span>()*<span class="hljs-number">100</span>
de = fm.iloc[-<span class="hljs-number">3</span>:][[<span class="hljs-string">&#x27;Ebook&#x27;</span>,<span class="hljs-string">&#x27;Audiolibro&#x27;</span>]].<span class="hljs-built_in">sum</span>().<span class="hljs-built_in">sum</span>()/fm.iloc[-<span class="hljs-number">3</span>:].<span class="hljs-built_in">sum</span>().<span class="hljs-built_in">sum</span>()*<span class="hljs-number">100</span>
ax.set_title(<span class="hljs-string">f&#x27;SLIDE 2: Digitale dal <span class="hljs-subst">{ds:<span class="hljs-number">.0</span>f}</span>% al <span class="hljs-subst">{de:<span class="hljs-number">.0</span>f}</span>% ‚Äî accelerare&#x27;</span>,fontsize=<span class="hljs-number">13</span>,fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>,loc=<span class="hljs-string">&#x27;left&#x27;</span>,pad=<span class="hljs-number">15</span>)
ax.set_ylabel(<span class="hljs-string">&#x27;Ricavi EUR K&#x27;</span>); ax.legend(loc=<span class="hljs-string">&#x27;upper left&#x27;</span>)
ax.xaxis.set_major_formatter(mdates.DateFormatter(<span class="hljs-string">&#x27;%b %Y&#x27;</span>))
plt.xticks(rotation=<span class="hljs-number">30</span>); plt.tight_layout(); plt.show()</code></pre><p><img src="../../../Assets/Notebook/generated/datavis_masterclass_parte1/datavis_masterclass_parte1-output-20.png" alt="Notebook output 20"></p>
<pre><code class="hljs language-python"><span class="hljs-comment"># ============================================================</span>
<span class="hljs-comment"># SLIDE 3: Stagionalita</span>
<span class="hljs-comment"># ============================================================</span>
rmt = df.groupby(<span class="hljs-string">&#x27;data&#x27;</span>)[<span class="hljs-string">&#x27;ricavo&#x27;</span>].<span class="hljs-built_in">sum</span>()/<span class="hljs-number">1e6</span>
fig, ax = plt.subplots(figsize=(<span class="hljs-number">14</span>,<span class="hljs-number">6</span>))
ax.plot(rmt.index,rmt.values,<span class="hljs-string">&#x27;o-&#x27;</span>,color=<span class="hljs-string">&#x27;#2c3e50&#x27;</span>,linewidth=<span class="hljs-number">2.5</span>)
med = rmt.mean()
ax.axhline(med,color=<span class="hljs-string">&#x27;#27ae60&#x27;</span>,linestyle=<span class="hljs-string">&#x27;--&#x27;</span>,alpha=<span class="hljs-number">0.5</span>)
ax.fill_between(rmt.index,med*<span class="hljs-number">0.9</span>,med*<span class="hljs-number">1.1</span>,alpha=<span class="hljs-number">0.1</span>,color=<span class="hljs-string">&#x27;#27ae60&#x27;</span>)
<span class="hljs-keyword">for</span> d,v <span class="hljs-keyword">in</span> rmt.items():
    ax.plot(d,v,<span class="hljs-string">&#x27;o&#x27;</span>,color=<span class="hljs-string">&#x27;#27ae60&#x27;</span> <span class="hljs-keyword">if</span> v&gt;=med <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;#e74c3c&#x27;</span>,markersize=<span class="hljs-number">8</span>,zorder=<span class="hljs-number">5</span>)
ax.set_title(<span class="hljs-string">f&#x27;SLIDE 3: Gap stagionale <span class="hljs-subst">{gap:<span class="hljs-number">.0</span>f}</span>% ‚Äî appiattire la curva&#x27;</span>,fontsize=<span class="hljs-number">13</span>,fontweight=<span class="hljs-string">&#x27;bold&#x27;</span>,loc=<span class="hljs-string">&#x27;left&#x27;</span>,pad=<span class="hljs-number">15</span>)
ax.set_ylabel(<span class="hljs-string">&#x27;Ricavi EUR M&#x27;</span>)
ax.xaxis.set_major_formatter(mdates.DateFormatter(<span class="hljs-string">&#x27;%b %Y&#x27;</span>))
plt.xticks(rotation=<span class="hljs-number">30</span>)
ax.text(<span class="hljs-number">0.98</span>,<span class="hljs-number">0.02</span>,<span class="hljs-string">&#x27;RACCOMANDAZIONI:\n1. Promozioni Q1\n2. Bundle digitali fuori stagione\n3. Campagna &quot;leggere tutto l\&#x27;anno&quot;&#x27;</span>,
    transform=ax.transAxes,fontsize=<span class="hljs-number">9</span>,va=<span class="hljs-string">&#x27;bottom&#x27;</span>,ha=<span class="hljs-string">&#x27;right&#x27;</span>,bbox=<span class="hljs-built_in">dict</span>(boxstyle=<span class="hljs-string">&#x27;round&#x27;</span>,facecolor=<span class="hljs-string">&#x27;#e8f5e9&#x27;</span>,alpha=<span class="hljs-number">0.9</span>))
plt.tight_layout(); plt.show()</code></pre><p><img src="../../../Assets/Notebook/generated/datavis_masterclass_parte1/datavis_masterclass_parte1-output-21.png" alt="Notebook output 21"></p>
<hr>
<h1 id="recap-e-prossimi-passi">üéì Recap e Prossimi Passi</h1>
<h2 id="cosa-abbiamo-imparato">Cosa abbiamo imparato</h2>
<ol>
<li><strong>Pyramid Principle</strong>: Comunica top-down, dalla conclusione alle evidenze</li>
<li><strong>Framework &quot;So What?&quot;</strong>: Ogni grafico deve passare 3 livelli (osservazione ‚Üí insight ‚Üí azione)</li>
<li><strong>Grammatica visuale</strong>: Posizione e lunghezza &gt; Area e colore per dati quantitativi</li>
<li><strong>Data-Ink Ratio</strong>: Eliminate il rumore visivo</li>
<li><strong>Catalogo grafici</strong>: Bar, Box, Violin, Scatter, Heatmap, Line, Stacked Area, Treemap</li>
<li><strong>Tecniche</strong>: Annotazioni, colore strategico, small multiples, interattivit√†</li>
</ol>
<h2 id="checklist-prima-di-ogni-presentazione">Checklist prima di ogni presentazione</h2>
<ul>
<li><input disabled="" type="checkbox"> Ho costruito la piramide PRIMA di fare i grafici?</li>
<li><input disabled="" type="checkbox"> Ogni grafico ha un titolo &quot;So What?&quot; (non descrittivo)?</li>
<li><input disabled="" type="checkbox"> Ho usato il colore per evidenziare, non per decorare?</li>
<li><input disabled="" type="checkbox"> Il data-ink ratio √® alto?</li>
<li><input disabled="" type="checkbox"> Ogni grafico supporta un argomento specifico della piramide?</li>
<li><input disabled="" type="checkbox"> Se rimuovo un grafico, l&#39;argomentazione ne risente?</li>
</ul>
<h2 id="nel-prossimo-notebook-parte-2">Nel prossimo notebook (Parte 2)</h2>
<ul>
<li><strong>Quando usare quale grafico</strong>: matrice decisionale basata sull&#39;obiettivo comunicativo</li>
<li><strong>Trasformazione dati</strong>: normalizzazione, log scale, indici, moving averages</li>
<li><strong>Grafici avanzati</strong>: Slope chart, Bump chart, Waffle, Dumbbell, Waterfall</li>
<li><strong>Dashboard design</strong>: come comporre pi√π grafici in una vista coerente</li>
</ul>
<hr>
<p><em>&quot;The purpose of visualization is insight, not pictures.&quot;</em> ‚Äî Ben Shneiderman</p>
<blockquote>
<p>Notebook sorgente: <a href="../../../Assets/Notebook/datavis_masterclass_parte1.ipynb">datavis_masterclass_parte1.ipynb</a></p>
</blockquote>
        </div>
      </section>
    </article>
  </main>
  <footer>
    <span data-it="¬© 2026 Mirko Calcaterra. Tutti i diritti riservati."
          data-en="¬© 2026 Mirko Calcaterra. All rights reserved.">
      ¬© 2026 Mirko Calcaterra. Tutti i diritti riservati.
    </span>
  </footer>
  <script>
    const BLOG_LANG_KEY = 'blogLang';
    const BLOG_THEME_KEY = 'blogTheme';
    const CURRENT_LANG = "it";
    const OTHER_LANG = "en";
    const OTHER_LANG_LINK = "../../../blog/en/datavis-masterclass-parte-1/index.html";
    (function() {
      const body = document.body;
      const themeToggle = document.querySelector('.theme-toggle');
      const themeThumb = document.querySelector('.theme-toggle .theme-thumb');
      const langBtn = document.querySelector('.lang-btn');
      const tocElement = document.querySelector('.post-toc');
      const tocToggle = tocElement ? tocElement.querySelector('.post-toc__toggle') : null;
      const tocToggleText = tocElement ? tocElement.querySelector('.post-toc__toggle-text') : null;
      const tocTitle = tocElement ? tocElement.querySelector('.post-toc__title') : null;
      const tocLinks = tocElement ? Array.from(tocElement.querySelectorAll('.post-toc__link')) : [];
      const headingEntries = tocLinks
        .map((link) => {
          const id = link.getAttribute('href').slice(1);
          const target = document.getElementById(id);
          return target ? { link, target } : null;
        })
        .filter(Boolean);
      const tocLabels = CURRENT_LANG === 'it'
        ? { title: 'Indice', show: 'Mostra indice', hide: 'Nascondi indice' }
        : { title: 'Table of contents', show: 'Show table of contents', hide: 'Hide table of contents' };
      const tableWrappers = Array.from(document.querySelectorAll('.table-wrapper[data-enhanced-table]'));
      const tableLabels = CURRENT_LANG === 'it'
        ? { expand: 'Apri a schermo intero', close: 'Chiudi' }
        : { expand: 'Open full view', close: 'Close' };
      const codeBlocks = Array.from(document.querySelectorAll('.post-body pre'));
      const codeCopyLabels = {
        it: { copy: 'Copia', copied: 'Copiato!' },
        en: { copy: 'Copy', copied: 'Copied!' },
      };
      let tableOverlay = null;
      let tableOverlayScroll = null;
      let tableOverlayClose = null;
      if (tocTitle) {
        tocTitle.textContent = tocLabels.title;
      }
      if (tocToggleText) {
        tocToggleText.textContent = tocLabels.title;
      }
      let tocCollapsed = false;
      let tocManualOverride = false;
      const tocMediaQuery = window.matchMedia ? window.matchMedia('(max-width: 1024px)') : null;
      function ensureTableOverlay() {
        if (tableOverlay) {
          return;
        }
        tableOverlay = document.createElement('div');
        tableOverlay.className = 'table-overlay';
        tableOverlay.innerHTML =
          '<div class="table-overlay__content">' +
          '<button type="button" class="table-overlay__close">' + tableLabels.close + '</button>' +
          '<div class="table-overlay__scroll"></div>' +
          '</div>';
        body.appendChild(tableOverlay);
        tableOverlayScroll = tableOverlay.querySelector('.table-overlay__scroll');
        tableOverlayClose = tableOverlay.querySelector('.table-overlay__close');
        if (tableOverlayClose) {
          tableOverlayClose.setAttribute('aria-label', tableLabels.close);
          tableOverlayClose.addEventListener('click', closeTableOverlay);
        }
        tableOverlay.addEventListener('click', (event) => {
          if (event.target === tableOverlay) {
            closeTableOverlay();
          }
        });
      }
      function closeTableOverlay() {
        if (!tableOverlay) {
          return;
        }
        tableOverlay.classList.remove('table-overlay--visible');
        body.classList.remove('no-scroll');
        if (tableOverlayScroll) {
          tableOverlayScroll.innerHTML = '';
        }
      }
      function openTableOverlay(wrapper) {
        ensureTableOverlay();
        if (!tableOverlay || !tableOverlayScroll) {
          return;
        }
        tableOverlayScroll.innerHTML = '';
        const table = wrapper.querySelector('table');
        if (table) {
          const clone = table.cloneNode(true);
          const tableSize = table.dataset.tableSize;
          if (tableSize) {
            clone.dataset.tableSize = tableSize;
          }
          tableOverlayScroll.appendChild(clone);
        }
        tableOverlay.classList.add('table-overlay--visible');
        body.classList.add('no-scroll');
        if (tableOverlayClose) {
          tableOverlayClose.focus();
        }
      }
      function enhanceTables() {
        if (!tableWrappers.length) {
          return;
        }
        tableWrappers.forEach((wrapper) => {
          if (wrapper.dataset.enhanced === 'true') {
            return;
          }
          const table = wrapper.querySelector('table');
          if (!table) {
            return;
          }
          const headerCells = table.querySelectorAll('thead th');
          const referenceCells = headerCells.length ? headerCells : table.querySelectorAll('tr:first-child > *');
          const columnCount = referenceCells.length;
          let tableSize = '';
          if (columnCount >= 6) {
            tableSize = 'wide';
          } else if (columnCount >= 4) {
            tableSize = 'medium';
          }
          if (tableSize) {
            wrapper.setAttribute('data-table-size', tableSize);
            table.dataset.tableSize = tableSize;
          }
          const expandBtn = document.createElement('button');
          expandBtn.type = 'button';
          expandBtn.className = 'table-wrapper__expand';
          expandBtn.innerHTML = '<span aria-hidden="true">üîç</span> ' + tableLabels.expand;
          expandBtn.setAttribute('aria-label', tableLabels.expand);
          expandBtn.addEventListener('click', () => openTableOverlay(wrapper));
          wrapper.appendChild(expandBtn);
          wrapper.dataset.enhanced = 'true';
        });
      }
      function fallbackCopy(text) {
        const textarea = document.createElement('textarea');
        textarea.value = text;
        textarea.setAttribute('readonly', '');
        textarea.style.position = 'fixed';
        textarea.style.opacity = '0';
        textarea.style.left = '-9999px';
        document.body.appendChild(textarea);
        textarea.select();
        let successful = false;
        try {
          successful = document.execCommand('copy');
        } catch (error) {
          successful = false;
        }
        textarea.remove();
        return successful;
      }
      function showCopyFeedback(button, labels) {
        if (button._copyTimeout) {
          clearTimeout(button._copyTimeout);
        }
        const labelEl = button.querySelector('.code-copy-btn__text');
        button.classList.add('code-copy-btn--copied');
        if (labelEl) {
          labelEl.textContent = labels.copied;
        }
        button._copyTimeout = window.setTimeout(() => {
          button.classList.remove('code-copy-btn--copied');
          if (labelEl) {
            labelEl.textContent = labels.copy;
          }
        }, 2000);
      }
      function enhanceCodeBlocks() {
        if (!codeBlocks.length) {
          return;
        }
        const labels = codeCopyLabels[CURRENT_LANG] || codeCopyLabels.en;
        codeBlocks.forEach((pre) => {
          if (pre.dataset.copyEnhanced === 'true') {
            return;
          }
          const code = pre.querySelector('code');
          if (!code) {
            return;
          }
          const button = document.createElement('button');
          button.type = 'button';
          button.className = 'code-copy-btn';
          button.setAttribute('aria-label', labels.copy);
          button.innerHTML =
            '<span class="code-copy-btn__icon" aria-hidden="true">üìã</span>' +
            '<span class="code-copy-btn__text">' + labels.copy + '</span>';
          button.addEventListener('click', async () => {
            const text = (code.textContent || '').replace(/s+$/, '');
            if (!text) {
              return;
            }
            let copied = false;
            if (navigator.clipboard && typeof navigator.clipboard.writeText === 'function') {
              try {
                await navigator.clipboard.writeText(text);
                copied = true;
              } catch (error) {
                copied = false;
              }
            }
            if (!copied) {
              copied = fallbackCopy(text);
            }
            if (copied) {
              showCopyFeedback(button, labels);
            }
          });
          pre.appendChild(button);
          pre.dataset.copyEnhanced = 'true';
        });
      }
      function setTocCollapsed(collapsed, { manual = false } = {}) {
        if (!tocElement) {
          return;
        }
        tocCollapsed = Boolean(collapsed);
        if (manual) {
          tocManualOverride = true;
        }
        tocElement.classList.toggle('post-toc--collapsed', tocCollapsed);
        tocElement.setAttribute('data-collapsed', tocCollapsed ? 'true' : 'false');
        if (tocToggle) {
          tocToggle.setAttribute('aria-expanded', tocCollapsed ? 'false' : 'true');
          tocToggle.setAttribute('aria-label', tocCollapsed ? tocLabels.show : tocLabels.hide);
        }
      }
      function initToc() {
        if (!tocElement) {
          return;
        }
        if (tocToggle) {
          tocToggle.addEventListener('click', () => {
            setTocCollapsed(!tocCollapsed, { manual: true });
          });
        }
        if (tocMediaQuery) {
          const handleMediaChange = (event) => {
            if (tocManualOverride) {
              return;
            }
            setTocCollapsed(event.matches);
          };
          if (typeof tocMediaQuery.addEventListener === 'function') {
            tocMediaQuery.addEventListener('change', handleMediaChange);
          } else if (typeof tocMediaQuery.addListener === 'function') {
            tocMediaQuery.addListener(handleMediaChange);
          }
          setTocCollapsed(tocMediaQuery.matches);
        } else {
          setTocCollapsed(false);
        }
      }
      const storedTheme = (localStorage.getItem(BLOG_THEME_KEY) || '').toLowerCase();
      const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      const initialTheme = storedTheme === 'light' ? 'light' : (storedTheme === 'dark' ? 'dark' : (prefersDark ? 'dark' : 'light'));
      let activeLink = null;
      let ticking = false;
      function applyTheme(theme) {
        const resolved = theme === 'dark' ? 'dark' : 'light';
        body.setAttribute('data-theme', resolved);
        if (themeToggle) {
          themeToggle.classList.toggle('active', resolved === 'dark');
        }
        if (themeThumb) {
          themeThumb.textContent = resolved === 'dark' ? 'üåô' : '‚òÄÔ∏è';
        }
        localStorage.setItem(BLOG_THEME_KEY, resolved);
      }
      function setActive(link) {
        if (activeLink === link) {
          return;
        }
        if (activeLink) {
          activeLink.classList.remove('post-toc__link--active');
        }
        if (link) {
          link.classList.add('post-toc__link--active');
        }
        activeLink = link;
      }
      function updateActiveHeading() {
        if (!headingEntries.length) {
          return;
        }
        const scrollPosition = window.scrollY + 160;
        let current = headingEntries[0];
        for (const item of headingEntries) {
          if (item.target.offsetTop <= scrollPosition) {
            current = item;
          } else {
            break;
          }
        }
        setActive(current.link);
      }
      function onScroll() {
        if (ticking) {
          return;
        }
        ticking = true;
        window.requestAnimationFrame(() => {
          updateActiveHeading();
          ticking = false;
        });
      }
      document.addEventListener('keydown', (event) => {
        if (event.key === 'Escape') {
          closeTableOverlay();
        }
      });
      enhanceTables();
      enhanceCodeBlocks();
      initToc();
      applyTheme(initialTheme);
      if (themeToggle) {
        themeToggle.addEventListener('click', () => {
          applyTheme(body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark');
        });
      }
      if (langBtn) {
        langBtn.textContent = CURRENT_LANG === 'it' ? 'EN' : 'IT';
        if (OTHER_LANG_LINK) {
          langBtn.addEventListener('click', () => {
            localStorage.setItem(BLOG_LANG_KEY, OTHER_LANG);
            window.location.href = OTHER_LANG_LINK;
          });
        } else {
          langBtn.disabled = true;
          langBtn.classList.add('lang-btn--disabled');
        }
      }
      localStorage.setItem(BLOG_LANG_KEY, CURRENT_LANG);
      if (headingEntries.length) {
        headingEntries.sort((a, b) => a.target.offsetTop - b.target.offsetTop);
        updateActiveHeading();
        window.addEventListener('scroll', onScroll, { passive: true });
      }
    })();
  </script>
</body>
</html>