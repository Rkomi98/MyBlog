<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600">
  <!--
  TechViz Architect - Modern Dark Mode Theme
  Concept: TIR Sensor Physics & Temperature Inversion
  -->

  <defs>
    <!-- Background Gradient: Deep Space Blue -->
    <linearGradient id="bg-grad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#0b1224" />
      <stop offset="100%" stop-color="#111c33" />
    </linearGradient>

    <!-- Node Gradient 1: Source (Warm Earth) -->
    <linearGradient id="grad-source" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#fca5a5" /> <!-- red-300 -->
      <stop offset="100%" stop-color="#ef4444" /> <!-- red-500 -->
    </linearGradient>

    <!-- Node Gradient 2: Sensor (Tech/Cold) -->
    <linearGradient id="grad-sensor" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#67e8f9" /> <!-- cyan-300 -->
      <stop offset="100%" stop-color="#06b6d4" /> <!-- cyan-500 -->
    </linearGradient>

    <!-- Node Gradient 3: Processing (Math/Purple) -->
    <linearGradient id="grad-math" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#d8b4fe" /> <!-- purple-300 -->
      <stop offset="100%" stop-color="#a855f7" /> <!-- purple-500 -->
    </linearGradient>

    <!-- Node Gradient 4: Output (Gold/Result) -->
    <linearGradient id="grad-out" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#fcd34d" /> <!-- amber-300 -->
      <stop offset="100%" stop-color="#f59e0b" /> <!-- amber-500 -->
    </linearGradient>

    <!-- Glow Filter for Floating Effect -->
    <filter id="glow" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- Drop Shadow -->
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="8" stdDeviation="4" flood-color="#000" flood-opacity="0.6" />
    </filter>

    <!-- Arrow Marker -->
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#94a3b8" />
    </marker>
  </defs>

  <!-- Canvas Background -->
  <rect width="100%" height="100%" fill="url(#bg-grad)" rx="20" />

  <!-- Title Block -->
  <text x="450" y="60" font-family="'Segoe UI', Roboto, Helvetica, Arial, sans-serif" font-size="28" fill="#f8fafc" text-anchor="middle" font-weight="700" letter-spacing="1.5">
    FISICA DEL TELERILEVAMENTO TERMICO
  </text>
  <line x1="250" y1="80" x2="650" y2="80" stroke="#334155" stroke-width="2" stroke-linecap="round" />

  <!-- CONNECTORS (Layered behind nodes) -->
  <!-- 1. Source -> Sensor -->
  <path d="M220,250 L280,250" stroke="#475569" stroke-width="2" marker-end="url(#arrow)" />
  <!-- 2. Sensor -> Inversion -->
  <path d="M440,250 L500,250" stroke="#475569" stroke-width="2" marker-end="url(#arrow)" />
  <!-- 3. Inversion -> Output -->
  <path d="M660,250 L720,250" stroke="#475569" stroke-width="2" marker-end="url(#arrow)" />

  <!-- Feedback Loop: Corrections -->
  <path d="M580,310 L580,380 L650,380" stroke="#64748b" stroke-width="2" stroke-dasharray="5,5" fill="none" marker-end="url(#arrow)" />
  <path d="M800,380 L800,330" stroke="#64748b" stroke-width="2" stroke-dasharray="5,5" fill="none" marker-end="url(#arrow)" />

  <!-- NODES -->

  <!-- NODE 1: SORGENTE (Source) -->
  <g transform="translate(60, 190)" filter="url(#shadow)">
    <!-- Main Box -->
    <rect width="160" height="120" rx="12" fill="#1e293b" stroke="url(#grad-source)" stroke-width="2" />
    <!-- Header -->
    <rect width="160" height="30" rx="12" fill="url(#grad-source)" fill-opacity="0.2" />
    <path d="M0,12 Q0,0 12,0 L148,0 Q160,0 160,12 L160,30 L0,30 Z" fill="url(#grad-source)" fill-opacity="0.3" />
    <text x="80" y="22" font-family="'Segoe UI', sans-serif" font-size="14" fill="#fca5a5" text-anchor="middle" font-weight="bold">SORGENTE</text>
    <!-- Content -->
    <text x="80" y="60" font-family="'Segoe UI', sans-serif" font-size="12" fill="#e2e8f0" text-anchor="middle">Oggetto (Terra/Mare)</text>
    <text x="80" y="80" font-family="'Segoe UI', sans-serif" font-size="11" fill="#94a3b8" text-anchor="middle">Emette Radianza</text>
    <text x="80" y="100" font-family="'Segoe UI', sans-serif" font-size="10" fill="#64748b" text-anchor="middle" font-style="italic">Legge di Planck</text>
  </g>

  <!-- NODE 2: SENSORE (Sensor) -->
  <g transform="translate(280, 190)" filter="url(#shadow)">
    <rect width="160" height="120" rx="12" fill="#1e293b" stroke="url(#grad-sensor)" stroke-width="2" />
    <rect width="160" height="30" rx="12" fill="url(#grad-sensor)" fill-opacity="0.2" />
    <path d="M0,12 Q0,0 12,0 L148,0 Q160,0 160,12 L160,30 L0,30 Z" fill="url(#grad-sensor)" fill-opacity="0.3" />
    <text x="80" y="22" font-family="'Segoe UI', sans-serif" font-size="14" fill="#67e8f9" text-anchor="middle" font-weight="bold">SENSORE TIR</text>
    <text x="80" y="60" font-family="'Segoe UI', sans-serif" font-size="12" fill="#e2e8f0" text-anchor="middle">Fotodiodo (HgCdTe)</text>
    <text x="80" y="80" font-family="'Segoe UI', sans-serif" font-size="11" fill="#94a3b8" text-anchor="middle">Fotoni &#8594; DN</text>
    <text x="80" y="100" font-family="'Segoe UI', sans-serif" font-size="10" fill="#22d3ee" text-anchor="middle">Calibrazione Radiometrica</text>
  </g>

  <!-- NODE 3: INVERSIONE (Processing) -->
  <g transform="translate(500, 190)" filter="url(#shadow)">
    <rect width="160" height="120" rx="12" fill="#1e293b" stroke="url(#grad-math)" stroke-width="2" />
    <rect width="160" height="30" rx="12" fill="url(#grad-math)" fill-opacity="0.2" />
    <path d="M0,12 Q0,0 12,0 L148,0 Q160,0 160,12 L160,30 L0,30 Z" fill="url(#grad-math)" fill-opacity="0.3" />
    <text x="80" y="22" font-family="'Segoe UI', sans-serif" font-size="14" fill="#d8b4fe" text-anchor="middle" font-weight="bold">INVERSIONE</text>
    <text x="80" y="60" font-family="'Segoe UI', sans-serif" font-size="12" fill="#e2e8f0" text-anchor="middle">Calcolo Matematico</text>
    <text x="80" y="80" font-family="'Segoe UI', sans-serif" font-size="11" fill="#94a3b8" text-anchor="middle">L(misurata) &#8594; T(brillanza)</text>
    <text x="80" y="100" font-family="'Segoe UI', sans-serif" font-size="10" fill="#c084fc" text-anchor="middle">Assume &epsilon; = 1</text>
  </g>

  <!-- NODE 4: FATTORI DI CORREZIONE (Correction) -->
  <g transform="translate(650, 360)" filter="url(#shadow)">
    <rect width="180" height="80" rx="12" fill="#251d3a" stroke="#94a3b8" stroke-width="1" stroke-dasharray="4,2" />
    <text x="90" y="25" font-family="'Segoe UI', sans-serif" font-size="12" fill="#e2e8f0" text-anchor="middle" font-weight="bold">CORREZIONI NECESSARIE</text>
    <text x="90" y="45" font-family="'Segoe UI', sans-serif" font-size="11" fill="#cbd5e1" text-anchor="middle">1. Emissivit√† superficie (&epsilon; &lt; 1)</text>
    <text x="90" y="60" font-family="'Segoe UI', sans-serif" font-size="11" fill="#cbd5e1" text-anchor="middle">2. Assorbimento Atmosferico</text>
  </g>

  <!-- NODE 5: OUTPUT FINALE (Final Output) -->
  <g transform="translate(720, 190)" filter="url(#shadow)">
    <rect width="160" height="140" rx="12" fill="#1e293b" stroke="url(#grad-out)" stroke-width="2" />
    <rect width="160" height="30" rx="12" fill="url(#grad-out)" fill-opacity="0.2" />
    <path d="M0,12 Q0,0 12,0 L148,0 Q160,0 160,12 L160,30 L0,30 Z" fill="url(#grad-out)" fill-opacity="0.3" />
    <text x="80" y="22" font-family="'Segoe UI', sans-serif" font-size="14" fill="#fcd34d" text-anchor="middle" font-weight="bold">OUTPUT</text>
    <text x="80" y="60" font-family="'Segoe UI', sans-serif" font-size="13" fill="#fcd34d" text-anchor="middle" font-weight="bold">TEMP. REALE</text>
    <text x="80" y="80" font-family="'Segoe UI', sans-serif" font-size="11" fill="#e2e8f0" text-anchor="middle">Cinetica (LST/SST)</text>
    <line x1="30" y1="95" x2="130" y2="95" stroke="#475569" stroke-width="1" />
    <text x="80" y="115" font-family="'Segoe UI', sans-serif" font-size="10" fill="#94a3b8" text-anchor="middle">Dato geofisico finale</text>
  </g>

  <!-- Info Labels -->
  <text x="250" y="170" font-family="'Segoe UI', sans-serif" font-size="10" fill="#64748b" text-anchor="middle">Energia Termica</text>
  <text x="610" y="170" font-family="'Segoe UI', sans-serif" font-size="10" fill="#64748b" text-anchor="middle">Equazione Inversa</text>

</svg>
