<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mirko Calcaterra - Geoinformatics Engineer & AI Specialist</title>
    <meta name="description" content="Mirko Calcaterra - Geoinformatics Engineer & AI Specialist. Esplora il mio portfolio e blog su AI, Data Engineering, Deep Learning e dati geospaziali.">
    <meta name="keywords" content="Mirko Calcaterra, AI Engineer, Geoinformatics, Data Science, Python, Deep Learning, Blog, DataPizza, Point Cloud, RAG, GenAI">
    <meta name="author" content="Mirko Calcaterra">
    <meta name="google-site-verification" content="1GPlbblgvgP-sKk0RX9fxwUdhayyd5jb-ag0WZa7cks" />
    <link rel="canonical" href="https://rkomi98.github.io/MyBlog/">

    <!-- Google Analytics (GA4) - Uncomment and replace G-XXXXXXXXXX with your Measurement ID
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-XXXXXXXXXX');
    </script>
    -->

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://rkomi98.github.io/MyBlog/">
    <meta property="og:title" content="Mirko Calcaterra - Geoinformatics Engineer & AI Specialist">
    <meta property="og:description" content="Esplora progetti e articoli su AI, Data Engineering e Geoinformatica.">
    <meta property="og:image" content="https://rkomi98.github.io/MyBlog/Assets/Logo.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://rkomi98.github.io/MyBlog/">
    <meta property="twitter:title" content="Mirko Calcaterra - Geoinformatics Engineer & AI Specialist">
    <meta property="twitter:description" content="Esplora progetti e articoli su AI, Data Engineering e Geoinformatica.">
    <meta property="twitter:image" content="https://rkomi98.github.io/MyBlog/Assets/Logo.png">

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "Mirko Calcaterra",
      "url": "https://rkomi98.github.io/MyBlog/",
      "image": "https://rkomi98.github.io/MyBlog/Assets/profile.JPG",
      "sameAs": [
        "https://www.linkedin.com/in/mirko-calcaterra-30029519b/",
        "https://github.com/Rkomi98",
        "https://www.youtube.com/@mirkocalcaterra983"
      ],
      "jobTitle": "AI Engineer & Geoinformatics Engineer",
      "worksFor": {
        "@type": "Organization",
        "name": "DataPizza"
      },
      "alumniOf": {
        "@type": "CollegeOrUniversity",
        "name": "Politecnico di Milano"
      },
      "knowsAbout": ["Artificial Intelligence", "Geoinformatics", "Deep Learning", "Data Engineering", "Python", "RAG Systems"]
    }
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #7c3aed;
            --accent: #06b6d4;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            
            --bg-primary: #ffffff;
            --bg-secondary: #f9fafb;
            --bg-tertiary: #f3f4f6;
            --bg-card: #ffffff;
            --bg-code: #000000;
            --text-code: #f3f4f6;
            
            --text-primary: #111827;
            --text-secondary: #4b5563;
            --text-tertiary: #9ca3af;
            
            --border: #e5e7eb;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            
            --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-accent: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        [data-theme="dark"] {
            --primary: #3b82f6;
            --primary-dark: #2563eb;
            --secondary: #8b5cf6;
            --accent: #14b8a6;
            
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --bg-card: #1e293b;
            --bg-code: #000000;
            --text-code: #f3f4f6;
            
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-tertiary: #94a3b8;
            
            --border: #334155;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.2);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.5);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background-color: var(--bg-primary);
            transition: all 0.3s ease;
            overflow-x: hidden;
        }
        
        html {
            scroll-behavior: smooth;
        }

        /* Scrollbar personalizzata */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }

        /* Header */
        header {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        [data-theme="dark"] header {
            background: rgba(15, 23, 42, 0.95);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            transition: transform 0.3s ease;
        }

        .logo:hover {
            transform: translateX(5px);
        }

        .logo-img {
            height: 40px;
            width: auto;
        }

        nav {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
        }

        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
            position: relative;
        }

        .nav-link:hover {
            color: var(--primary);
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: width 0.3s ease;
        }

        .nav-link:hover::after {
            width: 100%;
        }

        .controls {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .theme-toggle {
            width: 50px;
            height: 26px;
            background: var(--bg-tertiary);
            border-radius: 13px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid var(--border);
        }

        .theme-toggle::after {
            content: 'üåû';
            position: absolute;
            width: 22px;
            height: 22px;
            background: white;
            border-radius: 50%;
            top: 1px;
            left: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-sm);
        }

        .theme-toggle.active {
            background: var(--primary);
        }

        .theme-toggle.active::after {
            content: 'üåô';
            left: 25px;
        }

        .lang-btn {
            padding: 6px 12px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .lang-btn:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Main Container */
        main {
            margin-top: 73px;
            min-height: calc(100vh - 73px);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Hero Section */
        .hero {
            padding: 5rem 0;
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, var(--primary) 0%, transparent 70%);
            opacity: 0.05;
            animation: float 20s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(30px, -30px) rotate(120deg); }
            66% { transform: translate(-20px, 20px) rotate(240deg); }
        }

        .hero-content {
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 4rem;
            align-items: center;
            position: relative;
            z-index: 1;
        }

        .hero-left {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
        }

        .profile-card {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: var(--shadow-xl);
            text-align: center;
            width: 100%;
            max-width: 350px;
            position: relative;
            overflow: hidden;
        }

        .profile-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100px;
            background: var(--gradient-primary);
            opacity: 0.1;
        }

        .profile-img-container {
            position: relative;
            width: 180px;
            height: 180px;
            margin: 0 auto 1.5rem;
        }

        .profile-img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid white;
            box-shadow: var(--shadow-lg);
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .profile-img:hover {
            transform: scale(1.05);
        }

        .profile-status {
            position: absolute;
            bottom: 10px;
            right: 10px;
            width: 30px;
            height: 30px;
            background: var(--success);
            border-radius: 50%;
            border: 3px solid white;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .profile-name {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .profile-title {
            color: var(--text-secondary);
            font-size: 0.95rem;
            margin-bottom: 1.5rem;
            font-weight: 500;
        }

        .profile-contacts {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
            text-align: left;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .contact-item:hover {
            color: var(--primary);
            transform: translateX(5px);
        }

        .contact-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hero-right {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .hero-title {
            font-size: 3rem;
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: 1rem;
        }

        .hero-subtitle {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
            line-height: 1.8;
        }

        .hero-bio {
            background: var(--bg-card);
            border-radius: 15px;
            padding: 2rem;
            box-shadow: var(--shadow-md);
            border-left: 4px solid var(--primary);
        }

        .bio-text {
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 1.5rem;
        }

        .skills-container {
            margin-top: 2rem;
        }

        .skills-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .skills-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
        }

        .skill-tag {
            padding: 6px 14px;
            background: var(--bg-tertiary);
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--text-secondary);
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .skill-tag:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .cta-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .cta-button {
            padding: 12px 28px;
            border-radius: 10px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            box-shadow: var(--shadow-md);
        }

        .cta-primary {
            background: var(--gradient-primary);
            color: white;
        }

        .cta-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .cta-secondary {
            background: var(--bg-card);
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .cta-secondary:hover {
            background: var(--primary);
            color: white;
        }

        /* Blog Section */
        .blog-section {
            padding: 5rem 0;
            display: none;
        }

        .blog-header {
            text-align: center;
            margin-bottom: 4rem;
        }

        .blog-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .blog-subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .blog-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            align-items: flex-end;
            justify-content: center;
            margin-top: 2.5rem;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            min-width: 220px;
        }

        .control-group label {
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        .control-group select {
            padding: 0.75rem 1rem;
            border: 1px solid var(--border);
            border-radius: 12px;
            background: var(--bg-card);
            color: var(--text-primary);
            font-size: 1rem;
            box-shadow: var(--shadow-sm);
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }

        .control-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.15);
        }

        .articles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .articles-empty {
            grid-column: 1 / -1;
            text-align: center;
            color: var(--text-secondary);
            background: var(--bg-tertiary);
            padding: 2rem;
            border-radius: 15px;
            box-shadow: var(--shadow-sm);
        }

        .article-card {
            background: var(--bg-card);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .article-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-xl);
        }

        .article-image {
            width: 100%;
            height: 200px;
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .article-image::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent 0%, rgba(0,0,0,0.1) 100%);
        }

        .article-icon {
            font-size: 3rem;
            color: white;
            opacity: 0.9;
        }

        .article-content {
            padding: 1.5rem;
        }

        .article-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .article-category {
            padding: 4px 10px;
            background: var(--bg-tertiary);
            border-radius: 20px;
            font-size: 0.8rem;
            color: var(--primary);
            font-weight: 500;
        }

        .article-date {
            color: var(--text-tertiary);
            font-size: 0.85rem;
        }

        .article-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 0.8rem;
            color: var(--text-primary);
            line-height: 1.4;
        }

        .article-excerpt {
            color: var(--text-secondary);
            line-height: 1.6;
            font-size: 0.95rem;
            margin-bottom: 1rem;
        }

        .article-read-more {
            color: var(--primary);
            font-weight: 500;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            transition: gap 0.3s ease;
        }

        .article-read-more:hover {
            gap: 10px;
        }

        /* Article View */
        .article-view {
            padding: 3rem 0;
            display: none;
            max-width: 800px;
            margin: 0 auto;
        }

        .article-header {
            margin-bottom: 3rem;
        }

        .article-back {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            margin-bottom: 2rem;
            transition: all 0.3s ease;
        }

        .article-back:hover {
            color: var(--primary);
            transform: translateX(-5px);
        }

        .article-full {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 3rem;
            box-shadow: var(--shadow-lg);
        }

        .article-full h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            line-height: 1.3;
        }

        .article-info {
            display: flex;
            gap: 2rem;
            padding-bottom: 2rem;
            border-bottom: 2px solid var(--border);
            margin-bottom: 2rem;
            color: var(--text-secondary);
        }

        .article-body {
            line-height: 1.8;
            font-size: 1.05rem;
        }

        .article-body h1,
        .article-body h2,
        .article-body h3 {
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-weight: 600;
            scroll-margin-top: 140px;
        }

        .article-body h2 {
            font-size: 1.8rem;
            color: var(--text-primary);
        }

        .article-body h3 {
            font-size: 1.4rem;
            color: var(--text-primary);
        }

        .article-body p {
            margin-bottom: 1.5rem;
            color: var(--text-secondary);
        }
        
        .article-body img {
            width: 100%;
            max-width: 100%;
            height: auto;
            display: block;
            margin: 2rem auto;
            border-radius: 15px;
            box-shadow: var(--shadow-md);
            background: var(--bg-card);
        }

        .article-body ul,
        .article-body ol {
            margin-bottom: 1.5rem;
            padding-left: 2rem;
            color: var(--text-secondary);
        }

        .article-body li {
            margin-bottom: 0.5rem;
        }

        .article-body code {
            background: var(--bg-code);
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9em;
            color: var(--text-code);
        }

        .article-body pre {
            background: var(--bg-code);
            padding: 1.5rem;
            border-radius: 10px;
            overflow-x: auto;
            margin-bottom: 1.5rem;
            border-left: 3px solid var(--primary);
            box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.05);
        }

        .article-body pre code {
            background: inherit;
            padding: 0;
            color: var(--text-code);
            display: block;
        }

        .article-body blockquote {
            border-left: 4px solid var(--primary);
            padding-left: 1.5rem;
            margin: 2rem 0;
            color: var(--text-secondary);
            font-style: italic;
            background: var(--bg-tertiary);
            padding: 1.5rem;
            border-radius: 0 10px 10px 0;
        }

        .article-body a {
            color: var(--primary);
            text-decoration: none;
            border-bottom: 1px solid transparent;
            transition: border-color 0.3s ease;
        }

        .article-body a:hover {
            border-bottom-color: var(--primary);
        }

        .article-toc {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 1.5rem;
            margin: 2rem 0;
            box-shadow: var(--shadow-sm);
        }

        .article-toc-title {
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-primary);
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 0.04em;
        }

        .article-toc-list {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            gap: 0.35rem;
        }

        .article-toc-item {
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .article-toc-item.level-1 {
            padding-left: 1rem;
        }

        .article-toc-item.level-2 {
            padding-left: 2rem;
        }

        .article-toc-item.level-3 {
            padding-left: 3rem;
        }

        .article-toc-item.level-4 {
            padding-left: 4rem;
        }

        .article-toc-item.level-5 {
            padding-left: 5rem;
        }

        .article-toc-link {
            color: var(--text-secondary);
            text-decoration: none;
            border-bottom: 1px solid transparent;
            transition: color 0.2s ease, border-color 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
        }

        .article-toc-link::before {
            content: "‚Ä¢";
            color: var(--primary);
            font-size: 0.75rem;
        }

        .article-toc-link:hover,
        .article-toc-link:focus {
            color: var(--primary);
            border-bottom-color: var(--primary);
            outline: none;
        }

        /* Footer */
        footer {
            padding: 3rem 0;
            background: var(--bg-secondary);
            text-align: center;
            border-top: 1px solid var(--border);
        }

        .footer-content {
            color: var(--text-secondary);
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .social-link {
            width: 40px;
            height: 40px;
            background: var(--bg-tertiary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            color: var(--text-secondary);
            transition: all 0.3s ease;
        }

        .social-link:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-3px);
        }

        /* Admin Upload Section - Hidden */
        .admin-upload {
            display: none;
            background: var(--bg-tertiary);
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            border: 2px dashed var(--border);
        }

        .admin-upload input {
            display: none;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .hero-content {
                grid-template-columns: 1fr;
                gap: 3rem;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .header-content {
                padding: 1rem;
            }

            .nav-links {
                display: none;
            }

            .hero-title {
                font-size: 2rem;
            }

            .articles-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .article-full {
                padding: 1.5rem;
            }
        }

        /* Loading animation */
        .loader {
            border: 3px solid var(--bg-tertiary);
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 2rem auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <a href="./index.html" class="logo">
                <picture>
                    <source srcset="Assets/Logo.webp" type="image/webp">
                    <source srcset="Assets/Logo.png" type="image/png">
                    <img src="Assets/Logo.png" alt="Mirko Calcaterra logo" class="logo-img" width="40" height="40">
                </picture>
                <span>Mirko Calcaterra</span>
            </a>
            <nav>
                <div class="nav-links">
                    <a href="blog/index.html" class="nav-link" data-it="Blog" data-en="Blog">Blog</a>
                </div>
                <div class="controls">
                    <button class="lang-btn" onclick="toggleLanguage()">EN</button>
                    <div class="theme-toggle" onclick="toggleTheme()"></div>
                </div>
            </nav>
        </div>
    </header>

    <main>
        <!-- Hero Section -->
        <section id="home" class="hero">
            <div class="container">
                <div class="hero-content">
                    <div class="hero-left">
                        <div class="profile-card">
                            <div class="profile-img-container">
                                <picture>
                                    <source srcset="Assets/profile.webp" type="image/webp">
                                    <source srcset="Assets/profile.JPG" type="image/jpeg">
                                    <img src="Assets/profile.JPG" alt="Mirko Calcaterra" class="profile-img" id="profile-img" width="180" height="180">
                                </picture>
                                <div class="profile-status"></div>
                            </div>
                            <h2 class="profile-name">Mirko Calcaterra</h2>
                            <p class="profile-title" data-it="Ingegnere Geoinformatico & AI Specialist" data-en="Geoinformatics Engineer & AI Specialist">
                                Ingegnere Geoinformatico & AI Specialist
                            </p>
                            <div class="profile-contacts">
                                <a href="mailto:mirkocalcaterra@datapizza.tech" class="contact-item">
                                    <span class="contact-icon">‚úâÔ∏è</span>
                                    <span>mirkocalcaterra@datapizza.tech</span>
                                </a>
                                <a href="https://www.linkedin.com/in/mirko-calcaterra-30029519b/" class="contact-item" target="_blank">
                                    <span class="contact-icon">üíº</span>
                                    <span>LinkedIn</span>
                                </a>
                                <a href="https://github.com/Rkomi98" class="contact-item" target="_blank">
                                    <span class="contact-icon">üîó</span>
                                    <span>GitHub</span>
                                </a>
                                <a href="https://www.youtube.com/@mirkocalcaterra983" class="contact-item" target="_blank">
                                    <span class="contact-icon">üì∫</span>
                                    <span>Mirko Calcaterra</span>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="hero-right">
                        <h1 class="hero-title" data-it="Trasformo Dati Complessi in Soluzioni Intelligenti" 
                            data-en="Transforming Complex Data into Intelligent Solutions">
                            Trasformo Dati Complessi in Soluzioni Intelligenti
                        </h1>
                        <p class="hero-subtitle" data-it="Dal Deep Learning applicato a Point Cloud 3D fino ai sistemi Multi-Agente e RAG avanzati"
                           data-en="From Deep Learning on 3D Point Clouds to Multi-Agent Systems and Advanced RAG">
                            Dal Deep Learning applicato a Point Cloud 3D fino ai sistemi Multi-Agente e RAG avanzati
                        </p>
                        
                        <div class="hero-bio">
                            <p class="bio-text" data-it="Ingegnere Geoinformatico con Master al Politecnico di Milano (107/110) e solide basi in Ingegneria Matematica. Attualmente AI Engineer presso DataPizza, dove sviluppo framework open-source per GenAI, chatbot multimodali e pipeline RAG avanzate. La mia tesi ha innovato il campo del point cloud cleaning con metodi deep learning su PyTorch. Ambassador Polimi per Smart Infrastructures e Match Analyst per squadre di pallavolo, unendo tecnologia e sport attraverso l'analisi dati."
                               data-en="Geoinformatics Engineer with Master's from Politecnico di Milano (107/110) and solid foundation in Mathematical Engineering. Currently AI Engineer at DataPizza, developing open-source GenAI frameworks, multimodal chatbots, and advanced RAG pipelines. My thesis innovated point cloud cleaning using deep learning with PyTorch. Polimi Ambassador for Smart Infrastructures and Volleyball Match Analyst, combining technology and sports through data analysis.">
                                Ingegnere Geoinformatico con Master al Politecnico di Milano (107/110) e solide basi in Ingegneria Matematica. Attualmente AI Engineer presso DataPizza, dove sviluppo framework open-source per GenAI, chatbot multimodali e pipeline RAG avanzate. La mia tesi ha innovato il campo del point cloud cleaning con metodi deep learning su PyTorch. Ambassador Polimi per Smart Infrastructures e Match Analyst per squadre di pallavolo, unendo tecnologia e sport attraverso l'analisi dati.
                            </p>
                            <div class="skills-container">
                                <h3 class="skills-title" data-it="Competenze Principali" data-en="Core Skills">Competenze Principali</h3>
                                <div class="skills-grid">
                                    <span class="skill-tag">Python</span>
                                    <span class="skill-tag">PyTorch</span>
                                    <span class="skill-tag">TensorFlow</span>
                                    <span class="skill-tag">Transformers</span>
                                    <span class="skill-tag">LangChain</span>
                                    <span class="skill-tag">RAG Systems</span>
                                    <span class="skill-tag">Multi-Agent AI</span>
                                    <span class="skill-tag">Point Clouds</span>
                                    <span class="skill-tag">GIS</span>
                                    <span class="skill-tag">Earth Observation</span>
                                    <span class="skill-tag">Docker</span>
                                    <span class="skill-tag">QGIS</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="cta-buttons">
                            <a href="blog/index.html" class="cta-button cta-primary">
                                <span data-it="Esplora il Blog" data-en="Explore Blog">Esplora il Blog</span>
                                <span>‚Üí</span>
                            </a>
                            <a href="https://github.com/Rkomi98" class="cta-button cta-secondary" target="_blank">
                                <span data-it="I Miei Progetti" data-en="My Projects">I Miei Progetti</span>
                                <span>‚Üó</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Blog Section -->
        <section id="blog" class="blog-section">
            <div class="container">
                <div class="blog-header">
                    <h2 class="blog-title" data-it="Il Mio Blog Tecnico" data-en="My Technical Blog">Il Mio Blog Tecnico</h2>
                    <p class="blog-subtitle" data-it="Condivido esperienze, progetti e riflessioni su AI, Geoinformatica e Data Science"
                       data-en="Sharing experiences, projects, and insights on AI, Geoinformatics, and Data Science">
                        Condivido esperienze, progetti e riflessioni su AI, Geoinformatica e Data Science
                    </p>
                </div>
                
                <!-- Hidden Admin Upload Section -->
                <div class="admin-upload" id="admin-upload">
                    <input type="file" id="markdown-upload" accept=".md,.markdown" onchange="handleFileUpload(event)">
                    <label for="markdown-upload">Upload Markdown</label>
                </div>

                <div class="blog-controls">
                    <div class="control-group">
                        <label for="category-filter" data-it="Filtra per categoria" data-en="Filter by category">Filtra per categoria</label>
                        <select id="category-filter">
                            <option value="all" data-it="Tutte" data-en="All">Tutte</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label for="sort-order" data-it="Ordina per data" data-en="Sort by date">Ordina per data</label>
                        <select id="sort-order">
                            <option value="desc" data-it="Pi√π recenti" data-en="Newest first">Pi√π recenti</option>
                            <option value="asc" data-it="Meno recenti" data-en="Oldest first">Meno recenti</option>
                        </select>
                    </div>
                </div>
                
                <div id="articles-container" class="articles-grid"></div>
            </div>
        </section>

        <!-- Article View -->
        <section id="article-view" class="article-view">
            <div class="container">
                <div class="article-header">
                    <a href="blog/index.html" class="article-back">
                        <span>‚Üê</span>
                        <span data-it="Torna al Blog" data-en="Back to Blog">Torna al Blog</span>
                    </a>
                </div>
                <div class="article-full">
                    <div id="article-display"></div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <p>&copy; 2025 Mirko Calcaterra. <span data-it="Tutti i diritti riservati" data-en="All rights reserved">Tutti i diritti riservati</span>.</p>
                <div class="social-links">
                    <a href="https://github.com/Rkomi98" target="_blank" class="social-link">
                        <span>G</span>
                    </a>
                    <a href="https://www.linkedin.com/in/mirko-calcaterra-30029519b/" target="_blank" class="social-link">
                        <span>L</span>
                    </a>
                    <a href="https://www.youtube.com/@mirkocalcaterra983" target="_blank" class="social-link">
                        <span>Y</span>
                    </a>
                    <a href="mailto:mirkocalcaterra@datapizza.tech" class="social-link">
                        <span>@</span>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        if (window.marked && typeof marked.use === 'function') {
            marked.use({
                mangle: false,
                headerIds: true,
                headerPrefix: ''
            });
        }
        
        // Language management
        let currentLang = 'en';
        let articlesCache = null;
        const themeToggleElement = document.querySelector('.theme-toggle');
        let currentCategoryFilter = 'all';
        let currentSortOrder = 'desc';
        let currentArticleIndex = null;
        const categoryFilterElement = document.getElementById('category-filter');
        const sortOrderElement = document.getElementById('sort-order');
        const localFileAccessHint = 'Serve il sito tramite un server locale (es. `python -m http.server 8000`) per consentire al browser di caricare i file Markdown. / Serve the site through a local HTTP server (e.g. `python -m http.server 8000`) so the browser can load the Markdown files.';
        const ARTICLES_STORAGE_KEY = 'blogArticles';
        const ARTICLES_SIGNATURE_KEY = 'blogArticlesSignature';
        const SUPPORTED_LANGUAGES = ['it', 'en'];
        const DEFAULT_ARTICLES_FALLBACK = [
            {
                slug: "docker-container-fundamentals",
                titles: {
                    it: "Docker: Basics",
                    en: "Docker Basics"
                },
                category: "Docker",
                categoryLabels: {
                    it: "Docker",
                    en: "Docker"
                },
                readTime: 15,
                date: "2025-10-15",
                icon: "üê≥",
                markdownPaths: {
                    it: "files/Docker_01.md",
                    en: "files/Docker_01_en.md"
                }
            },
            {
                slug: "docker-dentro-il-container",
                titles: {
                    it: "Docker: Dentro il Container",
                    en: "Docker Deep Dive: Inside the Container"
                },
                category: "Docker",
                categoryLabels: {
                    it: "Docker",
                    en: "Docker"
                },
                readTime: 15,
                date: "2025-10-30",
                icon: "üê≥",
                markdownPaths: {
                    it: "files/Docker_02.md",
                    en: "files/Docker_02_en.md"
                }
            },
            {
                slug: "vibe-coding-vs-traditional",
                titles: {
                    it: "Vibe Coding vs Programmazione Tradizionale (2023-2025)",
                    en: "Vibe Coding vs Traditional Development (2023-2025)"
                },
                category: "Programming",
                categoryLabels: {
                    it: "Programmazione",
                    en: "Programming"
                },
                readTime: 15,
                date: "2025-10-29",
                icon: "ü§ñ",
                markdownPaths: {
                    it: "files/articolo-vibe-coding-vs-trad-coding.md",
                    en: "files/articolo-vibe-coding-vs-trad-coding_en.md"
                }
            },
            {
                slug: "kinetica-cache-optimization",
                titles: {
                    it: "Ottimizzazione della Cache con Kinetica",
                    en: "Cache Optimization with Kinetica"
                },
                category: "Data Engineering",
                categoryLabels: {
                    it: "Data Engineering",
                    en: "Data Engineering"
                },
                readTime: 10,
                date: "2025-10-25",
                icon: "üíª",
                markdownPaths: {
                    it: "files/Arkemis_Kinetica.md",
                    en: "files/Arkemis_Kinetica_en.md"
                }
            }
        ];
        let defaultArticlesPromise = null;

        function normalizeSlug(value) {
            return (value || '')
                .toString()
                .toLowerCase()
                .normalize('NFD')
                .replace(/[\u0300-\u036f]/g, '')
                .replace(/[^a-z0-9]+/g, '-')
                .replace(/^-+|-+$/g, '');
        }

        function getArticleSlug(article) {
            if (article.slug) return article.slug;
            if (article.titles) {
                for (const lang of SUPPORTED_LANGUAGES) {
                    if (article.titles[lang]) {
                        return normalizeSlug(article.titles[lang]);
                    }
                }
            }
            if (article.title) {
                return normalizeSlug(article.title);
            }
            return `article-${Math.random().toString(36).slice(2)}`;
        }

        function getArticleTitles(article) {
            if (article.titles) return article.titles;
            if (article.title) {
                return {
                    it: article.title,
                    en: article.title
                };
            }
            return {};
        }

        function getLocalizedTitle(article, lang = currentLang) {
            const titles = getArticleTitles(article);
            if (titles[lang]) return titles[lang];
            const fallback = lang === 'it' ? 'en' : 'it';
            if (titles[fallback]) return titles[fallback];
            return article.title || '';
        }

        function getArticleCategoryLabels(article) {
            if (article.categoryLabels) return article.categoryLabels;
            if (article.category) {
                return {
                    it: article.category,
                    en: article.category
                };
            }
            return {
                it: '',
                en: ''
            };
        }

        function getLocalizedCategoryLabel(article, lang = currentLang) {
            const labels = getArticleCategoryLabels(article);
            if (labels[lang]) return labels[lang];
            const fallback = lang === 'it' ? 'en' : 'it';
            return labels[fallback] || article.category || '';
        }

        function getArticleMarkdownPaths(article) {
            if (article.markdownPaths) return article.markdownPaths;
            if (article.markdownPath) {
                return {
                    it: article.markdownPath,
                    en: article.markdownPath
                };
            }
            return {};
        }

        function getMarkdownPathForLang(article, lang = currentLang) {
            const paths = getArticleMarkdownPaths(article);
            if (paths[lang]) return paths[lang];
            const fallback = lang === 'it' ? 'en' : 'it';
            return paths[fallback] || article.markdownPath || '';
        }

        function getArticleContents(article) {
            if (article.contents) return article.contents;
            if (article.content) {
                const inferred = {};
                SUPPORTED_LANGUAGES.forEach(lang => {
                    inferred[lang] = article.content;
                });
                return inferred;
            }
            return {};
        }

        function getArticleContent(article, lang = currentLang) {
            const contents = getArticleContents(article);
            if (contents[lang]) return contents[lang];
            const fallback = lang === 'it' ? 'en' : 'it';
            if (contents[fallback]) return contents[fallback];
            return article.content || '';
        }

        function getCategoryLabelByValue(articles, categoryValue, lang = currentLang) {
            const match = articles.find(item => item.category === categoryValue);
            if (match) {
                return getLocalizedCategoryLabel(match, lang);
            }
            return categoryValue || '';
        }

        function normalizeArticle(article) {
            const normalized = {
                ...article,
                slug: getArticleSlug(article),
                titles: { ...getArticleTitles(article) },
                categoryLabels: { ...getArticleCategoryLabels(article) },
                markdownPaths: { ...getArticleMarkdownPaths(article) },
                contents: { ...(article.contents || {}) }
            };

            if (article.content && (!normalized.contents.en || !normalized.contents.it)) {
                SUPPORTED_LANGUAGES.forEach(lang => {
                    if (!normalized.contents[lang]) {
                        normalized.contents[lang] = article.content;
                    }
                });
            }

            return normalized;
        }

        function computeArticlesSignature(articles) {
            return JSON.stringify(articles.map(article => ({
                slug: getArticleSlug(article),
                titles: getArticleTitles(article),
                date: article.date,
                markdownPaths: getArticleMarkdownPaths(article),
                category: article.category,
                categoryLabels: getArticleCategoryLabels(article),
                readTime: article.readTime,
                icon: article.icon
            })));
        }
        
        if (categoryFilterElement) {
            categoryFilterElement.addEventListener('change', (event) => {
                currentCategoryFilter = event.target.value;
                displayArticles();
            });
        }
        
        if (sortOrderElement) {
            sortOrderElement.addEventListener('change', (event) => {
                currentSortOrder = event.target.value;
                displayArticles();
            });
        }
        
        function toggleLanguage() {
            currentLang = currentLang === 'it' ? 'en' : 'it';
            updateLanguage();
        }
        
        function updateLanguage() {
            document.querySelectorAll('[data-it][data-en]').forEach(element => {
                element.textContent = element.getAttribute(`data-${currentLang}`);
            });
            
            const langButton = document.querySelector('.lang-btn');
            if (langButton) {
                langButton.textContent = currentLang === 'it' ? 'EN' : 'IT';
            }

            const tocTitle = document.querySelector('.article-toc-title');
            if (tocTitle) {
                tocTitle.textContent = currentLang === 'it' ? 'Indice' : 'Table of contents';
            }

            displayArticles();
            renderCurrentArticle();
        }
        
        // Theme management
        function toggleTheme() {
            if (!themeToggleElement) return;
            const isDark = document.documentElement.hasAttribute('data-theme');
            
            if (isDark) {
                document.documentElement.removeAttribute('data-theme');
                localStorage.setItem('theme', 'light');
                themeToggleElement.classList.remove('active');
            } else {
                document.documentElement.setAttribute('data-theme', 'dark');
                localStorage.setItem('theme', 'dark');
                themeToggleElement.classList.add('active');
            }
        }
        
        // Load saved theme
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark' || savedTheme === null) {
            document.documentElement.setAttribute('data-theme', 'dark');
            if (themeToggleElement) {
                themeToggleElement.classList.add('active');
            }
            if (savedTheme === null) {
                localStorage.setItem('theme', 'dark');
            }
        }
        
        // Navigation
        function showHome() {
            document.getElementById('home').style.display = 'block';
            document.getElementById('blog').style.display = 'none';
            document.getElementById('article-view').style.display = 'none';
            currentArticleIndex = null;
        }
        
        function showBlog() {
            window.location.href = 'blog/index.html';
        }

        function slugifyHeading(text) {
            return text
                .toLowerCase()
                .normalize('NFD')
                .replace(/[\u0300-\u036f]/g, '')
                .replace(/[^a-z0-9\s-]/g, '')
                .trim()
                .replace(/\s+/g, '-')
                .replace(/-+/g, '-');
        }

        function ensureHeadingId(heading, usedIds) {
            const baseId = slugifyHeading(heading.textContent || '');
            if (!baseId) {
                return null;
            }
            let candidate = baseId;
            let counter = 1;
            while (usedIds.has(candidate) || document.getElementById(candidate)) {
                candidate = `${baseId}-${counter++}`;
            }
            heading.id = candidate;
            usedIds.add(candidate);
            return candidate;
        }

        function buildArticleTOC(articleBody) {
            if (!articleBody) return;

            articleBody.querySelectorAll('.article-toc').forEach(el => el.remove());

            const rawHeadings = Array.from(articleBody.querySelectorAll('h2, h3, h4, h5, h6'));
            if (!rawHeadings.length) return;

            const tocHeading = rawHeadings.find(heading => (heading.textContent || '').trim().toLowerCase() === 'indice');
            const contentHeadings = rawHeadings.filter(heading => heading !== tocHeading);
            if (!contentHeadings.length) return;

            const usedIds = new Set(contentHeadings.map(h => h.id).filter(Boolean));

            contentHeadings.forEach(heading => {
                if (!heading.id) {
                    ensureHeadingId(heading, usedIds);
                } else {
                    usedIds.add(heading.id);
                }
            });

            const levels = contentHeadings
                .map(heading => parseInt(heading.tagName.slice(1), 10))
                .filter(level => !Number.isNaN(level));

            if (!levels.length) return;

            const baseLevel = Math.min(...levels);

            const toc = document.createElement('nav');
            toc.className = 'article-toc';

            const title = document.createElement('div');
            title.className = 'article-toc-title';
            title.textContent = currentLang === 'it' ? 'Indice' : 'Table of contents';
            toc.appendChild(title);

            const list = document.createElement('ul');
            list.className = 'article-toc-list';

            contentHeadings.forEach(heading => {
                const level = parseInt(heading.tagName.slice(1), 10);
                if (Number.isNaN(level)) return;

                const offset = Math.max(0, level - baseLevel);
                const id = heading.id || ensureHeadingId(heading, usedIds);

                if (!id) return;

                const item = document.createElement('li');
                item.className = `article-toc-item level-${offset}`;

                const link = document.createElement('a');
                link.className = 'article-toc-link';
                link.href = `#${id}`;
                link.textContent = (heading.textContent || '').trim();

                item.appendChild(link);
                list.appendChild(item);
            });

            if (!list.children.length) return;

            toc.appendChild(list);

            if (tocHeading) {
                tocHeading.insertAdjacentElement('afterend', toc);
            } else {
                articleBody.insertAdjacentElement('afterbegin', toc);
            }
        }

        function enhanceArticleBody(articleBody) {
            if (!articleBody) return;
            buildArticleTOC(articleBody);
        }
        
        async function renderCurrentArticle() {
            if (currentArticleIndex === null) return;
            const articleView = document.getElementById('article-view');
            if (!articleView || articleView.style.display === 'none') return;

            const articles = await getArticles();
            const article = articles[currentArticleIndex];
            if (!article) return;

            const display = document.getElementById('article-display');
            if (!display) return;

            const parsedDate = Date.parse(article.date || '');
            const displayDate = Number.isNaN(parsedDate)
                ? (currentLang === 'it' ? 'Data non disponibile' : 'Date unavailable')
                : new Date(parsedDate).toLocaleDateString(currentLang === 'it' ? 'it-IT' : 'en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });

            const content = getArticleContent(article, currentLang);

            display.innerHTML = `
                <h1>${getLocalizedTitle(article, currentLang)}</h1>
                <div class="article-info">
                    <span>üìÖ ${displayDate}</span>
                    <span>üìÅ ${getLocalizedCategoryLabel(article, currentLang)}</span>
                    <span>‚è±Ô∏è ${article.readTime || 0} min</span>
                </div>
                <div class="article-body">${marked.parse(content || '')}</div>
            `;

            const articleBody = display.querySelector('.article-body');
            enhanceArticleBody(articleBody);
        }
        
        async function showArticle(index) {
            document.getElementById('home').style.display = 'none';
            document.getElementById('blog').style.display = 'none';
            document.getElementById('article-view').style.display = 'block';
            currentArticleIndex = index;
            await renderCurrentArticle();
        }
        
        // Articles management with predefined content
        function normalizeMetadataEntry(entry) {
            const fallbackIso = new Date().toISOString();
            try {
                if (entry.date) {
                    const parsed = new Date(entry.date);
                    if (!Number.isNaN(parsed.valueOf())) {
                        return { ...entry, date: parsed.toISOString() };
                    }
                }
            } catch (error) {
                console.warn('Failed to parse blog post date', entry.date, error);
            }
            return { ...entry, date: fallbackIso };
        }

        async function getDefaultArticles() {
            if (!defaultArticlesPromise) {
                defaultArticlesPromise = (async () => {
                    try {
                        const response = await fetch('data/blog-posts.json', { cache: 'no-store' });
                        if (!response.ok) {
                            throw new Error(`Failed to load blog metadata (${response.status})`);
                        }
                        const payload = await response.json();
                        if (!Array.isArray(payload)) {
                            throw new Error('Unexpected blog metadata format');
                        }
                        return payload.map(normalizeMetadataEntry);
                    } catch (error) {
                        console.warn('Falling back to embedded blog metadata', error);
                        return DEFAULT_ARTICLES_FALLBACK.map(normalizeMetadataEntry);
                    }
                })();
            }
            return defaultArticlesPromise;
        }
        
        async function fetchMarkdown(path) {
            const encodedPath = encodeURI(path);
            if (window.location.protocol === 'file:') {
                return new Promise((resolve, reject) => {
                    const xhr = new XMLHttpRequest();
                    xhr.open('GET', encodedPath);
                    xhr.onload = () => {
                        if (xhr.status === 0 || (xhr.status >= 200 && xhr.status < 300)) {
                            resolve(xhr.responseText);
                        } else {
                            reject(new Error(`${localFileAccessHint}`));
                        }
                    };
                    xhr.onerror = () => reject(new Error(`${localFileAccessHint}`));
                    xhr.send();
                });
            }
            
            const response = await fetch(encodedPath, { cache: 'no-store' });
            if (!response.ok) {
                throw new Error(`Failed to load ${path}: ${response.status}`);
            }
            return response.text();
        }
        
        async function ensureArticlesLoaded() {
            if (articlesCache) {
                return articlesCache;
            }

            const defaultsRaw = await getDefaultArticles();
            const defaults = defaultsRaw.map(normalizeArticle);
            const defaultsSignature = computeArticlesSignature(defaults);
            const storedSignature = localStorage.getItem(ARTICLES_SIGNATURE_KEY);
            if (storedSignature !== defaultsSignature) {
                localStorage.removeItem(ARTICLES_STORAGE_KEY);
                localStorage.setItem(ARTICLES_SIGNATURE_KEY, defaultsSignature);
            }

            const storedRaw = localStorage.getItem(ARTICLES_STORAGE_KEY);
            let mergedArticles = [...defaults];

            if (storedRaw) {
                try {
                    const storedParsed = JSON.parse(storedRaw).map(normalizeArticle);
                    const mergedMap = new Map();

                    mergedArticles.forEach(article => {
                        mergedMap.set(article.slug, article);
                    });

                    storedParsed.forEach(article => {
                        const existing = mergedMap.get(article.slug);
                        if (existing) {
                            mergedMap.set(article.slug, {
                                ...existing,
                                ...article,
                                titles: { ...existing.titles, ...article.titles },
                                categoryLabels: { ...existing.categoryLabels, ...article.categoryLabels },
                                markdownPaths: { ...existing.markdownPaths, ...article.markdownPaths },
                                contents: { ...existing.contents, ...article.contents }
                            });
                        } else {
                            mergedMap.set(article.slug, article);
                        }
                    });

                    mergedArticles = Array.from(mergedMap.values());
                } catch (error) {
                    console.error('Failed to parse stored articles', error);
                }
            }

            const loaded = await Promise.all(mergedArticles.map(async (article) => {
                const markdownPaths = { ...article.markdownPaths };
                const contents = { ...article.contents };

                await Promise.all(Object.entries(markdownPaths).map(async ([lang, path]) => {
                    if (!path) return;

                    const shouldFetch = !contents[lang] ||
                        contents[lang].includes('Content will be loaded') ||
                        contents[lang].includes('Content unavailable') ||
                        contents[lang].includes(localFileAccessHint);

                    if (!shouldFetch) return;

                    try {
                        const text = await fetchMarkdown(path);
                        contents[lang] = text;
                    } catch (error) {
                        console.error(error);
                        contents[lang] = `‚ö†Ô∏è ${localFileAccessHint}`;
                    }
                }));

                return {
                    ...article,
                    contents
                };
            }));

            articlesCache = loaded;
            localStorage.setItem(ARTICLES_STORAGE_KEY, JSON.stringify(loaded));
            localStorage.setItem(ARTICLES_SIGNATURE_KEY, defaultsSignature);
            return articlesCache;
        }
        
        async function getArticles() {
            return ensureArticlesLoaded();
        }
        
        async function saveArticles(articles) {
            const normalized = articles.map(normalizeArticle);
            articlesCache = normalized;
            localStorage.setItem(ARTICLES_STORAGE_KEY, JSON.stringify(normalized));
            const defaultsRaw = await getDefaultArticles();
            const defaultsSignature = computeArticlesSignature(defaultsRaw.map(normalizeArticle));
            localStorage.setItem(ARTICLES_SIGNATURE_KEY, defaultsSignature);
        }
        
        function populateCategoryFilter(articles) {
            if (!categoryFilterElement) return;
            
            const categories = Array.from(new Set(articles
                .map(article => article.category)
                .filter(Boolean)))
                .sort((a, b) => a.localeCompare(b));
            
            const preferred = categories.includes(currentCategoryFilter) ? currentCategoryFilter : 'all';
            const existingCategories = Array.from(categoryFilterElement.options)
                .filter(option => option.value !== 'all')
                .map(option => option.value);
            
            const needsUpdate = existingCategories.length !== categories.length ||
                categories.some((category, index) => existingCategories[index] !== category);
            
            if (!needsUpdate) {
                Array.from(categoryFilterElement.options).forEach(option => {
                    if (option.value === 'all') {
                        option.textContent = currentLang === 'it' ? 'Tutte' : 'All';
                    } else {
                        option.textContent = getCategoryLabelByValue(articles, option.value, currentLang);
                    }
                });
                categoryFilterElement.value = preferred;
                currentCategoryFilter = preferred;
                return;
            }
            
            categoryFilterElement.innerHTML = '';
            const allOption = document.createElement('option');
            allOption.value = 'all';
            allOption.setAttribute('data-it', 'Tutte');
            allOption.setAttribute('data-en', 'All');
            allOption.textContent = currentLang === 'it' ? 'Tutte' : 'All';
            categoryFilterElement.appendChild(allOption);
            
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category;
                const labelIt = getCategoryLabelByValue(articles, category, 'it');
                const labelEn = getCategoryLabelByValue(articles, category, 'en');
                option.setAttribute('data-it', labelIt);
                option.setAttribute('data-en', labelEn);
                option.textContent = currentLang === 'it' ? labelIt : labelEn;
                categoryFilterElement.appendChild(option);
            });
            
            currentCategoryFilter = preferred;
            categoryFilterElement.value = preferred;
        }
        
        async function displayArticles() {
            const articles = await getArticles();
            populateCategoryFilter(articles);
            const container = document.getElementById('articles-container');
            if (!container) return;
            
            container.innerHTML = '';
            
            const decoratedArticles = articles.map((article, index) => ({ article, index }));
            
            decoratedArticles.sort((a, b) => {
                const dateA = Date.parse(a.article.date || '');
                const dateB = Date.parse(b.article.date || '');
                const safeA = Number.isNaN(dateA) ? 0 : dateA;
                const safeB = Number.isNaN(dateB) ? 0 : dateB;
                return currentSortOrder === 'asc' ? safeA - safeB : safeB - safeA;
            });
            
            const filteredArticles = decoratedArticles.filter(item => {
                if (currentCategoryFilter === 'all') return true;
                return item.article.category === currentCategoryFilter;
            });
            
            if (filteredArticles.length === 0) {
                const emptyState = document.createElement('div');
                emptyState.className = 'articles-empty';
                emptyState.setAttribute('data-it', 'Nessun articolo disponibile per questa categoria.');
                emptyState.setAttribute('data-en', 'No articles available for this category.');
                emptyState.textContent = currentLang === 'it' ?
                    'Nessun articolo disponibile per questa categoria.' :
                    'No articles available for this category.';
                container.appendChild(emptyState);
                return;
            }
            
            filteredArticles.forEach(({ article, index }) => {
                const card = document.createElement('div');
                card.className = 'article-card';
                card.onclick = () => showArticle(index);
                
                const parsedDate = Date.parse(article.date || '');
                const cardDate = Number.isNaN(parsedDate)
                    ? (currentLang === 'it' ? 'Data n/d' : 'Date n/a')
                    : new Date(parsedDate).toLocaleDateString(currentLang === 'it' ? 'it-IT' : 'en-US', {
                        year: 'numeric',
                        month: 'short',
                        day: 'numeric'
                    });
                
                const localizedContent = getArticleContent(article, currentLang) || '';
                const plainText = localizedContent.replace(/[#*`>-]/g, '').trim();
                const excerpt = plainText.length > 200 ? `${plainText.substring(0, 200)}...` : plainText;
                
                card.innerHTML = `
                    <div class="article-image">
                        <div class="article-icon">${article.icon}</div>
                    </div>
                    <div class="article-content">
                        <div class="article-meta">
                            <span class="article-category">${getLocalizedCategoryLabel(article, currentLang)}</span>
                            <span class="article-date">${cardDate}</span>
                        </div>
                        <h3 class="article-title">${getLocalizedTitle(article, currentLang)}</h3>
                        <p class="article-excerpt">${excerpt}</p>
                        <a href="#" class="article-read-more" onclick="event.stopPropagation(); showArticle(${index}); return false;">
                            ${currentLang === 'it' ? 'Leggi di pi√π' : 'Read more'} ‚Üí
                        </a>
                    </div>
                `;
                
                container.appendChild(card);
            });
        }
        
        // Hidden file upload handler (admin only)
        async function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = async function(e) {
                const content = e.target.result;
                
                // Extract title from first H1 or filename
                const titleMatch = content.match(/^#\s+(.+)$/m);
                const title = titleMatch ? titleMatch[1] : file.name.replace(/\.(md|markdown)$/i, '');
                const slug = `${normalizeSlug(title)}-${Date.now()}`;
                
                const articles = await getArticles();
                const newArticle = {
                    slug,
                    titles: {
                        it: title,
                        en: title
                    },
                    category: "New Post",
                    categoryLabels: {
                        it: "Nuovo articolo",
                        en: "New Post"
                    },
                    readTime: Math.ceil(content.split(' ').length / 200),
                    date: new Date().toISOString(),
                    icon: "üìù",
                    contents: {
                        it: content,
                        en: content
                    },
                    markdownPaths: {}
                };
                articles.unshift(newArticle);
                
                await saveArticles(articles);
                displayArticles();
                
                // Reset file input
                event.target.value = '';
            };
            
            reader.readAsText(file);
        }
        
        // Secret key combination to show upload (Ctrl+Shift+U)
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.shiftKey && e.key === 'U') {
                const uploadSection = document.getElementById('admin-upload');
                uploadSection.style.display = uploadSection.style.display === 'block' ? 'none' : 'block';
            }
        });
        
        function updateProfileImage(src) {
            const mainImage = document.getElementById('profile-img');
            if (mainImage) {
                mainImage.src = src;
            }
        }
        
        function triggerProfileImageUpload() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        const imageSrc = event.target.result;
                        updateProfileImage(imageSrc);
                        localStorage.setItem('profileImage', imageSrc);
                    };
                    reader.readAsDataURL(file);
                }
            };
            input.click();
        }
        
        const profileImage = document.getElementById('profile-img');
        if (profileImage) {
            profileImage.addEventListener('click', triggerProfileImageUpload);
        }
        
        const savedProfileImage = localStorage.getItem('profileImage');
        if (savedProfileImage) {
            updateProfileImage(savedProfileImage);
        }
        
        // Initialize articles cache
        ensureArticlesLoaded().catch(error => {
            console.error('Unable to preload articles', error);
        });
        
        updateLanguage();
        
        // Smooth scrolling for anchor links (works for dynamically injected content too)
        document.addEventListener('click', function (event) {
            const anchor = event.target.closest('a[href^="#"]');
            if (!anchor) return;
            
            const targetSelector = anchor.getAttribute('href');
            if (!targetSelector || targetSelector === '#') return;
            
            let targetElement = null;
            try {
                targetElement = document.querySelector(targetSelector);
            } catch (selectionError) {
                console.error('Invalid anchor selector', selectionError);
                return;
            }
            
            if (!targetElement) return;
            
            event.preventDefault();
            targetElement.scrollIntoView({ behavior: 'smooth' });
        });
        
        // Add scroll effect to header
        window.addEventListener('scroll', function() {
            const header = document.querySelector('header');
            if (window.scrollY > 50) {
                header.style.boxShadow = 'var(--shadow-md)';
            } else {
                header.style.boxShadow = 'none';
            }
        });
    </script>
</body>
</html>
